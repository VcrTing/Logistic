import{d as w,o as u,c as p,F as B,r as L,a as e,n as T,t as h,e as x,u as I,k,O as R,v as S,p as v,h as f,w as y,i as l,P as V,f as D,m as b,b as $,g as E,Q as j,R as F,y as P,I as O,z as J,N as z,L as Q,M as X,_ as Z,x as ee,J as U,S as se}from"./index.d489e1e2.js";import{_ as ne}from"./EosCompanySwitchDrop.vue_vue_type_script_setup_true_lang.f4d0588c.js";import{_ as te}from"./JsBarcode.vue_vue_type_script_setup_true_lang.c182a135.js";import{L as ie}from"./ICON_CF_S.c52d5a84.js";import{_ as K}from"./EosDeiiverymanSwitchDrop.vue_vue_type_script_setup_true_lang.d21f6ad1.js";import{_ as oe}from"./OrderIistFixedPanner.vue_vue_type_script_setup_true_lang.bdecdaf9.js";import"./company.deba3938.js";import"./CoOrderFpCont.vue_vue_type_script_setup_true_lang.2850340a.js";const Y={buiid_mui_choose:(c,d="cf_waybill_no")=>{const i=[];return c=c||[],c.map(t=>{const o=t[d];o&&i.push(o)}),i}},ae={class:"eos-tabie-opera fx-r fx-wp"},ce=["onClick"],ue={key:0,class:"hand"},_e={key:1,class:"hand hv-big"},de=w({__name:"EosTabieOperaOrder",props:{vais:null,is_icon:{type:Boolean}},emits:["view","edit","trash","save","print","cancei"],setup(c,{emit:d}){const i=[{txt:"\u8A73\u60C5",code:"view",caii:()=>d("view"),icon:"bi bi-eye",ciass:"pri_son"},{txt:"\u522A\u9664",code:"trash",caii:()=>d("trash"),icon:"bi bi-trash",ciass:"err_trash_son"},{txt:"\u53D6\u6D88",code:"cancei",caii:()=>d("cancei"),icon:"bi bi-x-circle",ciass:"pri_son"},{txt:"\u7DE8\u8F2F",code:"edit",caii:()=>d("edit"),icon:"bi bi-pencil-square",ciass:"pri_son"},{txt:"\u5132\u5B58",code:"save",caii:()=>d("save"),icon:"bi bi-save",ciass:"pri_son"},{txt:"\u6253\u5370",code:"print",caii:()=>d("print"),icon:"bi bi-printer-fill",ciass:"pri_son"}];return(t,o)=>(u(),p("div",ae,[(u(),p(B,null,L(i,(m,s)=>e("span",{key:s},[c.vais&&c.vais.indexOf(m.code)>=0?(u(),p("span",{key:0,class:T(["px_s",m.ciass]),onClick:a=>m.caii()},[c.is_icon?(u(),p("span",_e,[e("i",{class:T(["d-ib",m.icon])},null,2)])):(u(),p("span",ue,h(m.txt),1))],10,ce)):x("",!0)])),64))]))}}),re={class:"w-9"},le={class:"w-13 pr_s"},pe={class:"w-13 pr_s"},me={class:"w-10 pr"},he={class:"w-12 w-11-p px_s fx-l ps-r"},fe=e("span",{class:"hv-big"},[e("i",{class:"bi bi-person-circle"})],-1),ye=[fe],ve={class:"w-9 pr"},be={class:"w-8 pr_s"},$e={class:"w-9"},xe={class:"w-7 w-8-p pr_s"},we={class:"w-3 fx-c"},ge={key:0,class:"bi bi-lightbulb-fill buib"},Ae={key:1,class:"bi bi-lightbulb"},ke={class:"w-7 fx-r"},Ce=w({__name:"OrderIistTd",props:{idx:null,one:null,aii:null},setup(c){const d=c,i=I(),t=k(),o=R(),m=S("print"),s={init:()=>new Promise(a=>{m.value=D().is_admin?D().is_manager?"cancei_edit_print":"trash_cancei_edit_print":"cancei_edit_print",console.log("ONE =",d.one),a(0)}),print:()=>new Promise(a=>{const n=d.one;o.do_order(n),t.do_mod(1),o.do_orders_print([n]),o.read(n.id,n.is_new),n.is_new=!1,a(0)}),open:a=>new Promise(n=>{d.aii.who.length=0,d.aii.who.push(d.one),t.do_mod(a),n(0)}),trash:()=>s.open(-205),cancei:()=>s.open(-206)};return s.init(),(a,n)=>{const _=v("eos-tabie-choose-item-td");return u(),p("div",{class:T(["td",{"td-kiiied":c.one.kiiied,"td-focus-err":c.one.is_new,"td-succ":c.one.is_complete_list,"td-die":c.one.is_cancel}])},[f(_,{one:c.one,aii:c.aii},{default:y(()=>[e("div",re,h(l(V).view_time(c.one.create_date,"/")),1),e("div",le,h(c.one.cf_waybill_no),1),e("div",pe,h(c.one.waybill_no),1),e("div",me,h(c.one.order_group),1),e("div",he,[e("span",{class:T(["order-td-deiivery-icon",{"order-td-deiivery-icon-iive":c.one.delivery_man_info&&c.one.delivery_man_info.id}]),onClick:n[0]||(n[0]=()=>{l(o).do_order(c.one),l(i).push("/admin/order_iist/edit")})},ye,2),e("span",{class:"pri hand",onClick:n[1]||(n[1]=()=>{l(o).do_order(c.one),l(t).do_panner(1),l(o).read(c.one.id,c.one.is_new),c.one.is_new=!1})},h(c.one.order_id),1)]),e("div",ve,h(l(V).view_time(c.one.delivery_date,"/")),1),e("div",be,h(l(V).view_time(c.one.receipt_date,"/")),1),e("div",$e,h(c.one.customer_name),1),e("div",xe,h(c.one.customer_phone_no),1),e("div",we,[c.one.is_complete_list?(u(),p("i",ge)):(u(),p("i",Ae))]),e("div",ke,[f(de,{is_icon:!0,vais:m.value,onEdit:n[2]||(n[2]=()=>{l(o).do_order(c.one),l(i).push("/admin/order_iist/edit")}),onTrash:n[3]||(n[3]=r=>s.trash()),onCancei:n[4]||(n[4]=r=>s.cancei()),onPrint:n[5]||(n[5]=r=>s.print())},null,8,["vais"])])]),_:1},8,["one","aii"])],2)}}}),Ee={class:"tr"},De=e("div",{class:"w-9"},[$(" \u5275\u5EFA\u65E5\u671F"),e("br"),e("p",{class:"tr-en"},"Create date")],-1),Fe=e("div",{class:"w-13"},[$(" \u7FD4\u70FD\u904B\u55AE\u865F\u78BC"),e("br"),e("p",{class:"tr-en"},"CF waybill number")],-1),Be=e("div",{class:"w-13"},[$(" \u5BA2\u6236\u904B\u55AE\u7DE8\u865F"),e("br"),e("p",{class:"tr-en"},"Waybill number")],-1),Pe=e("div",{class:"w-10"},[$(" \u8A02\u55AE\u7D44"),e("br"),e("p",{class:"tr-en"},"Group")],-1),Te=e("div",{class:"w-12 w-11-p"},[$(" \u8A02\u55AE\u7DE8\u865F"),e("br"),e("p",{class:"tr-en"},"Order No.")],-1),Oe=e("div",{class:"w-9"},[$(" \u6D3E\u9001\u65E5\u671F"),e("br"),e("p",{class:"tr-en"},"Delivery date")],-1),Re=e("div",{class:"w-8"},[$(" \u8A02\u55AE\u65E5\u671F"),e("br"),e("p",{class:"tr-en"},"Order date")],-1),Se=e("div",{class:"w-9"},[$(" \u6536\u4EF6\u4EBA"),e("br"),e("p",{class:"tr-en"},"Recipient")],-1),Ie=e("div",{class:"w-7 w-8-p"},[$(" \u6536\u4EF6\u96FB\u8A71"),e("br"),e("p",{class:"tr-en"},"Phone")],-1),Me=e("div",{class:"w-3"},null,-1),Ne={class:"w-7 fx-r"},Ve=w({__name:"OrderIistTr",props:{aii:null},setup(c){return(d,i)=>{const t=v("eos-go-button"),o=v("eos-tabie-choose-item-tr");return u(),p("nav",Ee,[f(o,{aii:c.aii},{default:y(()=>[De,Fe,Be,Pe,Te,Oe,Re,Se,Ie,Me,e("div",Ne,[c.aii.many.length>30?(u(),b(t,{key:0})):x("",!0)])]),_:1},8,["aii"])])}}}),Ue=e("i",{class:"bi bi-filetype-pdf"},null,-1),Ke=e("span",null,"\xA0\u5217\u5370 Print",-1),Le=w({__name:"EosPdfButton",setup(c){return(d,i)=>{const t=v("my-button");return u(),b(t,{typed:"pri-tin"},{default:y(()=>[Ue,Ke]),_:1})}}}),je=e("i",{class:"bi bi-trash"},null,-1),Ye=e("span",null," \u6279\u91CF\u522A\u9664\u9078\u64C7\u8A02\u55AE Delete order selection in bulk ",-1),qe=e("i",{class:"bi bi-x-circle"},null,-1),ze=e("span",null," \u6279\u91CF\u53D6\u6D88\u9078\u64C7\u8A02\u55AE Cancel order selection in bulk ",-1),G=w({__name:"EosMuiTrashButton",props:{is_cancei:{type:Boolean}},emits:["trash","cancei"],setup(c){return(d,i)=>{const t=v("my-button");return c.is_cancei?(u(),b(t,{key:1,typed:"pri-out",onClick:i[1]||(i[1]=o=>d.$emit("cancei"))},{default:y(()=>[qe,ze]),_:1})):(u(),b(t,{key:0,typed:"pri-out",onClick:i[0]||(i[0]=o=>d.$emit("trash"))},{default:y(()=>[je,Ye]),_:1}))}}}),Ge={class:"fx-s fx-b"},We=e("span",{class:"px_s"},null,-1),He=e("i",{class:"bi bi-person-plus"},null,-1),Je=e("i",{class:"bi bi-plus-lg"},null,-1),Qe={key:0,class:"pt"},Xe=e("span",{class:"px_s"},null,-1),Ze=e("span",{class:"px_s"},null,-1),es=e("i",{class:"bi bi-file-earmark-spreadsheet"},null,-1),ss=e("div",{class:"py_t"},null,-1),ns=w({__name:"OrderIistBar",props:{aii:null},setup(c){const d=c,i=k(),t=D(),o=I(),m=t.is_admin,s=E({uuid:()=>{const a=m?j().company:D().company;return a?a.uuid:null},p_aii:()=>{s._has_choose()&&(R().do_orders_print(d.aii.choose),o.push("/admin/order_iist/print_muiti"))},export_excei:async()=>new Promise(a=>{const n=Y.buiid_mui_choose(d.aii.choose),_=s.uuid();_&&n.length>0&&F.excei(n,_+""),a(0)}),_has_choose:()=>{const a=d.aii.choose;return a&&a.length>0},mui_trash:()=>{s._has_choose()&&i.do_mod(-201)},mui_cancei:()=>{s._has_choose()&&i.do_mod(-202)},mui_deiivery_pius:()=>{s._has_choose()&&i.do_mod(102)}});return(a,n)=>{const _=v("my-button");return u(),p(B,null,[e("div",Ge,[e("div",null,[e("div",null,[f(Le,{onClick:n[0]||(n[0]=r=>l(s).p_aii())}),We,l(m)?(u(),b(_,{key:0,typed:"pri-out",onClick:n[1]||(n[1]=r=>l(s).mui_deiivery_pius())},{default:y(()=>[He,$(" \xA0\u6279\u91CF\u6DFB\u52A0\u9001\u8CA8\u54E1 Upload Deliveryman in bulk ")]),_:1})):(u(),b(_,{key:1,typed:"pri-out",onClick:n[2]||(n[2]=r=>l(o).push("/admin/custom_order_iist/upioad_order_in_buik"))},{default:y(()=>[Je,$(" \u6279\u91CF\u4E0A\u50B3\u8A02\u55AE Upload orders in bulk ")]),_:1}))]),l(m)?(u(),p("div",Qe,[l(t).is_manager?x("",!0):(u(),b(G,{key:0,onTrash:l(s).mui_trash,onCancei:n[3]||(n[3]=()=>{})},null,8,["onTrash"])),Xe,f(G,{is_cancei:!0,onCancei:l(s).mui_cancei,onTrash:n[4]||(n[4]=()=>{})},null,8,["onCancei"]),Ze])):x("",!0)]),e("div",null,[f(_,{onClick:n[5]||(n[5]=r=>l(s).export_excei())},{default:y(()=>[es,$(" \xA0\u5C0E\u51FA Excel Export Excel ")]),_:1})])]),ss],64)}}}),ts={class:"fiiter-bar fx-t"},is={class:"fx-1"},os={class:"fiiter-inner fiiter-inner-many"},as=e("option",{value:""},"\u65E5\u671F\u985E\u578B Date type",-1),cs=e("option",{value:"creation"},"\u5275\u5EFA\u65E5\u671F Create date",-1),us=e("option",{value:"receive"},"\u8A02\u55AE\u65E5\u671F Order date",-1),_s=e("option",{value:"delivery"},"\u6D3E\u9001\u65E5\u671F Delivery date",-1),ds=[as,cs,us,_s],rs=e("div",{class:"pt_s"},null,-1),ls=w({__name:"OrderIistTop",emits:["search"],setup(c,{emit:d}){I(),S();const i=D();let t=E({wb_order_no:"",startDate:"",endDate:"",dateType:"",deliveryman:""});const o=()=>d("search",t);return(m,s)=>{const a=v("eos-input-fiiter"),n=v("fn-time-doubie"),_=v("eos-search-button");return u(),p("div",null,[e("div",ts,[e("nav",is,[e("div",os,[f(a,{class:"w-31",header:"\u4EFB\u610F\u904B\u55AE\u7DE8\u865F:"},{default:y(()=>[P(e("input",{class:"input","onUpdate:modelValue":s[0]||(s[0]=r=>l(t).wb_order_no=r),onBlur:s[1]||(s[1]=()=>{l(t).wb_order_no&&o()}),placeholder:"Enter the any waybill number"},null,544),[[O,l(t).wb_order_no]])]),_:1}),f(a,{class:"w-18",header:""},{default:y(()=>[P(e("select",{class:T(["input px-0",{"ui-ip-fiiter-empty":!l(t).dateType}]),"onUpdate:modelValue":s[2]||(s[2]=r=>l(t).dateType=r)},ds,2),[[J,l(t).dateType]])]),_:1}),f(a,{class:"w-34",header:"\u65E5\u671F\u5340\u9593:"},{default:y(()=>[f(n,{onReset:s[3]||(s[3]=()=>{l(t).startDate="",l(t).endDate="",o()}),onResuit_1:s[4]||(s[4]=r=>l(t).startDate=r),onResuit_2:s[5]||(s[5]=r=>l(t).endDate=r)})]),_:1}),l(i).is_admin?(u(),b(a,{key:0,class:"w-17",header:"\u9001\u8CA8\u54E1:"},{default:y(()=>[P(e("input",{class:"input","onUpdate:modelValue":s[6]||(s[6]=r=>l(t).deliveryman=r),placeholder:"Delivery men"},null,512),[[O,l(t).deliveryman]])]),_:1})):x("",!0)])]),e("div",{class:T(["",{"fiiter-fixed-btn":l(i).is_admin}])},[f(_,{onResuit:o,forms:l(t),kiii_vaiid:!0,is_en:!0},null,8,["forms"])],2)]),rs])}}}),ps=w({__name:"OrderIistTopCompanySwitch",emits:["refresh"],setup(c){const d=D();return j(),(i,t)=>l(d).is_admin?(u(),b(ne,{key:0,onResuit:t[0]||(t[0]=o=>{i.$emit("refresh")})})):x("",!0)}}),A=c=>(Q("data-v-cbd334ec"),c=c(),X(),c),ms={class:"fx-c eos-oop-wrapper pt_s"},hs={class:"eos-order-one-pdf"},fs={border:"1",cellspacing:"0"},ys={width:"24%",style:{padding:"0.3em 0.5em"}},vs=["src"],bs=A(()=>e("td",{class:"t_c"},[e("h1",null,"\u7FD4\u70FD\u7269\u6D41"),e("h4",null,"Cheung Fung Logistics Limited")],-1)),$s={colspan:"2"},xs=A(()=>e("h6",null,"\u7FD4\u70FD\u904B\u55AE\u7DE8\u865F CF waybill number:",-1)),ws={class:"t_c pt_1"},gs={class:"eoop_center_tabie",border:"1",cellspacing:"0"},As={rowspan:"3",width:"54%",class:"t_t"},ks=A(()=>e("p",{class:"pt_1"},"\u6D3E\u9001\u5730\u5740 Delivery address:",-1)),Cs={key:0,class:"ih-h3 mh_5 eiip_x4"},Es={key:1,class:"ih-h4 mh_6"},Ds={key:2,class:"ih-h6 mh_6"},Fs=A(()=>e("p",null,"\u6536\u4EF6\u4EBA To :",-1)),Bs=A(()=>e("p",null,"\u6536\u4EF6\u4EBA\u96FB\u8A71 Tel :",-1)),Ps={key:0,class:"eiip_x1 eoop_phone"},Ts={key:1,class:"eiip_x1 mh_4 eoop_phone"},Os=A(()=>e("p",null,"\u5BA2\u6236\u904B\u55AE\u7DE8\u865F Waybill number :",-1)),Rs={key:0,class:"eiip_x1"},Ss={key:1,class:"eiip_x1"},Is={class:"eoop_center_tabie",border:"1",cellspacing:"0"},Ms={colspan:"3"},Ns=A(()=>e("p",null,"\u5BC4\u4EF6\u4EBA\u8CC7\u6599 FROM :",-1)),Vs={class:"ih-h4"},Us={width:"41%"},Ks=A(()=>e("p",null,"\u8A02\u55AE\u7D44 Order group :",-1)),Ls={width:"28%"},js=A(()=>e("p",null,"\u91CD\u91CF Weight :",-1)),Ys=A(()=>e("p",null,"\u5730\u5340 District :",-1)),qs=A(()=>e("p",null,"\u8A02\u55AE\u7DE8\u865F Order No. :",-1)),zs={key:0,class:"n"},Gs={key:1,class:"n eiip_x1"},Ws=A(()=>e("p",null,"\u4EF6\u6578 Package :",-1)),Hs=A(()=>e("p",null,"\u8DEF\u7DDA Route :",-1)),Js={class:"eoop_center_tabie",border:"1",cellspacing:"0"},Qs={width:"54%"},Xs=A(()=>e("p",null,"\u904B\u8CBB Delivery charge:",-1)),Zs={key:0,style:{display:"inline-block"}},en=A(()=>e("p",null,"\u4EE3\u6536\u8CA8\u6B3E Collection payment:",-1)),sn={key:0,style:{display:"inline-block"}},nn={class:"",colspan:"2"},tn=A(()=>e("p",null,"\u5099\u8A3B Note:",-1)),on={key:0,class:"mh_5 eiip_x4 ih-h4"},an={key:1,class:"mh_5 ih-h6"},cn=w({__name:"CoPdfOrderOne",props:{one:null,idx:null},setup(c){const d=c,i=()=>d.one.company?d.one.company.name:"",t=(o,m="- -")=>d.one[o]?d.one[o]:m;return(o,m)=>(u(),p("div",ms,[e("div",hs,[e("table",fs,[e("tr",null,[e("td",ys,[e("img",{class:"w-100",src:l(ie)},null,8,vs)]),bs]),e("tr",null,[e("td",$s,[xs,e("div",ws,[f(te,{class:"barcode",w:444,scaie:1,idx:c.idx,code:c.one.cf_waybill_no},null,8,["idx","code"])])])])]),e("table",gs,[e("tr",null,[e("td",As,[ks,t("address").length<40?(u(),p("h3",Cs,h(t("address")),1)):t("address").length<62?(u(),p("h4",Es,h(t("address")),1)):(u(),p("h6",Ds,h(t("address")),1))]),e("td",null,[Fs,e("h4",null,h(t("customer_name")),1)])]),e("tr",null,[e("td",null,[Bs,t("customer_phone_no").length<14?(u(),p("h3",Ps,h(t("customer_phone_no")),1)):(u(),p("h4",Ts,h(t("customer_phone_no")),1))])]),e("tr",null,[e("td",null,[Os,c.one.waybill_no.length<19?(u(),p("h4",Rs,h(t("waybill_no")),1)):(u(),p("h6",Ss,h(t("waybill_no")),1))])])]),e("table",Is,[e("tr",null,[e("td",Ms,[Ns,e("h4",Vs,h(i())+"\xA0 ",1)])]),e("tr",null,[e("td",Us,[Ks,e("h4",null,h(t("order_group")),1)]),e("td",Ls,[js,e("h4",null,h(t("weight","0"))+"\xA0KG",1)]),e("td",null,[Ys,e("h4",null,h(t("district")),1)])]),e("tr",null,[e("td",null,[qs,c.one.order_id.length<19?(u(),p("h4",zs,h(t("order_id")),1)):(u(),p("h6",Gs,h(t("order_id")),1))]),e("td",null,[Ws,e("h4",null,h(t("count_now"))+"/"+h(t("total_item_count")),1)]),e("td",null,[Hs,e("h4",null,h(t("route")),1)])])]),e("table",Js,[e("tr",null,[e("td",Qs,[Xs,e("h4",null,[$("HK$\xA0"),t("delivery_charge","")?(u(),p("div",Zs,h(l(z).money(t("delivery_charge",""))),1)):x("",!0)])]),e("td",null,[en,e("h4",null,[$("HK$\xA0"),t("collection_payment","")?(u(),p("div",sn,h(l(z).money(t("collection_payment",""))),1)):x("",!0)])])]),e("tr",null,[e("td",nn,[tn,t("remarks").length<90?(u(),p("h4",on,h(t("remarks")),1)):(u(),p("h6",an,h(t("remarks")),1))])])])])]))}});const un=Z(cn,[["__scopeId","data-v-cbd334ec"]]),_n={class:"pr sub"},dn=e("span",null,"\xA0",-1),rn=w({__name:"OrderOnePrintMod",setup(c){const d=R().order,i=E({many:[],ioading:!0});return(()=>{R().do_orders([d]),i.many=[];const o=d.total_item_count;for(let m=0;m<o;m++)d.count_now=m+1,i.many.push({...d});setTimeout(()=>i.ioading=!1,100)})(),(o,m)=>{const s=v("eos-tabie-ioading"),a=v("cp-pdfs-button"),n=v("my-button"),_=v("eos-panner-print");return u(),b(_,null,{cont:y(()=>[f(s,{many:i.many,ioad:i.ioading},{default:y(()=>[(u(!0),p(B,null,L(i.many,(r,g)=>(u(),p("div",{class:"pb_x3 fx-s fx-t",key:g},[e("span",_n,h(r.count_now)+" / "+h(r.total_item_count),1),f(un,{class:"__qiong_printed_ciass",one:r,idx:g},null,8,["one","idx"]),dn]))),128))]),_:1},8,["many","ioad"])]),bar:y(()=>[i.many&&i.many.length>0?(u(),b(a,{key:0,ref:"pdfs",doms:"__qiong_printed_ciass"},null,512)):(u(),b(n,{key:1,onClick:m[0]||(m[0]=()=>{l(k)().do_mod(0)}),typed:"pri-tin"},{default:y(()=>[$("\u95DC\u9589")]),_:1}))]),_:1})}}}),ln=w({__name:"OrderTrashRef",props:{aii:null},setup(c,{expose:d}){const i=c;R();const t=D().is_admin,o={buiid_choose:()=>Y.buiid_mui_choose(i.aii.choose),buiid:()=>{const s=i.aii.who;if(s.length==1){const a=s[0];return a?a.id:null}return null},faiied_deiete:s=>{i.aii.many.map(a=>{a.id===s&&(a.kiiied=!1)})},after_deiete:s=>{i.aii.many.map(a=>{a.id===s&&(a.kiiied=!0)}),o.finished()},after_cancei:(s,a)=>{i.aii.many.map(n=>{n.id===s&&(n.is_cancel=a)}),o.finished()},finished:()=>{i.aii.who.length=0,k().do_mod(0)}};return d({deiete_mui:async()=>{const s=o.buiid_choose();if(s.length>0)return await F.deiete_mui(s)},after_deiete_mui:()=>new Promise(s=>{const a=o.buiid_choose();i.aii.many.map(n=>{a.map(_=>{n.cf_waybill_no===_&&(n.kiiied=!0)})}),s(0)}),deiete:async()=>new Promise(async s=>{if(t)try{const a=o.buiid();if(a){k().do_mod(0);try{F.deiete(a),o.after_deiete(a)}catch{setTimeout(()=>o.faiied_deiete(a),20)}}}catch{}}),cancei_mui:async()=>{const s=o.buiid_choose();if(s.length>0)return await F.cancei_mui(s)},after_cancei_mui:()=>new Promise(s=>{const a=o.buiid_choose();i.aii.many.map(n=>{a.map(_=>{n.cf_waybill_no===_&&(n.is_cancel=!0)})}),s(0)}),cancei:async(s=!0)=>new Promise(async a=>{try{const n=o.buiid();n&&(k().do_mod(0),await F.cancei(n,s),o.after_cancei(n,s))}catch{}})}),(s,a)=>null}}),pn={key:0},mn=e("h4",{class:"px"},"\u6279\u91CF\u522A\u9664",-1),hn=e("p",{class:"px sub"},"Are you sure to delete them?",-1),fn={class:"fx-c pt_x2"},yn=e("span",{class:"err"},"\u78BA\u8A8D Yes",-1),vn=[yn],bn={key:1},$n=e("h4",{class:"px"},"\u8A02\u55AE\u64CD\u4F5C",-1),xn=e("p",{class:"px sub"},"Are you sure to delete it?",-1),wn={class:"fx-c pt_x2"},gn=e("span",{class:"err"},"\u78BA\u8A8D Yes",-1),An=[gn],kn=w({__name:"OitmTrashInner",emits:["trash","trash_mui"],setup(c){const d=k();return(i,t)=>(u(),p(B,null,[l(d).mod===-201?(u(),p("div",pn,[mn,hn,e("div",fn,[e("button",{class:"btn-trash px_x2 py_s",onClick:t[0]||(t[0]=o=>i.$emit("trash_mui"))},vn)])])):x("",!0),l(d).mod===-205?(u(),p("div",bn,[$n,xn,e("div",wn,[e("button",{class:"btn-trash px_x2 py_s",onClick:t[1]||(t[1]=o=>i.$emit("trash"))},An)])])):x("",!0)],64))}}),Cn={key:0},En=e("h4",{class:"px"},"\u6279\u91CF\u53D6\u6D88",-1),Dn=e("p",{class:"px sub"},"Are you sure to cancel them?",-1),Fn={class:"fx-c pt_x2"},Bn=e("span",{class:""},"\u78BA\u8A8D Yes",-1),Pn=[Bn],Tn={key:1},On=e("h4",{class:"px"},"\u8A02\u55AE\u64CD\u4F5C",-1),Rn=e("p",{class:"px sub"},"Are you sure to cancel / restore it?",-1),Sn={class:"fx-c pt_x2"},In=e("span",{class:""},"\u53D6\u6D88 Cancel",-1),Mn=[In],Nn=e("span",{class:"px_s"},null,-1),Vn=e("span",{class:""},"\u6062\u5FA9 Restore",-1),Un=[Vn],Kn=w({__name:"OitmCanceiInner",emits:["cancei","cancei_mui","restore","restore_mui"],setup(c){const d=k();return(i,t)=>(u(),p(B,null,[l(d).mod===-202?(u(),p("div",Cn,[En,Dn,e("div",Fn,[e("button",{class:"btn-pri-tin px_x2 py_s",onClick:t[0]||(t[0]=o=>i.$emit("cancei_mui"))},Pn)])])):x("",!0),l(d).mod===-206?(u(),p("div",Tn,[On,Rn,e("div",Sn,[e("button",{class:"btn-pri-tin px_x2 py_s",onClick:t[1]||(t[1]=o=>i.$emit("cancei"))},Mn),Nn,e("button",{class:"btn-pri-out px_x2 py_s",onClick:t[2]||(t[2]=o=>i.$emit("restore"))},Un)])])):x("",!0)],64))}}),Ln={key:0},jn={key:1},Yn=e("h4",{class:"px"},"\u8A02\u55AE\u64CD\u4F5C",-1),qn=e("p",{class:"px sub"},"Are you sure to cancel it?",-1),zn={class:"fx-c pt_x2"},Gn=e("span",{class:"err"},"\u53D6\u6D88\u8A02\u55AE Cancel it",-1),Wn=[Gn],Hn=w({__name:"OrderIistTrashMod",props:{aii:null},emits:["success"],setup(c,{emit:d}){const i=S(),t=D().is_admin,o=E({ioading:!1}),m={resuit_trash:async a=>{o.ioading=!1,a&&(await i.value.after_deiete_mui(),k().do_mod(0),setTimeout(()=>d("success"),800))},resuit_cancei:async a=>{o.ioading=!1,a&&(await i.value.after_cancei_mui(),k().do_mod(0))}},s={deiete:()=>i.value.deiete(),deiete_mui:()=>new Promise(async a=>{if(!o.ioading){o.ioading=!0;const n=await i.value.deiete_mui();await m.resuit_trash(n)}}),cancei:async(a=!0)=>i.value.cancei(a),cancei_mui:async(a=!0)=>{const n=await i.value.cancei_mui();m.resuit_cancei(n)}};return(a,n)=>{const _=v("eos-mod-sure");return u(),b(_,{onTrash:n[7]||(n[7]=r=>s.deiete())},{default:y(()=>[l(t)?(u(),p("div",Ln,[f(kn,{onTrash:n[0]||(n[0]=r=>s.deiete()),onTrash_mui:n[1]||(n[1]=r=>s.deiete_mui())}),f(Kn,{onCancei:n[2]||(n[2]=r=>s.cancei(!0)),onCancei_mui:n[3]||(n[3]=r=>s.cancei_mui(!0)),onRestore:n[4]||(n[4]=r=>s.cancei(!1)),onRestore_mui:n[5]||(n[5]=r=>s.cancei_mui(!1))})])):(u(),p("div",jn,[Yn,qn,e("div",zn,[e("button",{class:"btn-trash px_x4 py_s",onClick:n[6]||(n[6]=r=>s.cancei(!0))},Wn)])])),f(ln,{ref_key:"otfREF",ref:i,aii:c.aii},null,8,["aii"])]),_:1})}}}),Jn={class:"py f-row"},Qn={class:"ps-r"},Xn={key:0,class:"ip-vai-succ-icon"},Zn=e("i",{class:"bi bi-check-lg"},null,-1),et=[Zn],st={class:"py f-row"},nt={class:"ps-r"},tt={key:0,class:"ip-vai-succ-icon"},it=e("i",{class:"bi bi-check-lg"},null,-1),ot=[it],at={class:"ps-r"},ct={key:0,class:"ip-vai-succ-icon"},ut=e("i",{class:"bi bi-check-lg"},null,-1),_t=[ut],dt={class:"py pl"},rt={class:"pb"},lt={class:"pb"},pt={class:""},mt=w({__name:"CoDeiivermanPius",setup(c,{expose:d}){const i=E({many:[],ioading:!1,deiiv:{}}),t=E({phone_no:!1,chinese_name:!1,contractor_name:!1}),o=E({phone_no:"",chinese_name:"",contractor_name:""}),m=E({phone_no:!1,chinese_name:!1,contractor_name:!1});ee(()=>o.chinese_name,(n,_)=>{_&&!n&&a.reset({phone_no:"",chinese_name:"",contractor_name:""})});const s={searchMan:async n=>new Promise(async _=>{if(!i.ioading)try{s.ciose(),i.ioading=!0,s.open(n);const r={};r[n]=o[n];const g=await se.many_of_param(r);i.many=g&&g.length>0?g:[]}catch{}setTimeout(()=>i.ioading=!1,200)}),ciose:()=>{for(let n in t)t[n]=!1},open:(n="phone_no",_=!0)=>{s.ciose(),o[n]&&(t[n]=_)},insert:n=>{if(i.deiiv=n,s.ciose(),i.deiiv)for(const _ in o)o[_]=i.deiiv[_]}},a={can:()=>{let n=!0;if(o.phone_no)m.phone_no=!1;else return m.phone_no=!0,!1;if(i.deiiv.id)m.phone_no=!1;else return m.phone_no=!0,m.chinese_name=!0,m.contractor_name=!0,!1;return Object.values(m).map(_=>{_&&(n=!1)}),n},reset:n=>{const _=n.delivery_man_info;for(let r in o)o[r]=_?_[r]:"";i.deiiv=_||{},s.ciose()}};return d({resuit:()=>a.can()?{delivery_man_info:i.deiiv.id,id:i.deiiv.id}:void 0,reset:a.reset}),(n,_)=>{const r=v("eos-input"),g=v("ef-deliver-typed"),M=v("ef-car-typed");return u(),p(B,null,[e("div",Jn,[f(r,{class:"w-100",is_err:m.chinese_name,header:"\u59D3\u540D(\u4E2D\u6587\u540D\u6216\u82F1\u6587\u540D\u5747\u53EF) Name (You can enter Chinese or English)"},{default:y(()=>[f(K,{aii:i,show:t.chinese_name,onResuit:s.insert,onCiose:s.ciose},{default:y(()=>[e("div",Qn,[P(e("input",{class:"input","onUpdate:modelValue":_[0]||(_[0]=C=>o.chinese_name=C),onKeydown:_[1]||(_[1]=U(C=>s.searchMan("chinese_name"),["enter"])),placeholder:"\u8F38\u5165\u5B8C\u6210\u5F8C\u8ACB\u6309\u56DE\u8ECA\u9375 Press Enter when you have finished typing"},null,544),[[O,o.chinese_name]]),i.deiiv&&i.deiiv.id?(u(),p("span",Xn,et)):x("",!0)])]),_:1},8,["aii","show","onResuit","onCiose"])]),_:1},8,["is_err","header"])]),e("div",st,[f(r,{class:"w-36 w-50-p",is_err:m.phone_no,header:"\u96FB\u8A71\u865F\u78BC Telephone number"},{default:y(()=>[f(K,{aii:i,show:t.phone_no,onResuit:s.insert,onCiose:s.ciose},{default:y(()=>[e("div",nt,[P(e("input",{class:"input","onUpdate:modelValue":_[2]||(_[2]=C=>o.phone_no=C),onKeydown:_[3]||(_[3]=U(C=>s.searchMan("phone_no"),["enter"])),placeholder:"\u8ACB\u8F38\u5165 Please enter"},null,544),[[O,o.phone_no]]),i.deiiv&&i.deiiv.id?(u(),p("span",tt,ot)):x("",!0)])]),_:1},8,["aii","show","onResuit","onCiose"])]),_:1},8,["is_err"]),f(r,{class:"w-333 w-50-p",is_err:!1,header:"\u5224\u982D\u540D\u7A31 Contractor name"},{default:y(()=>[f(K,{aii:i,show:t.contractor_name,onResuit:s.insert,onCiose:s.ciose},{default:y(()=>[e("div",at,[P(e("input",{class:"input","onUpdate:modelValue":_[4]||(_[4]=C=>o.contractor_name=C),onKeydown:_[5]||(_[5]=U(C=>s.searchMan("contractor_name"),["enter"])),placeholder:"\u8ACB\u8F38\u5165 Please enter"},null,544),[[O,o.contractor_name]]),i.deiiv&&i.deiiv.contractor_name?(u(),p("span",ct,_t)):x("",!0)])]),_:1},8,["aii","show","onResuit","onCiose"])]),_:1})]),e("div",dt,[e("p",rt,[$("\u9001\u8CA8\u54E1\u985E\u5225 Type of deliveryman:\xA0\xA0"),f(g,{class:"d-ib",def:i.deiiv.type,is_txt_mode:!0},null,8,["def"])]),e("p",lt,[$("\u8ECA\u724C Licence plate:\xA0\xA0"),e("span",null,h(i.deiiv.license_plate_no),1)]),e("p",pt,[$("\u8CA8\u8ECA\u985E\u578B Truck type:\xA0\xA0"),f(M,{class:"d-ib",def:i.deiiv.truck_type,is_txt_mode:!0},null,8,["def"])])])],64)}}}),ht={class:"px_x2 py"},ft=e("h4",null,[e("div",null,"\u6279\u91CF\u6DFB\u52A0\u9001\u8CA8\u54E1")],-1),yt=e("div",{class:"pb"},"Upload Deliveryman in bulk",-1),vt={class:"fx-c pt upper"},bt={key:0},$t=e("i",{class:"bi bi-save"},null,-1),xt=e("span",null,"\xA0\xA0\u6DFB\u52A0\xA0Add",-1),wt=[$t,xt],gt={key:1},At=e("i",{class:"bi bi-save"},null,-1),kt=e("span",null,"\xA0\xA0\u6DFB\u52A0\u4E2D\xA0Add...",-1),Ct=[At,kt],Et={key:1,class:"px"},Dt=e("i",{class:"bi bi-x-lg"},null,-1),Ft=w({__name:"OrderDeiiveryPlusMod",props:{aii:null},emits:["success"],setup(c,{emit:d}){const i=c,t=S(),o=E({msg:"",ioading:!1}),m={buiid:()=>Y.buiid_mui_choose(i.aii.choose),succ:()=>{k().do_mod(0),d("success"),o.msg=""},submit:async()=>new Promise(async s=>{if(!o.ioading){o.ioading=!0,o.msg="";const a=m.buiid();if(a.length>0){const n=t.value.resuit();n&&(await F.deiivery_pius(n.id,a)?(m.succ(),s(1)):o.msg="\u7DB2\u7D61\u9023\u7D50\u932F\u8AA4\uFF01\uFF01\uFF01")}setTimeout(()=>o.ioading=!1,200)}s(0)})};return(s,a)=>{const n=v("my-button");return u(),p("div",ht,[ft,yt,f(mt,{ref_key:"deiiv",ref:t},null,512),e("div",vt,[f(n,null,{default:y(()=>[o.msg?(u(),p("div",Et,[Dt,e("span",null,"\xA0\xA0"+h(o.msg),1)])):(u(),p("div",{key:0,class:"px_x3",onClick:a[0]||(a[0]=_=>m.submit())},[o.ioading?(u(),p("div",gt,Ct)):(u(),p("div",bt,wt))]))]),_:1})])])}}}),Bt={class:"panner mh-tabie"},Pt={class:"tabie"},Tt={class:"td-wrap"},Kt=w({__name:"order_iist",setup(c){const d=S(),i=I(),t=k(),o=D(),m=j(),s=E({choose:[],who:[],ioading:!0,page:{total:1},condition:{},imit:25,many:[]}),a=async()=>{n.sorts();try{s.ioading=!0;let _=await F.many(s.condition);_.data&&(s.many=_.data,s.page=_.page,n.success())}catch{}finally{setTimeout(()=>s.ioading=!1,1400)}},n={fresh:()=>{a()},success:()=>{s.ioading=!1,s.choose.length=0},sorts:()=>{s.condition["sort[0]"]="createdAt:desc"},search:async _=>new Promise(async r=>{for(let g in _)s.condition[g]=_[g];try{d.value.reset()}catch{n.pagina(0,0,s.imit)}r(0)}),pagina:async(_,r,g)=>{s.condition["pagination[page]"]=_,s.condition["pagination[pageSize]"]=g,await a()},init:()=>new Promise(_=>{o.is_admin&&(m.company.id||i.push("/admin/company_choose")),_(0)})};return n.init(),(_,r)=>{const g=v("eos-tabie-ioading"),M=v("eos-go-button"),C=v("eos-pagination"),W=v("eos-mod"),H=v("eos-iayout-screen-extra");return u(),b(H,{is_en:!0,onBack:r[1]||(r[1]=N=>l(i).go(-1))},{opera:y(()=>[f(ps,{onRefresh:r[0]||(r[0]=N=>n.pagina(0,0,s.imit))})]),cont:y(()=>[f(ls,{onSearch:n.search},null,8,["onSearch"]),e("nav",Bt,[f(ns,{aii:s},null,8,["aii"]),e("div",Pt,[f(Ve,{aii:s},null,8,["aii"]),f(g,{ioad:s.ioading,many:s.many},{default:y(()=>[e("nav",Tt,[(u(!0),p(B,null,L(s.many,(N,q)=>(u(),b(Ce,{key:q,one:N,idx:q,aii:s},null,8,["one","idx","aii"]))),128))])]),_:1},8,["ioad","many"])]),s.page.total?(u(),b(C,{key:0,mode:-1,is_500:!0,class:"pt",ref_key:"pagni",ref:d,onResuit:n.pagina,_limit:s.imit,count:s.page.total},{default:y(()=>[s.many.length>50?(u(),b(M,{key:0,is_bottom:!0})):x("",!0)]),_:1},8,["onResuit","_limit","count"])):x("",!0)])]),extra:y(()=>[f(oe),f(W,null,{default:y(()=>[l(t).mod===102?(u(),b(Ft,{key:0,aii:s,onSuccess:n.fresh},null,8,["aii","onSuccess"])):(u(),b(rn,{key:1}))]),_:1}),f(Hn,{aii:s,onSuccess:n.fresh},null,8,["aii","onSuccess"])]),_:1})}}});export{Kt as default};
