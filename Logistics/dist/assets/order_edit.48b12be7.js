import{d as b,v as E,g as w,p as A,o as y,c as C,a as s,h as u,w as i,b as m,t as T,y as c,I as p,F as k,e as g,x as N,J as U,T as j,u as K,f as S,Q as W,B as G,m as I,i as O,P as M,R as J}from"./index.b4ec00ad.js";import{_ as R}from"./EosDeiiverymanSwitchDrop.vue_vue_type_script_setup_true_lang.a284a682.js";const L={class:"py f-row"},Q={class:"py f-row"},Y={class:"py f-row"},q={class:"py f-row"},z=s("span",{class:"ip-unit"},"kg",-1),H={class:"py f-row"},X={class:"py f-row"},Z=b({__name:"OrderEditBase",setup($,{expose:h}){const e=E(),n=w({create_date:"",cf_waybill_no:"",waybill_no:"",order_id:"",order_group:"",receipt_date:"",product_content:"",remarks:"",weight:"",total_item_count:""}),l=w({create_date:!1,waybill_no:!1,order_id:!1,order_group:!1,product_content:!1,total_item_count:!1}),_=function(){let t=!0;if(n.total_item_count)l.total_item_count=!1;else return l.total_item_count=!0,!1;return Object.values(l).map(a=>{a&&(t=!1)}),t};return h({resuit:()=>_()?n:void 0,reset:t=>{for(let a in n)n[a]=t[a];e.value.ioc(t.receipt_date)}}),(t,a)=>{const o=A("eos-input"),r=A("fn-time");return y(),C(k,null,[s("div",L,[u(o,{class:"w-50 w-50-p",is_err:!1,header:"\u5275\u5EFA\u65E5\u671F Order date",is_txt_mode:!0},{default:i(()=>[m(T(n.create_date),1)]),_:1}),u(o,{class:"w-50 w-50-p",is_err:!1,header:"\u7FD4\u70FD\u904B\u55AE\u7DE8\u865F CF waybill number",is_txt_mode:!0},{default:i(()=>[m(T(n.cf_waybill_no),1)]),_:1})]),s("div",Q,[u(o,{class:"w-50 w-50-p",is_err:l.waybill_no,header:"\u5BA2\u6236\u904B\u55AE\u7DE8\u865F Waybill number"},{default:i(()=>[c(s("input",{class:"input","onUpdate:modelValue":a[0]||(a[0]=d=>n.waybill_no=d),placeholder:"\u8ACB\u8F38\u5165 Please enter"},null,512),[[p,n.waybill_no]])]),_:1},8,["is_err"]),u(o,{class:"w-50 w-50-p",is_err:l.order_id,header:"\u8A02\u55AE\u7DE8\u865F Order No."},{default:i(()=>[c(s("input",{class:"input","onUpdate:modelValue":a[1]||(a[1]=d=>n.order_id=d),placeholder:"\u8ACB\u8F38\u5165 Please enter"},null,512),[[p,n.order_id]])]),_:1},8,["is_err","header"])]),s("div",Y,[u(o,{class:"w-50 w-50-p",is_err:l.order_group,header:"\u8A02\u55AE\u7D44 Group"},{default:i(()=>[c(s("input",{class:"input","onUpdate:modelValue":a[2]||(a[2]=d=>n.order_group=d),placeholder:"\u8ACB\u8F38\u5165 Please enter"},null,512),[[p,n.order_group]])]),_:1},8,["is_err"]),u(o,{class:"w-50 w-50-p",is_err:!1,header:"\u8A02\u55AE\u65E5\u671F Order date"},{default:i(()=>[u(r,{timed:n.receipt_date,ref_key:"dateRef",ref:e,onResuit:a[3]||(a[3]=d=>n.receipt_date=d)},null,8,["timed"])]),_:1})]),s("div",q,[u(o,{class:"w-50 w-50-p",is_err:l.total_item_count,header:"\u4EF6\u6578 Package"},{default:i(()=>[c(s("input",{class:"input",type:"number","onUpdate:modelValue":a[4]||(a[4]=d=>n.total_item_count=d),placeholder:"\u8ACB\u8F38\u5165 Please enter"},null,512),[[p,n.total_item_count]])]),_:1},8,["is_err"]),u(o,{class:"w-50 w-50-p ip-weight",is_err:!1,header:"\u91CD\u91CF Weight"},{default:i(()=>[c(s("input",{class:"input",type:"number","onUpdate:modelValue":a[5]||(a[5]=d=>n.weight=d),placeholder:"\u8ACB\u8F38\u5165 Please enter"},null,512),[[p,n.weight]]),z]),_:1})]),s("div",H,[u(o,{class:"w-100 w-100-p",is_err:l.product_content,header:"\u8CA8\u54C1\u5167\u5BB9 Product detail"},{default:i(()=>[c(s("input",{class:"input","onUpdate:modelValue":a[6]||(a[6]=d=>n.product_content=d),placeholder:"\u8ACB\u8F38\u5165 Please enter"},null,512),[[p,n.product_content]])]),_:1},8,["is_err"])]),s("div",X,[u(o,{class:"w-100",is_err:!1,header:"\u5099\u8A3B Remark"},{default:i(()=>[c(s("input",{class:"input","onUpdate:modelValue":a[7]||(a[7]=d=>n.remarks=d),placeholder:"\u8ACB\u8F38\u5165 Please enter"},null,512),[[p,n.remarks]])]),_:1})])],64)}}}),ee={class:"py f-row"},se={class:"py f-row"},te={class:"py f-row"},ne={class:"py f-row"},oe=b({__name:"OrderEditDetaii",setup($,{expose:h}){const e=w({car_park:0,tunnel_fee:0,misc_fee:0,floor_count:0,collection_payment:0,delivery_date:"",delivery_charge:0}),n=w({car_park:!1,tunnel_fee:!1,misc_fee:!1,floor_count:!1,collection_payment:!1,delivery_charge:!1}),l=function(){let _=!0;return Object.values(n).map(t=>{t&&(_=!1)}),_};return h({resuit:()=>l()?e:void 0,reset:_=>{for(let t in e)e[t]=_[t]}}),(_,t)=>{const a=A("fn-time"),o=A("eos-input");return y(),C(k,null,[s("div",ee,[u(o,{class:"w-50 w-50-p",is_err:!1,header:"\u9001\u8CA8\u65E5\u671F Delivery date"},{default:i(()=>[u(a,{timed:e.delivery_date,ref:"dateRef",onResuit:t[0]||(t[0]=r=>e.delivery_date=r)},null,8,["timed"])]),_:1}),g("",!0)]),s("div",se,[u(o,{class:"w-50 w-50-p",is_err:n.car_park,header:"\u505C\u8ECA\u5834 Parking"},{default:i(()=>[c(s("input",{class:"input",type:"number","onUpdate:modelValue":t[2]||(t[2]=r=>e.car_park=r),placeholder:"\u8ACB\u8F38\u5165 Please enter"},null,512),[[p,e.car_park]])]),_:1},8,["is_err"]),u(o,{class:"w-50 w-50-p",is_err:n.tunnel_fee,header:"\u96A7\u9053\u8CBB Tunnel fee"},{default:i(()=>[c(s("input",{class:"input",type:"number","onUpdate:modelValue":t[3]||(t[3]=r=>e.tunnel_fee=r),placeholder:"\u8ACB\u8F38\u5165 Please enter"},null,512),[[p,e.tunnel_fee]])]),_:1},8,["is_err"])]),s("div",te,[u(o,{class:"w-50 w-50-p",is_err:n.misc_fee,header:"\u96DC\u8CBB Other charges"},{default:i(()=>[c(s("input",{class:"input",type:"number","onUpdate:modelValue":t[4]||(t[4]=r=>e.misc_fee=r),placeholder:"\u8ACB\u8F38\u5165 Please enter"},null,512),[[p,e.misc_fee]])]),_:1},8,["is_err"]),u(o,{class:"w-50 w-50-p",is_err:n.floor_count,header:"\u6A13\u68AF\u5C64\u6578 Stairs floor"},{default:i(()=>[c(s("input",{class:"input",type:"number","onUpdate:modelValue":t[5]||(t[5]=r=>e.floor_count=r),placeholder:"\u8ACB\u8F38\u5165 Please enter"},null,512),[[p,e.floor_count]])]),_:1},8,["is_err"])]),s("div",ne,[u(o,{class:"w-50 w-50-p",is_err:n.delivery_charge,header:"\u904B\u8CBB Delivery charges"},{default:i(()=>[c(s("input",{class:"input",type:"number","onUpdate:modelValue":t[6]||(t[6]=r=>e.delivery_charge=r),placeholder:"\u8ACB\u8F38\u5165 Please enter"},null,512),[[p,e.delivery_charge]])]),_:1},8,["is_err"]),u(o,{class:"w-50 w-50-p",is_err:n.collection_payment,header:"\u4EE3\u6536\u8D27\u6B3E Collection Payment"},{default:i(()=>[c(s("input",{class:"input",type:"number","onUpdate:modelValue":t[7]||(t[7]=r=>e.collection_payment=r),placeholder:"\u8ACB\u8F38\u5165 Please enter"},null,512),[[p,e.collection_payment]])]),_:1},8,["is_err"])])],64)}}}),re={class:"py f-row"},ue={class:"py f-row"},ae={class:"py f-row"},ie={class:"py f-row"},le=b({__name:"OrderEditReciver",setup($,{expose:h}){const e=w({customer_name:"",customer_phone_no:"",district:"",area:"",address:"",route:""}),n=w({customer_name:!1,customer_phone_no:!1,district:!1,area:!1,address:!1,route:!1}),l=function(){let _=!0;if(e.customer_name)n.customer_name=!1;else return n.customer_name=!0,!1;if(e.address)n.address=!1;else return n.address=!0,!1;return Object.values(n).map(t=>{t&&(_=!1)}),_};return h({resuit:()=>l()?e:void 0,reset:_=>{for(let t in e)e[t]=_[t]}}),(_,t)=>{const a=A("eos-input");return y(),C(k,null,[s("div",re,[u(a,{class:"w-50 w-50-p",is_err:n.customer_name,header:"\u6536\u4EF6\u4EBA\u540D\u79F0 Recipient name"},{default:i(()=>[c(s("input",{class:"input","onUpdate:modelValue":t[0]||(t[0]=o=>e.customer_name=o),placeholder:"\u8ACB\u8F38\u5165 Please enter"},null,512),[[p,e.customer_name]])]),_:1},8,["is_err"]),u(a,{class:"w-50 w-50-p",is_err:n.customer_phone_no,header:"\u6536\u4EF6\u4EBA\u96FB\u8A71\u865F\u78BC Tel."},{default:i(()=>[c(s("input",{class:"input","onUpdate:modelValue":t[1]||(t[1]=o=>e.customer_phone_no=o),placeholder:"\u8ACB\u8F38\u5165 Please enter"},null,512),[[p,e.customer_phone_no]])]),_:1},8,["is_err","header"])]),s("div",ue,[u(a,{class:"w-50 w-50-p",is_err:n.district,header:"\u5730\u5340 District"},{default:i(()=>[c(s("input",{class:"input","onUpdate:modelValue":t[2]||(t[2]=o=>e.district=o),placeholder:"\u8ACB\u8F38\u5165 Please enter"},null,512),[[p,e.district]])]),_:1},8,["is_err"]),u(a,{class:"w-50 w-50-p",is_err:n.area,header:"\u5340\u57DF Area"},{default:i(()=>[c(s("input",{class:"input","onUpdate:modelValue":t[3]||(t[3]=o=>e.area=o),placeholder:"\u8ACB\u8F38\u5165 Please enter"},null,512),[[p,e.area]])]),_:1},8,["is_err"])]),s("div",ae,[u(a,{class:"w-100 w-100-p",is_err:n.address,header:"\u5730\u5740\u8A73\u60C5 Address"},{default:i(()=>[c(s("textarea",{class:"input","onUpdate:modelValue":t[4]||(t[4]=o=>e.address=o),placeholder:"\u8ACB\u8F38\u5165 Please enter"},null,512),[[p,e.address]])]),_:1},8,["is_err"])]),s("div",ie,[u(a,{class:"w-50 w-50-p",is_err:n.route,header:"\u8DEF\u7EBF Route"},{default:i(()=>[c(s("input",{class:"input","onUpdate:modelValue":t[5]||(t[5]=o=>e.route=o),placeholder:"\u8ACB\u8F38\u5165 Please enter"},null,512),[[p,e.route]])]),_:1},8,["is_err"])])],64)}}}),_e={class:"panner mb"},de={class:"fx-s"},ce=s("h4",null,"\u8CA8\u54C1\u5DF2\u5230\u8CA8\u5009\xA0\xA0The goods have arrived at the warehouse",-1),pe={class:"fx-r"},fe={class:"panner mb"},me={class:"fx-s"},he=s("h4",null,"\u8A02\u55AE\u5DF2\u5B8C\u6210\u9001\u8CA8\xA0\xA0The order has been delivered",-1),ve={class:"fx-r"},we={class:"panner mb"},Ae={class:"fx-s"},ye=s("h4",null,"\u8CA8\u54C1\u5DF2\u96E2\u958B\u8CA8\u5009\u904B\u9001\u5BA2\u4EBA\u4E2D\xA0\xA0The goods have left the warehouse",-1),Ce={class:"fx-r"},Fe={class:"panner mb"},Be={class:"fx-s"},xe=s("h4",null,"\u8CA8\u54C1\u672A\u80FD\u6210\u529F\u9001\u5230\u5BA2\u4EBA\xA0\xA0The goods were not delivered to the guests",-1),Ee={class:"fx-r"},be=b({__name:"OrderEditFinished",setup($,{expose:h}){const e=w({is_in_warehouse:!1,is_leave_warehouse:!1,is_fail_deliver:!1,is_complete_list:!1});return w({is_complete_list:!1}),h({resuit:()=>e,reset:n=>{e.is_complete_list=n.is_complete_list,e.is_in_warehouse=n.is_in_warehouse,e.is_fail_deliver=n.is_fail_deliver,e.is_leave_warehouse=n.is_leave_warehouse}}),(n,l)=>{const _=A("eos-switch-ref");return y(),C(k,null,[s("nav",_e,[s("div",de,[ce,s("div",pe,[m(" \u5426\xA0\xA0\xA0"),u(_,{form:e,pk:"is_in_warehouse"},null,8,["form"]),m("\xA0\xA0\u662F ")])])]),s("nav",fe,[s("div",me,[he,s("div",ve,[m(" \u5426\xA0\xA0\xA0"),u(_,{form:e,pk:"is_complete_list"},null,8,["form"]),m("\xA0\xA0\u662F ")])])]),s("nav",we,[s("div",Ae,[ye,s("div",Ce,[m(" \u5426\xA0\xA0\xA0"),u(_,{form:e,pk:"is_leave_warehouse"},null,8,["form"]),m("\xA0\xA0\u662F ")])])]),s("nav",Fe,[s("div",Be,[xe,s("div",Ee,[m(" \u5426\xA0\xA0\xA0"),u(_,{form:e,pk:"is_fail_deliver"},null,8,["form"]),m("\xA0\xA0\u662F ")])])])],64)}}}),$e={class:"py f-row"},ke={class:"ps-r"},ge={key:0,class:"ip-vai-succ-icon"},De=s("i",{class:"bi bi-check-lg"},null,-1),Pe=[De],Ve={class:"py f-row"},Ue={class:"ps-r"},Re={key:0,class:"ip-vai-succ-icon"},Te=s("i",{class:"bi bi-check-lg"},null,-1),Oe=[Te],Me={class:"ps-r"},Ne={key:0,class:"ip-vai-succ-icon"},je=s("i",{class:"bi bi-check-lg"},null,-1),Ke=[je],Se={class:"py pl"},We={class:"pb"},Ge={class:"pb"},Ie={class:""},Je=b({__name:"OrderEditDeiiverMan",setup($,{expose:h}){const e=w({many:[],ioading:!1,deiiv:{}}),n=w({phone_no:!1,chinese_name:!1,contractor_name:!1}),l=w({phone_no:"",chinese_name:"",contractor_name:""}),_=w({phone_no:!1,chinese_name:!1,contractor_name:!1});N(()=>l.chinese_name,(o,r)=>{r&&!o&&a.reset({phone_no:"",chinese_name:"",contractor_name:""})});const t={searchMan:async o=>new Promise(async r=>{if(!e.ioading)try{t.ciose(),e.ioading=!0,t.open(o);const d={};d[o]=l[o];const x=await j.many_of_param(d);e.many=x&&x.length>0?x:[]}catch{}setTimeout(()=>e.ioading=!1,200)}),ciose:()=>{for(let o in n)n[o]=!1},open:(o="phone_no",r=!0)=>{t.ciose(),l[o]&&(n[o]=r)},insert:o=>{if(e.deiiv=o,t.ciose(),e.deiiv)for(const r in l)l[r]=e.deiiv[r]}},a={can:()=>{let o=!0;if(l.phone_no)_.phone_no=!1;else return _.phone_no=!0,!1;if(e.deiiv.id)_.phone_no=!1;else return _.phone_no=!0,_.chinese_name=!0,_.contractor_name=!0,!1;return Object.values(_).map(r=>{r&&(o=!1)}),o},reset:o=>{const r=o.delivery_man_info;for(let d in l)l[d]=r?r[d]:"";e.deiiv=r||{},t.ciose()}};return h({resuit:()=>a.can()?{delivery_man_info:e.deiiv.id}:void 0,reset:a.reset}),(o,r)=>{const d=A("eos-input"),x=A("ef-deliver-typed"),D=A("ef-car-typed");return y(),C(k,null,[s("div",$e,[u(d,{class:"w-100",is_err:!1,header:"\u59D3\u540D(\u4E2D\u6587\u540D\u6216\u82F1\u6587\u540D\u5747\u53EF) Name (You can enter Chinese or English)"},{default:i(()=>[u(R,{aii:e,show:n.chinese_name,onResuit:t.insert,onCiose:t.ciose},{default:i(()=>[s("div",ke,[c(s("input",{class:"input","onUpdate:modelValue":r[0]||(r[0]=v=>l.chinese_name=v),onKeydown:r[1]||(r[1]=U(v=>t.searchMan("chinese_name"),["enter"])),placeholder:"\u8F38\u5165\u5B8C\u6210\u5F8C\u8ACB\u6309\u56DE\u8ECA\u9375 Press Enter when you have finished typing"},null,544),[[p,l.chinese_name]]),e.deiiv&&e.deiiv.id?(y(),C("span",ge,Pe)):g("",!0)])]),_:1},8,["aii","show","onResuit","onCiose"])]),_:1},8,["header"])]),s("div",Ve,[u(d,{class:"w-36 w-50-p",is_err:!1,header:"\u96FB\u8A71\u865F\u78BC Telephone number"},{default:i(()=>[u(R,{aii:e,show:n.phone_no,onResuit:t.insert,onCiose:t.ciose},{default:i(()=>[s("div",Ue,[c(s("input",{class:"input","onUpdate:modelValue":r[2]||(r[2]=v=>l.phone_no=v),onKeydown:r[3]||(r[3]=U(v=>t.searchMan("phone_no"),["enter"])),placeholder:"\u8ACB\u8F38\u5165 Please enter"},null,544),[[p,l.phone_no]]),e.deiiv&&e.deiiv.id?(y(),C("span",Re,Oe)):g("",!0)])]),_:1},8,["aii","show","onResuit","onCiose"])]),_:1}),u(d,{class:"w-333 w-50-p",is_err:!1,header:"\u5224\u982D\u540D\u7A31 Contractor name"},{default:i(()=>[u(R,{aii:e,show:n.contractor_name,onResuit:t.insert,onCiose:t.ciose},{default:i(()=>[s("div",Me,[c(s("input",{class:"input","onUpdate:modelValue":r[4]||(r[4]=v=>l.contractor_name=v),onKeydown:r[5]||(r[5]=U(v=>t.searchMan("contractor_name"),["enter"])),placeholder:"\u8ACB\u8F38\u5165 Please enter"},null,544),[[p,l.contractor_name]]),e.deiiv&&e.deiiv.contractor_name?(y(),C("span",Ne,Ke)):g("",!0)])]),_:1},8,["aii","show","onResuit","onCiose"])]),_:1})]),s("div",Se,[s("p",We,[m("\u9001\u8CA8\u54E1\u985E\u5225 Type of deliveryman:\xA0\xA0"),u(x,{class:"d-ib",def:e.deiiv.type,is_txt_mode:!0},null,8,["def"])]),s("p",Ge,[m("\u8ECA\u724C Licence plate:\xA0\xA0"),s("span",null,T(e.deiiv.license_plate_no),1)]),s("p",Ie,[m("\u8CA8\u8ECA\u985E\u578B Truck type:\xA0\xA0"),u(D,{class:"d-ib",def:e.deiiv.truck_type,is_txt_mode:!0},null,8,["def"])])])],64)}}}),Le=s("div",{class:"py_row"},null,-1),Qe=s("div",{class:"py_row"},null,-1),Ye={key:0},qe=s("div",{class:"py_row"},null,-1),ze=s("div",{class:"py_row"},null,-1),He={key:1},ss=b({__name:"order_edit",setup($){const h=K(),e=E(),n=E(),l=E(),_=E(),t=E(),a=S(),o=a.is_admin,r=W().order,d=async()=>{r.id||v();const f=await M.one(r.id);f.receipt_date=f.receipt_date?f.receipt_date:J.now(),console.log("\u806F\u7DB2\u4E0B\u8F09\u7684\u4E00\u500B\u8A02\u55AE =",f),setTimeout(()=>{try{e.value.reset(f),n.value.reset(f),l.value.reset(f),o&&_.value.reset(f),o&&t.value.reset(f)}catch{}},2)},x=()=>{const f=e.value.resuit(),F=n.value.resuit(),B=l.value.resuit(),P=o?_.value.resuit():{},V=o?t.value.resuit():{};return f&&F&&B?o?{...f,...F,...B,...P,...V}:{...f,...F,...B}:null},D=async function(){const f=x();console.log(f),f&&await M.edit(f,r.id)&&v()};G(async()=>{await d()});const v=()=>h.push("/admin/order_iist");return(f,F)=>{const B=A("eos-form-paner"),P=A("eos-iayout-form"),V=A("eos-iayout-screen");return y(),I(V,{is_en:!0,onBack:F[0]||(F[0]=Xe=>O(h).back())},{default:i(()=>[u(P,{is_en:!0,onSubmit:D,onBack:v},{default:i(()=>[u(B,{tit:"\u57FA\u672C\u4FE1\u606F Basic information"},{default:i(()=>[u(Z,{ref_key:"base",ref:e},null,512)]),_:1}),Le,u(B,{tit:"\u8A02\u55AE\u8A73\u60C5 Order details"},{default:i(()=>[u(oe,{ref_key:"detaii",ref:l},null,512)]),_:1}),Qe,u(B,{tit:"\u6536\u4EF6\u4EBA\u4FE1\u606F Recipient information"},{default:i(()=>[u(le,{ref_key:"reciv",ref:n},null,512)]),_:1}),O(a).is_admin?(y(),C("div",Ye,[qe,u(B,{tit:"\u9001\u8CA8\u54E1\u4FE1\u606F Deliveryman information"},{default:i(()=>[u(Je,{ref_key:"deiiver",ref:_},null,512)]),_:1}),ze,u(be,{ref_key:"finished",ref:t},null,512)])):(y(),C("div",He,[s("div",{ref_key:"deiiver",ref:_},null,512),s("div",{ref_key:"finished",ref:t},null,512)]))]),_:1})]),_:1})}}});export{ss as default};
