import{d as E,v as A,g as w,p as h,o as y,c as F,a as r,h as a,w as o,b as C,t as g,y as d,I as c,F as D,e as V,x as M,J as U,S as T,u as N,f as j,O as S,B as K,m as W,i as G,Q as O,P as I}from"./index.7e76ef48.js";const J={class:"py f-row"},L={class:"py f-row"},Q={class:"py f-row"},Y={class:"py f-row"},q=r("span",{class:"ip-unit"},"kg",-1),z={class:"py f-row"},H={class:"py f-row"},X=E({__name:"OrderEditBase",setup(b,{expose:v}){const t=A(),s=w({create_date:"",cf_waybill_no:"",waybill_no:"",order_id:"",order_group:"",receipt_date:"",product_content:"",remarks:"",weight:"",total_item_count:""}),i=w({create_date:!1,waybill_no:!1,order_id:!1,order_group:!1,product_content:!1,total_item_count:!1}),l=function(){let e=!0;if(s.total_item_count)i.total_item_count=!1;else return i.total_item_count=!0,!1;return Object.values(i).map(n=>{n&&(e=!1)}),e};return v({resuit:()=>l()?s:void 0,reset:e=>{for(let n in s)s[n]=e[n];t.value.ioc(e.receipt_date)}}),(e,n)=>{const u=h("eos-input"),_=h("fn-time");return y(),F(D,null,[r("div",J,[a(u,{class:"w-50 w-50-p",is_err:!1,header:"\u5275\u5EFA\u65E5\u671F Order date",is_txt_mode:!0},{default:o(()=>[C(g(s.create_date),1)]),_:1}),a(u,{class:"w-50 w-50-p",is_err:!1,header:"\u7FD4\u70FD\u904B\u55AE\u7DE8\u865F CF waybill number",is_txt_mode:!0},{default:o(()=>[C(g(s.cf_waybill_no),1)]),_:1})]),r("div",L,[a(u,{class:"w-50 w-50-p",is_err:i.waybill_no,header:"\u5BA2\u6236\u904B\u55AE\u7DE8\u865F Waybill number"},{default:o(()=>[d(r("input",{class:"input","onUpdate:modelValue":n[0]||(n[0]=p=>s.waybill_no=p),placeholder:"\u8ACB\u8F38\u5165 Please enter"},null,512),[[c,s.waybill_no]])]),_:1},8,["is_err"]),a(u,{class:"w-50 w-50-p",is_err:i.order_id,header:"\u8A02\u55AE\u7DE8\u865F Order No."},{default:o(()=>[d(r("input",{class:"input","onUpdate:modelValue":n[1]||(n[1]=p=>s.order_id=p),placeholder:"\u8ACB\u8F38\u5165 Please enter"},null,512),[[c,s.order_id]])]),_:1},8,["is_err","header"])]),r("div",Q,[a(u,{class:"w-50 w-50-p",is_err:i.order_group,header:"\u8A02\u55AE\u7D44 Group"},{default:o(()=>[d(r("input",{class:"input","onUpdate:modelValue":n[2]||(n[2]=p=>s.order_group=p),placeholder:"\u8ACB\u8F38\u5165 Please enter"},null,512),[[c,s.order_group]])]),_:1},8,["is_err"]),a(u,{class:"w-50 w-50-p",is_err:!1,header:"\u8A02\u55AE\u65E5\u671F Order date"},{default:o(()=>[a(_,{timed:s.receipt_date,ref_key:"dateRef",ref:t,onResuit:n[3]||(n[3]=p=>s.receipt_date=p)},null,8,["timed"])]),_:1})]),r("div",Y,[a(u,{class:"w-50 w-50-p",is_err:i.total_item_count,header:"\u4EF6\u6578 Package"},{default:o(()=>[d(r("input",{class:"input",type:"number","onUpdate:modelValue":n[4]||(n[4]=p=>s.total_item_count=p),placeholder:"\u8ACB\u8F38\u5165 Please enter"},null,512),[[c,s.total_item_count]])]),_:1},8,["is_err"]),a(u,{class:"w-50 w-50-p ip-weight",is_err:!1,header:"\u91CD\u91CF Weight"},{default:o(()=>[d(r("input",{class:"input",type:"number","onUpdate:modelValue":n[5]||(n[5]=p=>s.weight=p),placeholder:"\u8ACB\u8F38\u5165 Please enter"},null,512),[[c,s.weight]]),q]),_:1})]),r("div",z,[a(u,{class:"w-100 w-100-p",is_err:i.product_content,header:"\u8CA8\u54C1\u5167\u5BB9 Product detail"},{default:o(()=>[d(r("input",{class:"input","onUpdate:modelValue":n[6]||(n[6]=p=>s.product_content=p),placeholder:"\u8ACB\u8F38\u5165 Please enter"},null,512),[[c,s.product_content]])]),_:1},8,["is_err"])]),r("div",H,[a(u,{class:"w-100",is_err:!1,header:"\u5099\u8A3B Remark"},{default:o(()=>[d(r("input",{class:"input","onUpdate:modelValue":n[7]||(n[7]=p=>s.remarks=p),placeholder:"\u8ACB\u8F38\u5165 Please enter"},null,512),[[c,s.remarks]])]),_:1})])],64)}}}),Z={class:"py f-row"},ee={class:"py f-row"},se={class:"py f-row"},te={class:"py f-row"},re=E({__name:"OrderEditDetaii",setup(b,{expose:v}){const t=w({car_park:0,tunnel_fee:0,misc_fee:0,floor_count:0,collection_payment:0,delivery_date:"",delivery_charge:0}),s=w({car_park:!1,tunnel_fee:!1,misc_fee:!1,floor_count:!1,collection_payment:!1,delivery_charge:!1}),i=function(){let l=!0;return Object.values(s).map(e=>{e&&(l=!1)}),l};return v({resuit:()=>i()?t:void 0,reset:l=>{for(let e in t)t[e]=l[e]}}),(l,e)=>{const n=h("fn-time"),u=h("eos-input");return y(),F(D,null,[r("div",Z,[a(u,{class:"w-50 w-50-p",is_err:!1,header:"\u9001\u8CA8\u65E5\u671F Delivery date"},{default:o(()=>[a(n,{timed:t.delivery_date,ref:"dateRef",onResuit:e[0]||(e[0]=_=>t.delivery_date=_)},null,8,["timed"])]),_:1}),V("",!0)]),r("div",ee,[a(u,{class:"w-50 w-50-p",is_err:s.car_park,header:"\u505C\u8ECA\u5834 Parking"},{default:o(()=>[d(r("input",{class:"input",type:"number","onUpdate:modelValue":e[2]||(e[2]=_=>t.car_park=_),placeholder:"\u8ACB\u8F38\u5165 Please enter"},null,512),[[c,t.car_park]])]),_:1},8,["is_err"]),a(u,{class:"w-50 w-50-p",is_err:s.tunnel_fee,header:"\u96A7\u9053\u8CBB Tunnel fee"},{default:o(()=>[d(r("input",{class:"input",type:"number","onUpdate:modelValue":e[3]||(e[3]=_=>t.tunnel_fee=_),placeholder:"\u8ACB\u8F38\u5165 Please enter"},null,512),[[c,t.tunnel_fee]])]),_:1},8,["is_err"])]),r("div",se,[a(u,{class:"w-50 w-50-p",is_err:s.misc_fee,header:"\u96DC\u8CBB Other charges"},{default:o(()=>[d(r("input",{class:"input",type:"number","onUpdate:modelValue":e[4]||(e[4]=_=>t.misc_fee=_),placeholder:"\u8ACB\u8F38\u5165 Please enter"},null,512),[[c,t.misc_fee]])]),_:1},8,["is_err"]),a(u,{class:"w-50 w-50-p",is_err:s.floor_count,header:"\u6A13\u68AF\u5C64\u6578 Stairs floor"},{default:o(()=>[d(r("input",{class:"input",type:"number","onUpdate:modelValue":e[5]||(e[5]=_=>t.floor_count=_),placeholder:"\u8ACB\u8F38\u5165 Please enter"},null,512),[[c,t.floor_count]])]),_:1},8,["is_err"])]),r("div",te,[a(u,{class:"w-50 w-50-p",is_err:s.delivery_charge,header:"\u904B\u8CBB Delivery charges"},{default:o(()=>[d(r("input",{class:"input",type:"number","onUpdate:modelValue":e[6]||(e[6]=_=>t.delivery_charge=_),placeholder:"\u8ACB\u8F38\u5165 Please enter"},null,512),[[c,t.delivery_charge]])]),_:1},8,["is_err"]),a(u,{class:"w-50 w-50-p",is_err:s.collection_payment,header:"\u4EE3\u6536\u8D27\u6B3E Collection Payment"},{default:o(()=>[d(r("input",{class:"input",type:"number","onUpdate:modelValue":e[7]||(e[7]=_=>t.collection_payment=_),placeholder:"\u8ACB\u8F38\u5165 Please enter"},null,512),[[c,t.collection_payment]])]),_:1},8,["is_err"])])],64)}}}),ne={class:"py f-row"},ue={class:"py f-row"},ae={class:"py f-row"},le={class:"py f-row"},oe=E({__name:"OrderEditReciver",setup(b,{expose:v}){const t=w({customer_name:"",customer_phone_no:"",district:"",area:"",address:"",route:""}),s=w({customer_name:!1,customer_phone_no:!1,district:!1,area:!1,address:!1,route:!1}),i=function(){let l=!0;if(t.customer_name)s.customer_name=!1;else return s.customer_name=!0,!1;if(t.address)s.address=!1;else return s.address=!0,!1;return Object.values(s).map(e=>{e&&(l=!1)}),l};return v({resuit:()=>i()?t:void 0,reset:l=>{for(let e in t)t[e]=l[e]}}),(l,e)=>{const n=h("eos-input");return y(),F(D,null,[r("div",ne,[a(n,{class:"w-50 w-50-p",is_err:s.customer_name,header:"\u6536\u4EF6\u4EBA\u540D\u79F0 Recipient name"},{default:o(()=>[d(r("input",{class:"input","onUpdate:modelValue":e[0]||(e[0]=u=>t.customer_name=u),placeholder:"\u8ACB\u8F38\u5165 Please enter"},null,512),[[c,t.customer_name]])]),_:1},8,["is_err"]),a(n,{class:"w-50 w-50-p",is_err:s.customer_phone_no,header:"\u6536\u4EF6\u4EBA\u96FB\u8A71\u865F\u78BC Tel."},{default:o(()=>[d(r("input",{class:"input","onUpdate:modelValue":e[1]||(e[1]=u=>t.customer_phone_no=u),placeholder:"\u8ACB\u8F38\u5165 Please enter"},null,512),[[c,t.customer_phone_no]])]),_:1},8,["is_err","header"])]),r("div",ue,[a(n,{class:"w-50 w-50-p",is_err:s.district,header:"\u5730\u5340 District"},{default:o(()=>[d(r("input",{class:"input","onUpdate:modelValue":e[2]||(e[2]=u=>t.district=u),placeholder:"\u8ACB\u8F38\u5165 Please enter"},null,512),[[c,t.district]])]),_:1},8,["is_err"]),a(n,{class:"w-50 w-50-p",is_err:s.area,header:"\u5340\u57DF Area"},{default:o(()=>[d(r("input",{class:"input","onUpdate:modelValue":e[3]||(e[3]=u=>t.area=u),placeholder:"\u8ACB\u8F38\u5165 Please enter"},null,512),[[c,t.area]])]),_:1},8,["is_err"])]),r("div",ae,[a(n,{class:"w-100 w-100-p",is_err:s.address,header:"\u5730\u5740\u8A73\u60C5 Address"},{default:o(()=>[d(r("textarea",{class:"input","onUpdate:modelValue":e[4]||(e[4]=u=>t.address=u),placeholder:"\u8ACB\u8F38\u5165 Please enter"},null,512),[[c,t.address]])]),_:1},8,["is_err"])]),r("div",le,[a(n,{class:"w-50 w-50-p",is_err:s.route,header:"\u8DEF\u7EBF Route"},{default:o(()=>[d(r("input",{class:"input","onUpdate:modelValue":e[5]||(e[5]=u=>t.route=u),placeholder:"\u8ACB\u8F38\u5165 Please enter"},null,512),[[c,t.route]])]),_:1},8,["is_err"])])],64)}}}),ie={class:"py fx-s"},_e=r("h4",null,"\u8A02\u55AE\u5DF2\u5B8C\u6210\u9001\u8CA8\xA0\xA0The order has been delivered",-1),de={class:"fx-r"},ce=E({__name:"OrderEditFinished",setup(b,{expose:v}){const t=A(),s=w({is_complete_list:!1});return w({is_complete_list:!1}),v({resuit:()=>s,reset:i=>{s.is_complete_list=i.is_complete_list,t.value.ioc(i.is_complete_list)}}),(i,l)=>{const e=h("eos-switch");return y(),F("div",ie,[_e,r("div",de,[C(" \u5426\xA0\xA0\xA0"),a(e,{ref_key:"dateRef",ref:t,onResuit:l[0]||(l[0]=n=>s.is_complete_list=n)},null,512),C("\xA0\xA0\u662F ")])])}}}),pe={class:"py f-row"},fe={class:"ps-r"},me={key:0,class:"ip-vai-succ-icon"},he=r("i",{class:"bi bi-check-lg"},null,-1),ve=[he],ye={class:"py f-row"},we={class:"ps-r"},Ae={key:0,class:"ip-vai-succ-icon"},Fe=r("i",{class:"bi bi-check-lg"},null,-1),Be=[Fe],Ce={class:"py pl"},Ee={class:"pb"},be={class:"pb"},ke={class:"pb"},xe={class:""},ge=E({__name:"OrderEditDeiiverMan",setup(b,{expose:v}){A();const t=A({}),s=w({phone_no:"",chinese_name:"",english_name:""}),i=w({phone_no:!1,chinese_name:!1,english_name:!1});M(()=>s.chinese_name,(e,n)=>{n&&!e&&l.reset({phone_no:"",chinese_name:"",english_name:""})});const l={can:()=>{let e=!0;if(s.phone_no)i.phone_no=!1;else return i.phone_no=!0,!1;if(t.value.id)i.phone_no=!1;else return i.phone_no=!0,i.chinese_name=!0,i.english_name=!0,!1;return Object.values(i).map(n=>{n&&(e=!1)}),e},searchMan:async()=>{if(s.phone_no||s.chinese_name||s.english_name){const e=await T.many_of_param(s);t.value=e&&e.length>0?e[0]:{},l.insert()}},insert:()=>{if(t.value)for(const e in s)s[e]=t.value[e]},reset:e=>{const n=e.delivery_man_info;for(let u in s)s[u]=n?n[u]:"";t.value=n||{}}};return v({resuit:()=>l.can()?{delivery_man_info:t.value.id}:void 0,reset:l.reset}),(e,n)=>{const u=h("eos-input"),_=h("ef-deliver-typed"),p=h("ef-car-typed");return y(),F(D,null,[r("div",pe,[a(u,{class:"w-100",is_err:!1,header:"\u59D3\u540D(\u4E2D\u6587\u540D\u6216\u82F1\u6587\u540D\u5747\u53EF) Name (You can enter Chinese or English)"},{default:o(()=>[r("div",fe,[d(r("input",{class:"input","onUpdate:modelValue":n[0]||(n[0]=m=>s.chinese_name=m),onBlur:n[1]||(n[1]=(...m)=>l.searchMan&&l.searchMan(...m)),onKeydown:n[2]||(n[2]=U((...m)=>l.searchMan&&l.searchMan(...m),["enter"])),placeholder:"\u8F38\u5165\u59D3\u540D\u9032\u884C\u641C\u7D22 Please enter the name of deliveryman"},null,544),[[c,s.chinese_name]]),t.value&&t.value.id?(y(),F("span",me,ve)):V("",!0)])]),_:1},8,["header"])]),r("div",ye,[a(u,{class:"w-50",is_err:!1,header:"\u96FB\u8A71\u865F\u78BC Telephone number"},{default:o(()=>[r("div",we,[d(r("input",{class:"input","onUpdate:modelValue":n[3]||(n[3]=m=>s.phone_no=m),onBlur:n[4]||(n[4]=(...m)=>l.searchMan&&l.searchMan(...m)),onKeydown:n[5]||(n[5]=U((...m)=>l.searchMan&&l.searchMan(...m),["enter"])),placeholder:"\u8ACB\u8F38\u5165 Please enter"},null,544),[[c,s.phone_no]]),t.value&&t.value.id?(y(),F("span",Ae,Be)):V("",!0)])]),_:1})]),r("div",Ce,[r("p",Ee,[C("\u9001\u8CA8\u54E1\u985E\u5225 Type of deliveryman:\xA0\xA0"),a(_,{class:"d-ib",def:t.value.type,is_txt_mode:!0},null,8,["def"])]),r("p",be,[C("\u5224\u982D\u540D\u7A31 Company name:\xA0\xA0"),r("span",null,g(t.value.contractor_name),1)]),r("p",ke,[C("\u8ECA\u724C Licence plate:\xA0\xA0"),r("span",null,g(t.value.license_plate_no),1)]),r("p",xe,[C("\u8CA8\u8ECA\u985E\u578B Truck type:\xA0\xA0"),a(p,{class:"d-ib",def:t.value.truck_type,is_txt_mode:!0},null,8,["def"])])])],64)}}}),De=r("div",{class:"py_row"},null,-1),$e=r("div",{class:"py_row"},null,-1),Pe={key:0},Ve=r("div",{class:"py_row"},null,-1),Ue=r("div",{class:"py_row"},null,-1),Oe={class:"panner"},Re={key:1},Te=E({__name:"order_edit",setup(b){const v=N(),t=A(),s=A(),i=A(),l=A(),e=A(),n=j(),u=n.is_admin,_=S().order,p=async()=>{_.id||x();const f=await O.one(_.id);f.receipt_date=f.receipt_date?f.receipt_date:I.now(),t.value.reset(f),s.value.reset(f),i.value.reset(f),u&&l.value.reset(f),u&&e.value.reset(f)},m=()=>{const f=t.value.resuit(),k=s.value.resuit(),B=i.value.resuit(),$=u?l.value.resuit():{},P=u?e.value.resuit():{};return f&&k&&B?u?{...f,...k,...B,...$,...P}:{...f,...k,...B}:null},R=async function(){const f=m();f&&await O.edit(f,_.id)&&x()};K(async()=>{await p()});const x=()=>v.push("/admin/order_iist");return(f,k)=>{const B=h("eos-form-paner"),$=h("eos-iayout-form"),P=h("eos-iayout-screen");return y(),W(P,{is_en:!0,onBack:x},{default:o(()=>[a($,{is_en:!0,onSubmit:R,onBack:x},{default:o(()=>[a(B,{tit:"\u57FA\u672C\u4FE1\u606F Basic information"},{default:o(()=>[a(X,{ref_key:"base",ref:t},null,512)]),_:1}),De,a(B,{tit:"\u8A02\u55AE\u8A73\u60C5 Order details"},{default:o(()=>[a(re,{ref_key:"detaii",ref:i},null,512)]),_:1}),$e,a(B,{tit:"\u6536\u4EF6\u4EBA\u4FE1\u606F Recipient information"},{default:o(()=>[a(oe,{ref_key:"reciv",ref:s},null,512)]),_:1}),G(n).is_admin?(y(),F("div",Pe,[Ve,a(B,{tit:"\u9001\u8CA8\u54E1\u4FE1\u606F Deliveryman information"},{default:o(()=>[a(ge,{ref_key:"deiiver",ref:l},null,512)]),_:1}),Ue,r("nav",Oe,[a(ce,{ref_key:"finished",ref:e},null,512)])])):(y(),F("div",Re,[r("div",{ref_key:"deiiver",ref:l},null,512),r("div",{ref_key:"finished",ref:e},null,512)]))]),_:1})]),_:1})}}});export{Te as default};
