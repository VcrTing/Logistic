import{d as C,p as $,o as l,c as h,h as m,w as y,a as e,m as A,e as w,b as x,F as R,r as K,n as O,t as f,u as L,k as g,Q as M,v as I,i as p,R as N,f as B,g as F,S as Y,P as T,j as Z,y as P,J as V,I as S,z,O as G,M as ee,N as se,_ as ie,x as te,T as ne,l as H}from"./index.ef9ec5e0.js";import{_ as oe,a as U}from"./EosDeiiverymanSwitchDrop.vue_vue_type_script_setup_true_lang.512ec34b.js";import{_ as ae}from"./EosCompanySwitchDrop.vue_vue_type_script_setup_true_lang.6d9ecb8f.js";import{_ as ue}from"./JsBarcode.vue_vue_type_script_setup_true_lang.9615f181.js";import{L as ce}from"./ICON_CF_S.c52d5a84.js";import{_ as _e}from"./OrderIistFixedPanner.vue_vue_type_script_setup_true_lang.16fb251e.js";const J=(u=[])=>{const d=[];return console.log("CHOOSE =",u),u.map(s=>{s.kiiied||s.id&&d.push(s)}),d},j=(u,d,s)=>{const o=d.length,t=u.length;for(let r=0;r<t;r++){const n=u[r];for(let c=0;c<o;c++){const i=d[c];s(n,i)}}},D={buiid_finai_choose:J,buiid_mui_choose:(u,d="cf_waybill_no")=>{const s=[];return u=u?J(u):[],u.map(o=>{const t=o[d];t&&s.push(t)}),s},feak_kiied:(u,d,s,o="id")=>j(u,d,(t,r)=>{t[o]==r[o]&&(t.kiiied=s,r.kiiied=s)}),feak_cancei:(u,d,s,o="id")=>j(u,d,(t,r)=>{t[o]==r[o]&&(t.is_cancel=s,r.is_cancel=s)}),feak_change_status:(u,d,s,o)=>j(u,d,(t,r)=>{t.cf_waybill_no==r.cf_waybill_no&&(t[s]=o,r[s]=o)})},de={class:"tr"},re=e("div",{class:"w-9"},[x(" \u5275\u5EFA\u65E5\u671F"),e("br"),e("p",{class:"tr-en"},"Create date")],-1),le=e("div",{class:"w-13"},[x(" \u7FD4\u70FD\u904B\u55AE\u865F\u78BC"),e("br"),e("p",{class:"tr-en"},"CF waybill number")],-1),pe=e("div",{class:"w-13"},[x(" \u5BA2\u6236\u904B\u55AE\u7DE8\u865F"),e("br"),e("p",{class:"tr-en"},"Waybill number")],-1),he=e("div",{class:"w-10"},[x(" \u8A02\u55AE\u7D44"),e("br"),e("p",{class:"tr-en"},"Group")],-1),me=e("div",{class:"w-12 w-11-p"},[x(" \u8A02\u55AE\u7DE8\u865F"),e("br"),e("p",{class:"tr-en"},"Order No.")],-1),fe=e("div",{class:"w-10"},[x(" \u8A02\u55AE\u5B8C\u6210\u65E5\u671F"),e("br"),e("p",{class:"tr-en"},"Complete date")],-1),ve=e("div",{class:"w-8"},[x(" \u8A02\u55AE\u65E5\u671F"),e("br"),e("p",{class:"tr-en"},"Order date")],-1),ye=e("div",{class:"w-8"},[x(" \u6536\u4EF6\u4EBA"),e("br"),e("p",{class:"tr-en"},"Recipient")],-1),$e=e("div",{class:"w-7 w-8-p"},[x(" \u6536\u4EF6\u96FB\u8A71"),e("br"),e("p",{class:"tr-en"},"Phone")],-1),be=e("div",{class:"w-3"},null,-1),we={class:"w-7 fx-r"},cn=C({__name:"OrderIistTr",props:{aii:null},setup(u){return(d,s)=>{const o=$("eos-go-button"),t=$("eos-tabie-choose-item-tr");return l(),h("nav",de,[m(t,{aii:u.aii},{default:y(()=>[re,le,pe,he,me,fe,ve,ye,$e,be,e("div",we,[u.aii.many.length>30?(l(),A(o,{key:0})):w("",!0)])]),_:1},8,["aii"])])}}}),xe={class:"eos-tabie-opera fx-r fx-wp"},Ae=["onClick"],Ce={key:0,class:"hand"},ge={key:1,class:"hand hv-big"},ke=C({__name:"EosTabieOperaOrder",props:{vais:null,is_icon:{type:Boolean}},emits:["view","edit","trash","save","print","cancei"],setup(u,{emit:d}){const s=[{txt:"\u8A73\u60C5",code:"view",caii:()=>d("view"),icon:"bi bi-eye",ciass:"pri_son"},{txt:"\u522A\u9664",code:"trash",caii:()=>d("trash"),icon:"bi bi-trash",ciass:"err_trash_son"},{txt:"\u53D6\u6D88",code:"cancei",caii:()=>d("cancei"),icon:"bi bi-x-circle",ciass:"pri_son"},{txt:"\u7DE8\u8F2F",code:"edit",caii:()=>d("edit"),icon:"bi bi-pencil-square",ciass:"pri_son"},{txt:"\u5132\u5B58",code:"save",caii:()=>d("save"),icon:"bi bi-save",ciass:"pri_son"},{txt:"\u6253\u5370",code:"print",caii:()=>d("print"),icon:"bi bi-printer-fill",ciass:"pri_son"}];return(o,t)=>(l(),h("div",xe,[(l(),h(R,null,K(s,(r,n)=>e("span",{key:n},[u.vais&&u.vais.indexOf(r.code)>=0?(l(),h("span",{key:0,class:O(["px_s",r.ciass]),onClick:c=>r.caii()},[u.is_icon?(l(),h("span",ge,[e("i",{class:O(["d-ib",r.icon])},null,2)])):(l(),h("span",Ce,f(r.txt),1))],10,Ae)):w("",!0)])),64))]))}}),Ee={class:"w-9"},Fe={class:"w-13 pr_s"},De={class:"w-13 pr_s"},Be={class:"w-10 pr"},Te={class:"w-12 w-11-p px_s fx-l ps-r"},Pe=e("span",{class:"hv-big"},[e("i",{class:"bi bi-person-circle"})],-1),Oe=[Pe],Re={class:"w-10 pr"},Se={class:"w-8 pr_s"},Me={class:"w-8"},Ie={class:"w-7 w-8-p pr_s"},Ve={class:"w-3 fx-c"},Le={key:0,class:"bi bi-lightbulb-fill buib"},Ne={key:1,class:"bi bi-lightbulb"},Ue={class:"w-7 fx-r"},_n=C({__name:"OrderIistTd",props:{idx:null,one:null,aii:null,sure:{type:Boolean}},setup(u){const d=u,s=L(),o=g(),t=M(),r=I("print"),n={init:()=>new Promise(c=>{r.value=B().is_admin?B().is_manager?"cancei_edit_print":"trash_cancei_edit_print":"cancei_edit_print",c(0)}),print:()=>new Promise(c=>{const i=d.one;t.do_order(i),t.do_orders_print([i]),t.read(i.id,i.is_new),i.is_new=!1,o.do_mod(1),c(0)}),open:c=>new Promise(i=>{d.aii.who.length=0,d.aii.who.push(d.one),o.do_mod(c),i(0)}),edit:()=>{if(t.do_order(d.one),d.sure)confirm("\u662F\u5426\u8DF3\u8F49\u5230\u8A02\u55AE\u7DE8\u8F2F\u9801\u9762\uFF1FAre you sure?")&&s.push("/admin/order_iist/edit");else{s.push("/admin/order_iist/edit");return}},trash:()=>n.open(-205),cancei:()=>n.open(-206)};return n.init(),(c,i)=>{const a=$("eos-tabie-choose-item-td");return l(),h("div",{class:O(["td",{"td-kiiied":u.one.kiiied,"td-focus-err":u.one.is_new,"td-succ":u.one.is_complete_list,"td-die":u.one.is_cancel}])},[m(a,{one:u.one,aii:u.aii},{default:y(()=>[e("div",Ee,f(p(N).view_time(u.one.create_date,"/")),1),e("div",Fe,f(u.one.cf_waybill_no),1),e("div",De,f(u.one.waybill_no),1),e("div",Be,f(u.one.order_group),1),e("div",Te,[e("span",{class:O(["order-td-deiivery-icon",{"order-td-deiivery-icon-iive":u.one.delivery_man_info&&u.one.delivery_man_info.id}]),onClick:i[0]||(i[0]=()=>{p(t).do_order(u.one),p(s).push("/admin/order_iist/edit")})},Oe,2),e("span",{class:"pri hand",onClick:i[1]||(i[1]=()=>{p(t).do_order(u.one),p(o).do_panner(1),p(t).read(u.one.id,u.one.is_new),u.one.is_new=!1})},f(u.one.order_id),1)]),e("div",Re,f(p(N).view_time(u.one.is_complete_list_date,"/")),1),e("div",Se,f(p(N).view_time(u.one.receipt_date,"/")),1),e("div",Me,f(u.one.customer_name),1),e("div",Ie,f(u.one.customer_phone_no),1),e("div",Ve,[u.one.is_complete_list?(l(),h("i",Le)):(l(),h("i",Ne))]),e("div",Ue,[m(ke,{is_icon:!0,vais:r.value,onEdit:i[2]||(i[2]=_=>n.edit()),onTrash:i[3]||(i[3]=_=>n.trash()),onCancei:i[4]||(i[4]=_=>n.cancei()),onPrint:i[5]||(i[5]=_=>n.print())},null,8,["vais"])])]),_:1},8,["one","aii"])],2)}}}),je={class:"d-ib"},Ke={class:"eos-order-status-switch-drop"},Ye=e("i",{class:"bi bi-stack"},null,-1),We={class:"pt_s"},qe=["onClick"],ze={class:"px"},Ge=e("p",{class:"px sub pt"},"Please select a value after the order status has changed.",-1),He={class:"fx-c pt_x2"},Je=e("div",{class:"txt-pri"},"\u66F4\u65B0\u6642\u9593:\xA0\xA0",-1),Qe={class:"mw-8em"},Xe={class:"fx-c pt_x2 btn-twin-wrapper"},Ze=e("span",null,"\xA0",-1),es=C({__name:"EosOrderStatusSwitchDrop",emits:["resuit"],setup(u,{emit:d}){const s=F({change_date:"",ioading:!1}),o=n=>{d("resuit",r.v,n,s.change_date)},t={v_to_name:(n="")=>{const c=r.v;return r.ops.map(i=>{i.v==c&&(n=i.name)}),n}},r=F({now:-1,open:!0,ioading:!0,v:"",ops:[{name:"\u8CA8\u54C1\u5DF2\u5230\u8CA8\u5009 The goods have arrived at the warehouse",id:0,func:n=>{r.v=n,g().do_mod(-1001)},v:"is_in_warehouse"},{name:"\u8CA8\u54C1\u5DF2\u96E2\u958B\u8CA8\u5009\u904B\u9001\u5BA2\u4EBA\u4E2D The goods have left the warehouse",id:1,func:n=>{r.v=n,g().do_mod(-1001)},v:"is_leave_warehouse"},{name:"\u8A02\u55AE\u5DF2\u5B8C\u6210\u9001\u8CA8 The order has been delivered",id:2,func:n=>{r.v=n,g().do_mod(-1001)},v:"is_complete_list"},{name:"\u8CA8\u54C1\u672A\u80FD\u6210\u529F\u9001\u5230\u5BA2\u4EBA The goods were not delivered to the customer",id:3,func:n=>{r.v=n,g().do_mod(-1001)},v:"is_fail_deliver"}]});return(n,c)=>{const i=$("my-button"),a=$("fn-drop-down"),_=$("eos-mod-sure-two");return l(),h("div",je,[e("div",Ke,[m(a,null,{tit:y(()=>[m(i,{typed:"pri-out"},{default:y(()=>[Ye,x(" \u6279\u91CF\u4FEE\u6539\u72C0\u614B Batch change status ")]),_:1})]),cont:y(()=>[e("nav",We,[(l(!0),h(R,null,K(r.ops,(v,b)=>(l(),h("button",{class:"fx-l",key:b,onClick:E=>v.func?v.func(v.v):void 0},f(v.name),9,qe))),128))])]),_:1})]),m(_,{idx:-1001},{default:y(()=>[e("h4",ze,f(t.v_to_name())+"?",1),Ge,e("div",He,[Je,e("div",Qe,[m(oe,{class:"ip-time-singie ip-time-pri",form:s,pk:"change_date"},null,8,["form"])])]),e("div",Xe,[e("button",{class:"btn-pri px_x2 py_s",onClick:c[0]||(c[0]=v=>o(!0))}," \u662F\u7684\xA0Yes "),Ze,e("button",{class:"btn-err px_x2 py_s",onClick:c[1]||(c[1]=v=>o(!1))}," \u4E0D\u662F\xA0No ")])]),_:1})])}}}),ss=e("i",{class:"bi bi-filetype-pdf"},null,-1),is=e("span",null,"\xA0\u5217\u5370 Print",-1),ts=C({__name:"EosPdfButton",setup(u){return(d,s)=>{const o=$("my-button");return l(),A(o,{typed:"pri-tin"},{default:y(()=>[ss,is]),_:1})}}}),ns=e("i",{class:"bi bi-trash"},null,-1),os=e("span",null," \u6279\u91CF\u522A\u9664\u9078\u64C7\u8A02\u55AE Delete order selection in bulk ",-1),as=e("i",{class:"bi bi-x-circle"},null,-1),us=e("span",null," \u6279\u91CF\u53D6\u6D88\u9078\u64C7\u8A02\u55AE Cancel order selection in bulk ",-1),Q=C({__name:"EosMuiTrashButton",props:{is_cancei:{type:Boolean}},emits:["trash","cancei"],setup(u){return(d,s)=>{const o=$("my-button");return u.is_cancei?(l(),A(o,{key:1,typed:"pri-out",onClick:s[1]||(s[1]=t=>d.$emit("cancei"))},{default:y(()=>[as,us]),_:1})):(l(),A(o,{key:0,typed:"pri-out",onClick:s[0]||(s[0]=t=>d.$emit("trash"))},{default:y(()=>[ns,os]),_:1}))}}}),cs={class:"fx-s fx-b"},_s={class:"fx-1"},ds=e("span",{class:"px_s"},null,-1),rs=e("i",{class:"bi bi-person-plus"},null,-1),ls=e("i",{class:"bi bi-plus-lg"},null,-1),ps=e("span",{class:"px_s"},null,-1),hs={key:0,class:"pt"},ms=e("span",{class:"px_s"},null,-1),fs=e("span",{class:"px_s"},null,-1),vs=e("i",{class:"bi bi-file-earmark-spreadsheet"},null,-1),ys=e("div",{class:"py_t"},null,-1),$s=C({__name:"OrderIistBar",props:{aii:null},emits:["refresh"],setup(u,{emit:d}){const s=u,o=g(),t=B(),r=L(),n=t.is_admin,c=F({uuid:()=>{const i=n?Y().company:B().company;return i?i.uuid:null},p_aii:()=>new Promise(i=>{if(c._has_choose()){M().do_orders_print(D.buiid_finai_choose(s.aii.choose));const a=r.resolve({path:"/admin/order_iist/print_muiti"});setTimeout(()=>window.open(a.href,"_blank"),400)}i(0)}),export_excei:async()=>new Promise(i=>{const a=D.buiid_mui_choose(s.aii.choose),_=c.uuid();_&&a.length>0&&T.excei(a,_+""),i(0)}),_has_choose:()=>{const i=D.buiid_finai_choose(s.aii.choose);return i&&i.length>0},mui_trash:()=>{c._has_choose()&&o.do_mod(-201)},mui_cancei:()=>{c._has_choose()&&o.do_mod(-202)},mui_deiivery_pius:()=>{c._has_choose()&&o.do_mod(102)},mui_order_status:(i,a,_)=>new Promise(async v=>{const b=D.buiid_mui_choose(s.aii.choose);Z.TEST&&console.log(b,a,i+"_date = "+_),b.length>0&&(await T.status_mui(b,a,i,_),g().do_mod(0),d("refresh"),D.feak_change_status(s.aii.many,D.buiid_finai_choose(s.aii.choose),i,a)),v(0)})});return(i,a)=>{const _=$("my-button");return l(),h(R,null,[e("div",cs,[e("div",_s,[e("div",null,[m(ts,{onClick:a[0]||(a[0]=v=>p(c).p_aii())}),ds,p(n)?(l(),A(_,{key:0,typed:"pri-out",onClick:a[1]||(a[1]=v=>p(c).mui_deiivery_pius())},{default:y(()=>[rs,x(" \xA0\u6279\u91CF\u6DFB\u52A0\u9001\u8CA8\u54E1 Upload Deliveryman in bulk ")]),_:1})):(l(),A(_,{key:1,typed:"pri-out",onClick:a[2]||(a[2]=v=>p(r).push("/admin/custom_order_iist/upioad_order_in_buik"))},{default:y(()=>[ls,x(" \u6279\u91CF\u4E0A\u50B3\u8A02\u55AE Upload orders in bulk ")]),_:1})),ps,m(es,{onResuit:p(c).mui_order_status},null,8,["onResuit"])]),p(n)?(l(),h("div",hs,[p(t).is_manager?w("",!0):(l(),A(Q,{key:0,onTrash:p(c).mui_trash,onCancei:a[3]||(a[3]=()=>{})},null,8,["onTrash"])),ms,m(Q,{is_cancei:!0,onCancei:p(c).mui_cancei,onTrash:a[4]||(a[4]=()=>{})},null,8,["onCancei"]),fs])):w("",!0)]),e("div",null,[m(_,{onClick:a[5]||(a[5]=v=>p(c).export_excei())},{default:y(()=>[vs,x(" \xA0\u5C0E\u51FA Excel Export Excel ")]),_:1})])]),ys],64)}}}),bs={class:"fiiter-bar fx-t"},ws={class:"fx-1"},xs={class:"fiiter-inner fiiter-inner-many"},As=e("option",{value:""},"\u65E5\u671F\u985E\u578B Date type",-1),Cs=e("option",{value:"creation"},"\u5275\u5EFA\u65E5\u671F Create date",-1),gs=e("option",{value:"receive"},"\u8A02\u55AE\u65E5\u671F Order date",-1),ks=e("option",{value:"delivery"},"\u6D3E\u9001\u65E5\u671F Delivery date",-1),Es=e("option",{value:"warehouse"},"\u8CA8\u54C1\u5DF2\u5230\u8CA8\u5009 Arrived in the warehouse",-1),Fs=e("option",{value:"complete"},"\u8A02\u55AE\u5DF2\u5B8C\u6210\u9001\u8CA8 The order has been delivered",-1),Ds=[As,Cs,gs,ks,Es,Fs],Bs=e("option",{value:""},"\u5168\u90E8\u72C0\u614B All order status",-1),Ts=e("option",{value:"is_in_warehouse"}," \u8CA8\u54C1\u5DF2\u5230\u5009\u5EAB The goods have arrived at the warehouse ",-1),Ps=e("option",{value:"is_leave_warehouse"}," \u8CA8\u54C1\u5DF2\u96E2\u958B\u8CA8\u5009\u904B\u9001\u5BA2\u4EBA\u4E2D The goods have left the warehouse ",-1),Os=e("option",{value:"is_complete_list"}," \u8A02\u55AE\u5DF2\u5B8C\u6210\u9001\u8CA8 The Order has been delivered ",-1),Rs=e("option",{value:"is_fail_deliver"}," \u8CA8\u54C1\u672A\u80FD\u6210\u529F\u9001\u5230\u5BA2\u4EBA The goods were not delivered to the customer ",-1),Ss=[Bs,Ts,Ps,Os,Rs],Ms=e("div",{class:"pt_s"},null,-1),Is=C({__name:"OrderIistTop",emits:["search"],setup(u,{emit:d}){L(),I();const s=B(),o=()=>d("search",t);let t=F({wb_order_no:"",startDate:"",endDate:"",statusType:"",dateType:"",deliveryman:"",orderStatus:""});return(r,n)=>{const c=$("eos-input-fiiter"),i=$("fn-time-doubie"),a=$("eos-search-button");return l(),h("div",null,[e("div",bs,[e("nav",ws,[e("div",xs,[m(c,{class:"w-31",header:"\u4EFB\u610F\u904B\u55AE\u7DE8\u865F:"},{default:y(()=>[P(e("input",{class:"input","onUpdate:modelValue":n[0]||(n[0]=_=>p(t).wb_order_no=_),onKeydown:n[1]||(n[1]=V(_=>o(),["enter"])),placeholder:"Enter the any waybill number"},null,544),[[S,p(t).wb_order_no]])]),_:1}),m(c,{class:"w-18",header:""},{default:y(()=>[P(e("select",{class:O(["input px-0",{"ui-ip-fiiter-empty":!p(t).dateType}]),"onUpdate:modelValue":n[2]||(n[2]=_=>p(t).dateType=_)},Ds,2),[[z,p(t).dateType]])]),_:1}),m(c,{class:"w-34",header:"\u65E5\u671F\u5340\u9593:"},{default:y(()=>[m(i,{onReset:n[3]||(n[3]=()=>{p(t).startDate="",p(t).endDate="",o()}),onResuit_1:n[4]||(n[4]=_=>p(t).startDate=_),onResuit_2:n[5]||(n[5]=_=>p(t).endDate=_)})]),_:1}),p(s).is_admin?(l(),A(c,{key:0,class:"w-17",header:"\u9001\u8CA8\u54E1:"},{default:y(()=>[P(e("input",{class:"input","onUpdate:modelValue":n[6]||(n[6]=_=>p(t).deliveryman=_),placeholder:"Delivery men"},null,512),[[S,p(t).deliveryman]])]),_:1})):w("",!0),m(c,{class:"w-28",header:"\u8A02\u55AE\u72C0\u614B:"},{default:y(()=>[P(e("select",{class:O(["input px-0",{"ui-ip-fiiter-empty":!p(t).statusType}]),onChange:n[7]||(n[7]=_=>o()),"onUpdate:modelValue":n[8]||(n[8]=_=>p(t).statusType=_)},Ss,34),[[z,p(t).statusType]])]),_:1})])]),e("div",{class:O(["",{"fiiter-fixed-btn":p(s).is_admin}])},[m(a,{onResuit:o,forms:p(t),kiii_vaiid:!0,is_en:!0},null,8,["forms"])],2)]),Ms])}}}),Vs=C({__name:"OrderIistTopCompanySwitch",emits:["refresh"],setup(u){const d=B();return Y(),(s,o)=>p(d).is_admin?(l(),A(ae,{key:0,onResuit:o[0]||(o[0]=t=>{s.$emit("refresh")})})):w("",!0)}}),k=u=>(ee("data-v-cbd334ec"),u=u(),se(),u),Ls={class:"fx-c eos-oop-wrapper pt_s"},Ns={class:"eos-order-one-pdf"},Us={border:"1",cellspacing:"0"},js={width:"24%",style:{padding:"0.3em 0.5em"}},Ks=["src"],Ys=k(()=>e("td",{class:"t_c"},[e("h1",null,"\u7FD4\u70FD\u7269\u6D41"),e("h4",null,"Cheung Fung Logistics Limited")],-1)),Ws={colspan:"2"},qs=k(()=>e("h6",null,"\u7FD4\u70FD\u904B\u55AE\u7DE8\u865F CF waybill number:",-1)),zs={class:"t_c pt_1"},Gs={class:"eoop_center_tabie",border:"1",cellspacing:"0"},Hs={rowspan:"3",width:"54%",class:"t_t"},Js=k(()=>e("p",{class:"pt_1"},"\u6D3E\u9001\u5730\u5740 Delivery address:",-1)),Qs={key:0,class:"ih-h3 mh_5 eiip_x4"},Xs={key:1,class:"ih-h4 mh_6"},Zs={key:2,class:"ih-h6 mh_6"},ei=k(()=>e("p",null,"\u6536\u4EF6\u4EBA To :",-1)),si=k(()=>e("p",null,"\u6536\u4EF6\u4EBA\u96FB\u8A71 Tel :",-1)),ii={key:0,class:"eiip_x1 eoop_phone"},ti={key:1,class:"eiip_x1 mh_4 eoop_phone"},ni=k(()=>e("p",null,"\u5BA2\u6236\u904B\u55AE\u7DE8\u865F Waybill number :",-1)),oi={key:0,class:"eiip_x1"},ai={key:1,class:"eiip_x1"},ui={class:"eoop_center_tabie",border:"1",cellspacing:"0"},ci={colspan:"3"},_i=k(()=>e("p",null,"\u5BC4\u4EF6\u4EBA\u8CC7\u6599 FROM :",-1)),di={class:"ih-h4"},ri={width:"41%"},li=k(()=>e("p",null,"\u8A02\u55AE\u7D44 Order group :",-1)),pi={width:"28%"},hi=k(()=>e("p",null,"\u91CD\u91CF Weight :",-1)),mi=k(()=>e("p",null,"\u5730\u5340 District :",-1)),fi=k(()=>e("p",null,"\u8A02\u55AE\u7DE8\u865F Order No. :",-1)),vi={key:0,class:"n"},yi={key:1,class:"n eiip_x1"},$i=k(()=>e("p",null,"\u4EF6\u6578 Package :",-1)),bi=k(()=>e("p",null,"\u8DEF\u7DDA Route :",-1)),wi={class:"eoop_center_tabie",border:"1",cellspacing:"0"},xi={width:"54%"},Ai=k(()=>e("p",null,"\u904B\u8CBB Delivery charge:",-1)),Ci={key:0,style:{display:"inline-block"}},gi=k(()=>e("p",null,"\u4EE3\u6536\u8CA8\u6B3E Collection payment:",-1)),ki={key:0,style:{display:"inline-block"}},Ei={class:"",colspan:"2"},Fi=k(()=>e("p",null,"\u5099\u8A3B Note:",-1)),Di={key:0,class:"mh_5 eiip_x4 ih-h4"},Bi={key:1,class:"mh_5 ih-h6"},Ti=C({__name:"CoPdfOrderOne",props:{one:null,idx:null},setup(u){const d=u,s=()=>d.one.company?d.one.company.name:"",o=(t,r="- -")=>d.one[t]?d.one[t]:r;return(t,r)=>(l(),h("div",Ls,[e("div",Ns,[e("table",Us,[e("tr",null,[e("td",js,[e("img",{class:"w-100",src:p(ce)},null,8,Ks)]),Ys]),e("tr",null,[e("td",Ws,[qs,e("div",zs,[m(ue,{class:"barcode",w:444,scaie:1,idx:u.idx,code:u.one.cf_waybill_no},null,8,["idx","code"])])])])]),e("table",Gs,[e("tr",null,[e("td",Hs,[Js,o("address").length<40?(l(),h("h3",Qs,f(o("address")),1)):o("address").length<62?(l(),h("h4",Xs,f(o("address")),1)):(l(),h("h6",Zs,f(o("address")),1))]),e("td",null,[ei,e("h4",null,f(o("customer_name")),1)])]),e("tr",null,[e("td",null,[si,o("customer_phone_no").length<14?(l(),h("h3",ii,f(o("customer_phone_no")),1)):(l(),h("h4",ti,f(o("customer_phone_no")),1))])]),e("tr",null,[e("td",null,[ni,u.one.waybill_no.length<19?(l(),h("h4",oi,f(o("waybill_no")),1)):(l(),h("h6",ai,f(o("waybill_no")),1))])])]),e("table",ui,[e("tr",null,[e("td",ci,[_i,e("h4",di,f(s())+"\xA0 ",1)])]),e("tr",null,[e("td",ri,[li,e("h4",null,f(o("order_group")),1)]),e("td",pi,[hi,e("h4",null,f(o("weight","0"))+"\xA0KG",1)]),e("td",null,[mi,e("h4",null,f(o("district")),1)])]),e("tr",null,[e("td",null,[fi,u.one.order_id.length<19?(l(),h("h4",vi,f(o("order_id")),1)):(l(),h("h6",yi,f(o("order_id")),1))]),e("td",null,[$i,e("h4",null,f(o("count_now"))+"/"+f(o("total_item_count")),1)]),e("td",null,[bi,e("h4",null,f(o("route")),1)])])]),e("table",wi,[e("tr",null,[e("td",xi,[Ai,e("h4",null,[x("HK$\xA0"),o("delivery_charge","")?(l(),h("div",Ci,f(p(G).money(o("delivery_charge",""))),1)):w("",!0)])]),e("td",null,[gi,e("h4",null,[x("HK$\xA0"),o("collection_payment","")?(l(),h("div",ki,f(p(G).money(o("collection_payment",""))),1)):w("",!0)])])]),e("tr",null,[e("td",Ei,[Fi,o("remarks").length<90?(l(),h("h4",Di,f(o("remarks")),1)):(l(),h("h6",Bi,f(o("remarks")),1))])])])])]))}});const Pi=ie(Ti,[["__scopeId","data-v-cbd334ec"]]),Oi={class:"pr sub"},Ri=e("span",null,"\xA0",-1),Si=C({__name:"OrderOnePrintMod",setup(u){const d=M().order,s=F({many:[],ioading:!0});return(()=>{M().do_orders([d]),s.many=[];const t=d.total_item_count;for(let r=0;r<t;r++)d.count_now=r+1,s.many.push({...d});setTimeout(()=>s.ioading=!1,100)})(),(t,r)=>{const n=$("eos-tabie-ioading"),c=$("cp-pdfs-button"),i=$("my-button"),a=$("eos-panner-print");return l(),A(a,null,{cont:y(()=>[m(n,{many:s.many,ioad:s.ioading},{default:y(()=>[(l(!0),h(R,null,K(s.many,(_,v)=>(l(),h("div",{class:"pb_x3 fx-s fx-t",key:v},[e("span",Oi,f(_.count_now)+" / "+f(_.total_item_count),1),m(Pi,{class:"__qiong_printed_ciass",one:_,idx:v},null,8,["one","idx"]),Ri]))),128))]),_:1},8,["many","ioad"])]),bar:y(()=>[s.many&&s.many.length>0?(l(),A(c,{key:0,ref:"pdfs",doms:"__qiong_printed_ciass"},null,512)):(l(),A(i,{key:1,onClick:r[0]||(r[0]=()=>{p(g)().do_mod(0)}),typed:"pri-tin"},{default:y(()=>[x("\u95DC\u9589")]),_:1}))]),_:1})}}}),Mi=C({__name:"OrderTrashRef",props:{aii:null},setup(u,{expose:d}){const s=u;M();const o=B().is_admin,t={buiid_choose:()=>D.buiid_mui_choose(s.aii.choose),buiid:()=>{const n=s.aii.who;if(n.length==1){const c=n[0];return c?c.id:null}return null},faiied_deiete:n=>{var c,i;(c=s.aii.many)==null||c.map(a=>{a.id===n&&(a.kiiied=!1)}),(i=s.aii.choose)==null||i.map(a=>{a.id===n&&(a.kiiied=!1)})},after_deiete:n=>{var c,i;(c=s.aii.many)==null||c.map(a=>{a.id===n&&(a.kiiied=!0)}),(i=s.aii.choose)==null||i.map(a=>{a.id===n&&(a.kiiied=!0)}),t.finished()},after_cancei:(n,c)=>{var i,a;(i=s.aii.many)==null||i.map(_=>{_.id===n&&(_.is_cancel=c)}),(a=s.aii.choose)==null||a.map(_=>{_.id===n&&(_.is_cancel=c)}),t.finished()},finished:()=>{s.aii.who.length=0,g().do_mod(0)}};return d({deiete_mui:async()=>{const n=t.buiid_choose();if(n.length>0)return await T.deiete_mui(n)},after_deiete_mui:()=>new Promise(n=>{D.feak_kiied(s.aii.many,s.aii.choose,!0),n(0)}),deiete:async()=>new Promise(async n=>{if(o)try{const c=t.buiid();if(c){g().do_mod(0);try{T.deiete(c),t.after_deiete(c)}catch{setTimeout(()=>t.faiied_deiete(c),20)}}}catch{}}),cancei_mui:async()=>{const n=t.buiid_choose();if(n.length>0)return await T.cancei_mui(n)},after_cancei_mui:()=>new Promise(n=>{const c=t.buiid_choose();s.aii.many.map(i=>{c.map(a=>{i.cf_waybill_no===a&&(i.is_cancel=!0)})}),n(0)}),cancei:async(n=!0)=>new Promise(async c=>{try{const i=t.buiid();i&&(g().do_mod(0),await T.cancei(i,n),t.after_cancei(i,n))}catch{}})}),(n,c)=>null}}),Ii={key:0},Vi=e("h4",{class:"px"},"\u6279\u91CF\u522A\u9664",-1),Li=e("p",{class:"px sub"},"Are you sure to delete them?",-1),Ni={class:"fx-c pt_x2"},Ui=e("span",{class:"err"},"\u78BA\u8A8D Yes",-1),ji=[Ui],Ki={key:1},Yi=e("h4",{class:"px"},"\u8A02\u55AE\u64CD\u4F5C",-1),Wi=e("p",{class:"px sub"},"Are you sure to delete it?",-1),qi={class:"fx-c pt_x2"},zi=e("span",{class:"err"},"\u78BA\u8A8D Yes",-1),Gi=[zi],Hi=C({__name:"OitmTrashInner",emits:["trash","trash_mui"],setup(u){const d=g();return(s,o)=>(l(),h(R,null,[p(d).mod===-201?(l(),h("div",Ii,[Vi,Li,e("div",Ni,[e("button",{class:"btn-trash px_x2 py_s",onClick:o[0]||(o[0]=t=>s.$emit("trash_mui"))},ji)])])):w("",!0),p(d).mod===-205?(l(),h("div",Ki,[Yi,Wi,e("div",qi,[e("button",{class:"btn-trash px_x2 py_s",onClick:o[1]||(o[1]=t=>s.$emit("trash"))},Gi)])])):w("",!0)],64))}}),Ji={key:0},Qi=e("h4",{class:"px"},"\u6279\u91CF\u53D6\u6D88",-1),Xi=e("p",{class:"px sub"},"Are you sure to cancel them?",-1),Zi={class:"fx-c pt_x2"},et=e("span",{class:""},"\u78BA\u8A8D Yes",-1),st=[et],it={key:1},tt=e("h4",{class:"px"},"\u8A02\u55AE\u64CD\u4F5C",-1),nt=e("p",{class:"px sub"},"Are you sure to cancel / restore it?",-1),ot={class:"fx-c pt_x2"},at=e("span",{class:""},"\u53D6\u6D88 Cancel",-1),ut=[at],ct=e("span",{class:"px_s"},null,-1),_t=e("span",{class:""},"\u6062\u5FA9 Restore",-1),dt=[_t],rt=C({__name:"OitmCanceiInner",emits:["cancei","cancei_mui","restore","restore_mui"],setup(u){const d=g();return(s,o)=>(l(),h(R,null,[p(d).mod===-202?(l(),h("div",Ji,[Qi,Xi,e("div",Zi,[e("button",{class:"btn-pri-tin px_x2 py_s",onClick:o[0]||(o[0]=t=>s.$emit("cancei_mui"))},st)])])):w("",!0),p(d).mod===-206?(l(),h("div",it,[tt,nt,e("div",ot,[e("button",{class:"btn-pri-tin px_x2 py_s",onClick:o[1]||(o[1]=t=>s.$emit("cancei"))},ut),ct,e("button",{class:"btn-pri-out px_x2 py_s",onClick:o[2]||(o[2]=t=>s.$emit("restore"))},dt)])])):w("",!0)],64))}}),lt={key:0},pt={key:1},ht=e("h4",{class:"px"},"\u8A02\u55AE\u64CD\u4F5C",-1),mt=e("p",{class:"px sub"},"Are you sure to cancel it?",-1),ft={class:"fx-c pt_x2"},vt=e("span",{class:"err"},"\u53D6\u6D88\u8A02\u55AE Cancel it",-1),yt=[vt],$t=C({__name:"OrderIistTrashMod",props:{aii:null},emits:["success"],setup(u,{emit:d}){const s=I(),o=B().is_admin,t=F({ioading:!1}),r={resuit_trash:async c=>{t.ioading=!1,c&&(await s.value.after_deiete_mui(),g().do_mod(0),setTimeout(()=>d("success"),800))},resuit_cancei:async c=>{t.ioading=!1,c&&(await s.value.after_cancei_mui(),g().do_mod(0))}},n={deiete:()=>s.value.deiete(),deiete_mui:()=>new Promise(async c=>{if(!t.ioading){t.ioading=!0;const i=await s.value.deiete_mui();await r.resuit_trash(i)}}),cancei:async(c=!0)=>s.value.cancei(c),cancei_mui:async(c=!0)=>{const i=await s.value.cancei_mui();r.resuit_cancei(i)}};return(c,i)=>{const a=$("eos-mod-sure");return l(),A(a,{onTrash:i[7]||(i[7]=_=>n.deiete())},{default:y(()=>[p(o)?(l(),h("div",lt,[m(Hi,{onTrash:i[0]||(i[0]=_=>n.deiete()),onTrash_mui:i[1]||(i[1]=_=>n.deiete_mui())}),m(rt,{onCancei:i[2]||(i[2]=_=>n.cancei(!0)),onCancei_mui:i[3]||(i[3]=_=>n.cancei_mui(!0)),onRestore:i[4]||(i[4]=_=>n.cancei(!1)),onRestore_mui:i[5]||(i[5]=_=>n.cancei_mui(!1))})])):(l(),h("div",pt,[ht,mt,e("div",ft,[e("button",{class:"btn-trash px_x4 py_s",onClick:i[6]||(i[6]=_=>n.cancei(!0))},yt)])])),m(Mi,{ref_key:"otfREF",ref:s,aii:u.aii},null,8,["aii"])]),_:1})}}}),bt={class:"py f-row"},wt={class:"ps-r"},xt={key:0,class:"ip-vai-succ-icon"},At=e("i",{class:"bi bi-check-lg"},null,-1),Ct=[At],gt={class:"py f-row"},kt={class:"ps-r"},Et={key:0,class:"ip-vai-succ-icon"},Ft=e("i",{class:"bi bi-check-lg"},null,-1),Dt=[Ft],Bt={class:"ps-r"},Tt={key:0,class:"ip-vai-succ-icon"},Pt=e("i",{class:"bi bi-check-lg"},null,-1),Ot=[Pt],Rt={class:"py pl"},St={class:"pb"},Mt={class:"pb"},It={class:""},Vt=C({__name:"CoDeiivermanPius",setup(u,{expose:d}){const s=F({many:[],ioading:!1,deiiv:{}}),o=F({phone_no:!1,chinese_name:!1,contractor_name:!1}),t=F({phone_no:"",chinese_name:"",contractor_name:""}),r=F({phone_no:!1,chinese_name:!1,contractor_name:!1});te(()=>t.chinese_name,(i,a)=>{a&&!i&&c.reset({phone_no:"",chinese_name:"",contractor_name:""})});const n={searchMan:async i=>new Promise(async a=>{if(!s.ioading)try{n.ciose(),s.ioading=!0,n.open(i);const _={};_[i]=t[i];const v=await ne.many_of_param(_);s.many=v&&v.length>0?v:[]}catch{}setTimeout(()=>s.ioading=!1,200)}),ciose:()=>{for(let i in o)o[i]=!1},open:(i="phone_no",a=!0)=>{n.ciose(),t[i]&&(o[i]=a)},insert:i=>{if(s.deiiv=i,n.ciose(),s.deiiv)for(const a in t)t[a]=s.deiiv[a]}},c={can:()=>{let i=!0;if(t.phone_no)r.phone_no=!1;else return r.phone_no=!0,!1;if(s.deiiv.id)r.phone_no=!1;else return r.phone_no=!0,r.chinese_name=!0,r.contractor_name=!0,!1;return Object.values(r).map(a=>{a&&(i=!1)}),i},reset:i=>{const a=i.delivery_man_info;for(let _ in t)t[_]=a?a[_]:"";s.deiiv=a||{},n.ciose()}};return d({resuit:()=>c.can()?{delivery_man_info:s.deiiv.id,id:s.deiiv.id,chinese_name:s.deiiv.chinese_name}:void 0,reset:c.reset}),(i,a)=>{const _=$("eos-input"),v=$("ef-deliver-typed"),b=$("ef-car-typed");return l(),h(R,null,[e("div",bt,[m(_,{class:"w-100",is_err:r.chinese_name,header:"\u59D3\u540D(\u4E2D\u6587\u540D\u6216\u82F1\u6587\u540D\u5747\u53EF) Name (You can enter Chinese or English)"},{default:y(()=>[m(U,{aii:s,show:o.chinese_name,onResuit:n.insert,onCiose:n.ciose},{default:y(()=>[e("div",wt,[P(e("input",{class:"input","onUpdate:modelValue":a[0]||(a[0]=E=>t.chinese_name=E),onKeydown:a[1]||(a[1]=V(E=>n.searchMan("chinese_name"),["enter"])),placeholder:"\u8F38\u5165\u5B8C\u6210\u5F8C\u8ACB\u6309\u56DE\u8ECA\u9375 Press Enter when you have finished typing"},null,544),[[S,t.chinese_name]]),s.deiiv&&s.deiiv.id?(l(),h("span",xt,Ct)):w("",!0)])]),_:1},8,["aii","show","onResuit","onCiose"])]),_:1},8,["is_err","header"])]),e("div",gt,[m(_,{class:"w-36 w-50-p",is_err:r.phone_no,header:"\u96FB\u8A71\u865F\u78BC Telephone number"},{default:y(()=>[m(U,{aii:s,show:o.phone_no,onResuit:n.insert,onCiose:n.ciose},{default:y(()=>[e("div",kt,[P(e("input",{class:"input","onUpdate:modelValue":a[2]||(a[2]=E=>t.phone_no=E),onKeydown:a[3]||(a[3]=V(E=>n.searchMan("phone_no"),["enter"])),placeholder:"\u8ACB\u8F38\u5165 Please enter"},null,544),[[S,t.phone_no]]),s.deiiv&&s.deiiv.id?(l(),h("span",Et,Dt)):w("",!0)])]),_:1},8,["aii","show","onResuit","onCiose"])]),_:1},8,["is_err"]),m(_,{class:"w-333 w-50-p",is_err:!1,header:"\u5224\u982D\u540D\u7A31 Contractor name"},{default:y(()=>[m(U,{aii:s,show:o.contractor_name,onResuit:n.insert,onCiose:n.ciose},{default:y(()=>[e("div",Bt,[P(e("input",{class:"input","onUpdate:modelValue":a[4]||(a[4]=E=>t.contractor_name=E),onKeydown:a[5]||(a[5]=V(E=>n.searchMan("contractor_name"),["enter"])),placeholder:"\u8ACB\u8F38\u5165 Please enter"},null,544),[[S,t.contractor_name]]),s.deiiv&&s.deiiv.contractor_name?(l(),h("span",Tt,Ot)):w("",!0)])]),_:1},8,["aii","show","onResuit","onCiose"])]),_:1})]),e("div",Rt,[e("p",St,[x("\u9001\u8CA8\u54E1\u985E\u5225 Type of deliveryman:\xA0\xA0"),m(v,{class:"d-ib",def:s.deiiv.type,is_txt_mode:!0},null,8,["def"])]),e("p",Mt,[x("\u8ECA\u724C Licence plate:\xA0\xA0"),e("span",null,f(s.deiiv.license_plate_no),1)]),e("p",It,[x("\u8CA8\u8ECA\u985E\u578B Truck type:\xA0\xA0"),m(b,{class:"d-ib",def:s.deiiv.truck_type,is_txt_mode:!0},null,8,["def"])])])],64)}}}),Lt={class:"px_x2 py"},Nt=e("h4",null,[e("div",null,"\u6279\u91CF\u6DFB\u52A0\u9001\u8CA8\u54E1")],-1),Ut=e("div",{class:"pb"},"Upload Deliveryman in bulk",-1),jt={class:"fx-c pt upper"},Kt={key:0},Yt=e("i",{class:"bi bi-save"},null,-1),Wt=e("span",null,"\xA0\xA0\u6DFB\u52A0\xA0Add",-1),qt=[Yt,Wt],zt={key:1},Gt=e("i",{class:"bi bi-save"},null,-1),Ht=e("span",null,"\xA0\xA0\u6DFB\u52A0\u4E2D\xA0Add...",-1),Jt=[Gt,Ht],Qt={key:1,class:"px"},Xt=e("i",{class:"bi bi-x-lg"},null,-1),Zt=C({__name:"OrderDeiiveryPlusMod",props:{aii:null},emits:["success"],setup(u,{emit:d}){const s=u,o=I(),t=F({msg:"",ioading:!1,man:{}}),r={buiid:()=>D.buiid_mui_choose(s.aii.choose),feakdeiiveryman:()=>new Promise(async n=>{const c=D.buiid_finai_choose(s.aii.choose),i=s.aii.many;if(t.man&&t.man.id){const a=i.length,_=c.length;for(let v=0;v<a;v++){const b=i[v];for(let E=0;E<_;E++)c[E].id==b.id&&(b.delivery_man_info=t.man)}}n(0)}),succ:()=>{r.feakdeiiveryman(),g().do_mod(0),d("success"),t.msg=""},submit:async()=>new Promise(async n=>{if(!t.ioading){t.ioading=!0,t.msg="";const c=r.buiid();if(c.length>0){const i=o.value.resuit();i&&(t.man=i,await T.deiivery_pius(i.id,c)?(r.succ(),n(1)):t.msg="\u7DB2\u7D61\u9023\u7D50\u932F\u8AA4\uFF01\uFF01\uFF01")}setTimeout(()=>t.ioading=!1,200)}n(0)})};return(n,c)=>{const i=$("my-button");return l(),h("div",Lt,[Nt,Ut,m(Vt,{ref_key:"deiiv",ref:o},null,512),e("div",jt,[m(i,null,{default:y(()=>[t.msg?(l(),h("div",Qt,[Xt,e("span",null,"\xA0\xA0"+f(t.msg),1)])):(l(),h("div",{key:0,class:"px_x3",onClick:c[0]||(c[0]=a=>r.submit())},[t.ioading?(l(),h("div",zt,Jt)):(l(),h("div",Kt,qt))]))]),_:1})])])}}}),en={class:"panner mh-tabie"},dn=C({__name:"OrderWrapper",props:{aii:null},emits:["refresh","refreshMod","reset"],setup(u,{emit:d}){const s=u,o=I(),t=L(),r=g(),n=B(),c=Y(),i=()=>d("refresh"),a={resetcompany:()=>{a.pagina(0,0,s.aii.imit),d("reset")},sorts:()=>{s.aii.condition["sort[0]"]="createdAt:desc"},fresh:()=>{i()},freshMod:()=>d("refreshMod"),success:()=>{s.aii.ioading=!1,s.aii.choose.length=0},search:async _=>new Promise(async v=>{for(let b in _)s.aii.condition[b]=_[b];try{o.value.reset()}catch{a.pagina(0,0,s.aii.imit)}v(0)}),pagina:async(_,v,b)=>{s.aii.condition["pagination[page]"]=_,s.aii.condition["pagination[pageSize]"]=b,s.aii.imit=b,i()},init:()=>new Promise(_=>{n.is_admin&&(c.company.id||t.push("/admin/company_choose")),_(0)})};return a.init(),(_,v)=>{const b=$("eos-go-button"),E=$("eos-pagination"),W=$("eos-mod"),X=$("eos-iayout-screen-extra");return l(),A(X,{is_en:!0,onBack:v[2]||(v[2]=q=>p(t).go(-1))},{opera:y(()=>[m(Vs,{onRefresh:v[0]||(v[0]=q=>a.resetcompany())})]),cont:y(()=>[H(_.$slots,"top",{},()=>[m(Is,{onSearch:a.search},null,8,["onSearch"])]),e("nav",en,[m($s,{aii:u.aii,onRefresh:v[1]||(v[1]=q=>d("refreshMod",!0))},null,8,["aii"]),H(_.$slots,"cont"),u.aii.page.total?(l(),A(E,{key:0,mode:-1,is_500:!0,class:"pt",ref_key:"pagni",ref:o,onResuit:a.pagina,_limit:u.aii.imit,count:u.aii.page.total},{default:y(()=>[u.aii.many.length>50?(l(),A(b,{key:0,is_bottom:!0})):w("",!0)]),_:1},8,["onResuit","_limit","count"])):w("",!0)])]),extra:y(()=>[m(_e),m(W,null,{default:y(()=>[p(r).mod===102?(l(),A(Zt,{key:0,aii:u.aii,onSuccess:a.freshMod},null,8,["aii","onSuccess"])):w("",!0),p(r).mod===1?(l(),A(Si,{key:1})):w("",!0)]),_:1}),m($t,{aii:u.aii,onSuccess:a.freshMod},null,8,["aii","onSuccess"])]),_:3})}}});export{cn as _,_n as a,dn as b};
