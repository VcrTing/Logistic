import{d as b,v as B,g as h,p as v,o as y,c as A,a as t,h as a,w as l,b as E,t as O,y as c,I as p,F as x,e as g,x as M,J as U,S as N,u as j,f as K,O as S,B as W,m as G,i as I,R as T,P as J}from"./index.81274d1c.js";import{_ as R}from"./EosDeiiverymanSwitchDrop.vue_vue_type_script_setup_true_lang.158e7cb3.js";const L={class:"py f-row"},Y={class:"py f-row"},q={class:"py f-row"},z={class:"py f-row"},H=t("span",{class:"ip-unit"},"kg",-1),Q={class:"py f-row"},X={class:"py f-row"},Z=b({__name:"OrderEditBase",setup(k,{expose:w}){const e=B(),n=h({create_date:"",cf_waybill_no:"",waybill_no:"",order_id:"",order_group:"",receipt_date:"",product_content:"",remarks:"",weight:"",total_item_count:""}),u=h({create_date:!1,waybill_no:!1,order_id:!1,order_group:!1,product_content:!1,total_item_count:!1}),d=function(){let s=!0;if(n.total_item_count)u.total_item_count=!1;else return u.total_item_count=!0,!1;return Object.values(u).map(i=>{i&&(s=!1)}),s};return w({resuit:()=>d()?n:void 0,reset:s=>{for(let i in n)n[i]=s[i];e.value.ioc(s.receipt_date)}}),(s,i)=>{const r=v("eos-input"),o=v("fn-time");return y(),A(x,null,[t("div",L,[a(r,{class:"w-50 w-50-p",is_err:!1,header:"\u5275\u5EFA\u65E5\u671F Order date",is_txt_mode:!0},{default:l(()=>[E(O(n.create_date),1)]),_:1}),a(r,{class:"w-50 w-50-p",is_err:!1,header:"\u7FD4\u70FD\u904B\u55AE\u7DE8\u865F CF waybill number",is_txt_mode:!0},{default:l(()=>[E(O(n.cf_waybill_no),1)]),_:1})]),t("div",Y,[a(r,{class:"w-50 w-50-p",is_err:u.waybill_no,header:"\u5BA2\u6236\u904B\u55AE\u7DE8\u865F Waybill number"},{default:l(()=>[c(t("input",{class:"input","onUpdate:modelValue":i[0]||(i[0]=_=>n.waybill_no=_),placeholder:"\u8ACB\u8F38\u5165 Please enter"},null,512),[[p,n.waybill_no]])]),_:1},8,["is_err"]),a(r,{class:"w-50 w-50-p",is_err:u.order_id,header:"\u8A02\u55AE\u7DE8\u865F Order No."},{default:l(()=>[c(t("input",{class:"input","onUpdate:modelValue":i[1]||(i[1]=_=>n.order_id=_),placeholder:"\u8ACB\u8F38\u5165 Please enter"},null,512),[[p,n.order_id]])]),_:1},8,["is_err","header"])]),t("div",q,[a(r,{class:"w-50 w-50-p",is_err:u.order_group,header:"\u8A02\u55AE\u7D44 Group"},{default:l(()=>[c(t("input",{class:"input","onUpdate:modelValue":i[2]||(i[2]=_=>n.order_group=_),placeholder:"\u8ACB\u8F38\u5165 Please enter"},null,512),[[p,n.order_group]])]),_:1},8,["is_err"]),a(r,{class:"w-50 w-50-p",is_err:!1,header:"\u8A02\u55AE\u65E5\u671F Order date"},{default:l(()=>[a(o,{timed:n.receipt_date,ref_key:"dateRef",ref:e,onResuit:i[3]||(i[3]=_=>n.receipt_date=_)},null,8,["timed"])]),_:1})]),t("div",z,[a(r,{class:"w-50 w-50-p",is_err:u.total_item_count,header:"\u4EF6\u6578 Package"},{default:l(()=>[c(t("input",{class:"input",type:"number","onUpdate:modelValue":i[4]||(i[4]=_=>n.total_item_count=_),placeholder:"\u8ACB\u8F38\u5165 Please enter"},null,512),[[p,n.total_item_count]])]),_:1},8,["is_err"]),a(r,{class:"w-50 w-50-p ip-weight",is_err:!1,header:"\u91CD\u91CF Weight"},{default:l(()=>[c(t("input",{class:"input",type:"number","onUpdate:modelValue":i[5]||(i[5]=_=>n.weight=_),placeholder:"\u8ACB\u8F38\u5165 Please enter"},null,512),[[p,n.weight]]),H]),_:1})]),t("div",Q,[a(r,{class:"w-100 w-100-p",is_err:u.product_content,header:"\u8CA8\u54C1\u5167\u5BB9 Product detail"},{default:l(()=>[c(t("input",{class:"input","onUpdate:modelValue":i[6]||(i[6]=_=>n.product_content=_),placeholder:"\u8ACB\u8F38\u5165 Please enter"},null,512),[[p,n.product_content]])]),_:1},8,["is_err"])]),t("div",X,[a(r,{class:"w-100",is_err:!1,header:"\u5099\u8A3B Remark"},{default:l(()=>[c(t("input",{class:"input","onUpdate:modelValue":i[7]||(i[7]=_=>n.remarks=_),placeholder:"\u8ACB\u8F38\u5165 Please enter"},null,512),[[p,n.remarks]])]),_:1})])],64)}}}),ee={class:"py f-row"},se={class:"py f-row"},te={class:"py f-row"},ne={class:"py f-row"},re=b({__name:"OrderEditDetaii",setup(k,{expose:w}){const e=h({car_park:0,tunnel_fee:0,misc_fee:0,floor_count:0,collection_payment:0,delivery_date:"",delivery_charge:0}),n=h({car_park:!1,tunnel_fee:!1,misc_fee:!1,floor_count:!1,collection_payment:!1,delivery_charge:!1}),u=function(){let d=!0;return Object.values(n).map(s=>{s&&(d=!1)}),d};return w({resuit:()=>u()?e:void 0,reset:d=>{for(let s in e)e[s]=d[s]}}),(d,s)=>{const i=v("fn-time"),r=v("eos-input");return y(),A(x,null,[t("div",ee,[a(r,{class:"w-50 w-50-p",is_err:!1,header:"\u9001\u8CA8\u65E5\u671F Delivery date"},{default:l(()=>[a(i,{timed:e.delivery_date,ref:"dateRef",onResuit:s[0]||(s[0]=o=>e.delivery_date=o)},null,8,["timed"])]),_:1}),g("",!0)]),t("div",se,[a(r,{class:"w-50 w-50-p",is_err:n.car_park,header:"\u505C\u8ECA\u5834 Parking"},{default:l(()=>[c(t("input",{class:"input",type:"number","onUpdate:modelValue":s[2]||(s[2]=o=>e.car_park=o),placeholder:"\u8ACB\u8F38\u5165 Please enter"},null,512),[[p,e.car_park]])]),_:1},8,["is_err"]),a(r,{class:"w-50 w-50-p",is_err:n.tunnel_fee,header:"\u96A7\u9053\u8CBB Tunnel fee"},{default:l(()=>[c(t("input",{class:"input",type:"number","onUpdate:modelValue":s[3]||(s[3]=o=>e.tunnel_fee=o),placeholder:"\u8ACB\u8F38\u5165 Please enter"},null,512),[[p,e.tunnel_fee]])]),_:1},8,["is_err"])]),t("div",te,[a(r,{class:"w-50 w-50-p",is_err:n.misc_fee,header:"\u96DC\u8CBB Other charges"},{default:l(()=>[c(t("input",{class:"input",type:"number","onUpdate:modelValue":s[4]||(s[4]=o=>e.misc_fee=o),placeholder:"\u8ACB\u8F38\u5165 Please enter"},null,512),[[p,e.misc_fee]])]),_:1},8,["is_err"]),a(r,{class:"w-50 w-50-p",is_err:n.floor_count,header:"\u6A13\u68AF\u5C64\u6578 Stairs floor"},{default:l(()=>[c(t("input",{class:"input",type:"number","onUpdate:modelValue":s[5]||(s[5]=o=>e.floor_count=o),placeholder:"\u8ACB\u8F38\u5165 Please enter"},null,512),[[p,e.floor_count]])]),_:1},8,["is_err"])]),t("div",ne,[a(r,{class:"w-50 w-50-p",is_err:n.delivery_charge,header:"\u904B\u8CBB Delivery charges"},{default:l(()=>[c(t("input",{class:"input",type:"number","onUpdate:modelValue":s[6]||(s[6]=o=>e.delivery_charge=o),placeholder:"\u8ACB\u8F38\u5165 Please enter"},null,512),[[p,e.delivery_charge]])]),_:1},8,["is_err"]),a(r,{class:"w-50 w-50-p",is_err:n.collection_payment,header:"\u4EE3\u6536\u8D27\u6B3E Collection Payment"},{default:l(()=>[c(t("input",{class:"input",type:"number","onUpdate:modelValue":s[7]||(s[7]=o=>e.collection_payment=o),placeholder:"\u8ACB\u8F38\u5165 Please enter"},null,512),[[p,e.collection_payment]])]),_:1},8,["is_err"])])],64)}}}),oe={class:"py f-row"},ae={class:"py f-row"},ie={class:"py f-row"},ue={class:"py f-row"},le=b({__name:"OrderEditReciver",setup(k,{expose:w}){const e=h({customer_name:"",customer_phone_no:"",district:"",area:"",address:"",route:""}),n=h({customer_name:!1,customer_phone_no:!1,district:!1,area:!1,address:!1,route:!1}),u=function(){let d=!0;if(e.customer_name)n.customer_name=!1;else return n.customer_name=!0,!1;if(e.address)n.address=!1;else return n.address=!0,!1;return Object.values(n).map(s=>{s&&(d=!1)}),d};return w({resuit:()=>u()?e:void 0,reset:d=>{for(let s in e)e[s]=d[s]}}),(d,s)=>{const i=v("eos-input");return y(),A(x,null,[t("div",oe,[a(i,{class:"w-50 w-50-p",is_err:n.customer_name,header:"\u6536\u4EF6\u4EBA\u540D\u79F0 Recipient name"},{default:l(()=>[c(t("input",{class:"input","onUpdate:modelValue":s[0]||(s[0]=r=>e.customer_name=r),placeholder:"\u8ACB\u8F38\u5165 Please enter"},null,512),[[p,e.customer_name]])]),_:1},8,["is_err"]),a(i,{class:"w-50 w-50-p",is_err:n.customer_phone_no,header:"\u6536\u4EF6\u4EBA\u96FB\u8A71\u865F\u78BC Tel."},{default:l(()=>[c(t("input",{class:"input","onUpdate:modelValue":s[1]||(s[1]=r=>e.customer_phone_no=r),placeholder:"\u8ACB\u8F38\u5165 Please enter"},null,512),[[p,e.customer_phone_no]])]),_:1},8,["is_err","header"])]),t("div",ae,[a(i,{class:"w-50 w-50-p",is_err:n.district,header:"\u5730\u5340 District"},{default:l(()=>[c(t("input",{class:"input","onUpdate:modelValue":s[2]||(s[2]=r=>e.district=r),placeholder:"\u8ACB\u8F38\u5165 Please enter"},null,512),[[p,e.district]])]),_:1},8,["is_err"]),a(i,{class:"w-50 w-50-p",is_err:n.area,header:"\u5340\u57DF Area"},{default:l(()=>[c(t("input",{class:"input","onUpdate:modelValue":s[3]||(s[3]=r=>e.area=r),placeholder:"\u8ACB\u8F38\u5165 Please enter"},null,512),[[p,e.area]])]),_:1},8,["is_err"])]),t("div",ie,[a(i,{class:"w-100 w-100-p",is_err:n.address,header:"\u5730\u5740\u8A73\u60C5 Address"},{default:l(()=>[c(t("textarea",{class:"input","onUpdate:modelValue":s[4]||(s[4]=r=>e.address=r),placeholder:"\u8ACB\u8F38\u5165 Please enter"},null,512),[[p,e.address]])]),_:1},8,["is_err"])]),t("div",ue,[a(i,{class:"w-50 w-50-p",is_err:n.route,header:"\u8DEF\u7EBF Route"},{default:l(()=>[c(t("input",{class:"input","onUpdate:modelValue":s[5]||(s[5]=r=>e.route=r),placeholder:"\u8ACB\u8F38\u5165 Please enter"},null,512),[[p,e.route]])]),_:1},8,["is_err"])])],64)}}}),de={class:"py fx-s"},_e=t("h4",null,"\u8A02\u55AE\u5DF2\u5B8C\u6210\u9001\u8CA8\xA0\xA0The order has been delivered",-1),ce={class:"fx-r"},pe=b({__name:"OrderEditFinished",setup(k,{expose:w}){const e=B(),n=h({is_complete_list:!1});return h({is_complete_list:!1}),w({resuit:()=>n,reset:u=>{n.is_complete_list=u.is_complete_list,e.value.ioc(u.is_complete_list)}}),(u,d)=>{const s=v("eos-switch");return y(),A("div",de,[_e,t("div",ce,[E(" \u5426\xA0\xA0\xA0"),a(s,{ref_key:"dateRef",ref:e,onResuit:d[0]||(d[0]=i=>n.is_complete_list=i)},null,512),E("\xA0\xA0\u662F ")])])}}}),fe={class:"py f-row"},me={class:"ps-r"},he={key:0,class:"ip-vai-succ-icon"},ve=t("i",{class:"bi bi-check-lg"},null,-1),we=[ve],ye={class:"py f-row"},Ae={class:"ps-r"},Ce={key:0,class:"ip-vai-succ-icon"},Fe=t("i",{class:"bi bi-check-lg"},null,-1),Be=[Fe],Ee={class:"ps-r"},be={key:0,class:"ip-vai-succ-icon"},ke=t("i",{class:"bi bi-check-lg"},null,-1),$e=[ke],ge={class:"py pl"},xe={class:"pb"},Pe={class:"pb"},De={class:""},Ve=b({__name:"OrderEditDeiiverMan",setup(k,{expose:w}){const e=h({many:[],ioading:!1,deiiv:{}}),n=h({phone_no:!1,chinese_name:!1,contractor_name:!1}),u=h({phone_no:"",chinese_name:"",contractor_name:""}),d=h({phone_no:!1,chinese_name:!1,contractor_name:!1});M(()=>u.chinese_name,(r,o)=>{o&&!r&&i.reset({phone_no:"",chinese_name:"",contractor_name:""})});const s={searchMan:async r=>new Promise(async o=>{if(!e.ioading)try{s.ciose(),e.ioading=!0,s.open(r);const _={};_[r]=u[r];const F=await N.many_of_param(_);e.many=F&&F.length>0?F:[]}catch{}setTimeout(()=>e.ioading=!1,200)}),ciose:()=>{for(let r in n)n[r]=!1},open:(r="phone_no",o=!0)=>{s.ciose(),u[r]&&(n[r]=o)},insert:r=>{if(e.deiiv=r,s.ciose(),e.deiiv)for(const o in u)u[o]=e.deiiv[o]}},i={can:()=>{let r=!0;if(u.phone_no)d.phone_no=!1;else return d.phone_no=!0,!1;if(e.deiiv.id)d.phone_no=!1;else return d.phone_no=!0,d.chinese_name=!0,d.contractor_name=!0,!1;return Object.values(d).map(o=>{o&&(r=!1)}),r},reset:r=>{const o=r.delivery_man_info;for(let _ in u)u[_]=o?o[_]:"";e.deiiv=o||{},s.ciose()}};return w({resuit:()=>i.can()?{delivery_man_info:e.deiiv.id}:void 0,reset:i.reset}),(r,o)=>{const _=v("eos-input"),F=v("ef-deliver-typed"),P=v("ef-car-typed");return y(),A(x,null,[t("div",fe,[a(_,{class:"w-100",is_err:!1,header:"\u59D3\u540D(\u4E2D\u6587\u540D\u6216\u82F1\u6587\u540D\u5747\u53EF) Name (You can enter Chinese or English)"},{default:l(()=>[a(R,{aii:e,show:n.chinese_name,onResuit:s.insert,onCiose:s.ciose},{default:l(()=>[t("div",me,[c(t("input",{class:"input","onUpdate:modelValue":o[0]||(o[0]=m=>u.chinese_name=m),onKeydown:o[1]||(o[1]=U(m=>s.searchMan("chinese_name"),["enter"])),placeholder:"\u8F38\u5165\u5B8C\u6210\u5F8C\u8ACB\u6309\u56DE\u8ECA\u9375 Press Enter when you have finished typing"},null,544),[[p,u.chinese_name]]),e.deiiv&&e.deiiv.id?(y(),A("span",he,we)):g("",!0)])]),_:1},8,["aii","show","onResuit","onCiose"])]),_:1},8,["header"])]),t("div",ye,[a(_,{class:"w-36 w-50-p",is_err:!1,header:"\u96FB\u8A71\u865F\u78BC Telephone number"},{default:l(()=>[a(R,{aii:e,show:n.phone_no,onResuit:s.insert,onCiose:s.ciose},{default:l(()=>[t("div",Ae,[c(t("input",{class:"input","onUpdate:modelValue":o[2]||(o[2]=m=>u.phone_no=m),onKeydown:o[3]||(o[3]=U(m=>s.searchMan("phone_no"),["enter"])),placeholder:"\u8ACB\u8F38\u5165 Please enter"},null,544),[[p,u.phone_no]]),e.deiiv&&e.deiiv.id?(y(),A("span",Ce,Be)):g("",!0)])]),_:1},8,["aii","show","onResuit","onCiose"])]),_:1}),a(_,{class:"w-333 w-50-p",is_err:!1,header:"\u5224\u982D\u540D\u7A31 Contractor name"},{default:l(()=>[a(R,{aii:e,show:n.contractor_name,onResuit:s.insert,onCiose:s.ciose},{default:l(()=>[t("div",Ee,[c(t("input",{class:"input","onUpdate:modelValue":o[4]||(o[4]=m=>u.contractor_name=m),onKeydown:o[5]||(o[5]=U(m=>s.searchMan("contractor_name"),["enter"])),placeholder:"\u8ACB\u8F38\u5165 Please enter"},null,544),[[p,u.contractor_name]]),e.deiiv&&e.deiiv.contractor_name?(y(),A("span",be,$e)):g("",!0)])]),_:1},8,["aii","show","onResuit","onCiose"])]),_:1})]),t("div",ge,[t("p",xe,[E("\u9001\u8CA8\u54E1\u985E\u5225 Type of deliveryman:\xA0\xA0"),a(F,{class:"d-ib",def:e.deiiv.type,is_txt_mode:!0},null,8,["def"])]),t("p",Pe,[E("\u8ECA\u724C Licence plate:\xA0\xA0"),t("span",null,O(e.deiiv.license_plate_no),1)]),t("p",De,[E("\u8CA8\u8ECA\u985E\u578B Truck type:\xA0\xA0"),a(P,{class:"d-ib",def:e.deiiv.truck_type,is_txt_mode:!0},null,8,["def"])])])],64)}}}),Ue=t("div",{class:"py_row"},null,-1),Re=t("div",{class:"py_row"},null,-1),Oe={key:0},Te=t("div",{class:"py_row"},null,-1),Me=t("div",{class:"py_row"},null,-1),Ne={class:"panner"},je={key:1},We=b({__name:"order_edit",setup(k){const w=j(),e=B(),n=B(),u=B(),d=B(),s=B(),i=K(),r=i.is_admin,o=S().order,_=async()=>{o.id||m();const f=await T.one(o.id);f.receipt_date=f.receipt_date?f.receipt_date:J.now(),e.value.reset(f),n.value.reset(f),u.value.reset(f),r&&d.value.reset(f),r&&s.value.reset(f)},F=()=>{const f=e.value.resuit(),$=n.value.resuit(),C=u.value.resuit(),D=r?d.value.resuit():{},V=r?s.value.resuit():{};return f&&$&&C?r?{...f,...$,...C,...D,...V}:{...f,...$,...C}:null},P=async function(){const f=F();f&&await T.edit(f,o.id)&&m()};W(async()=>{await _()});const m=()=>w.push("/admin/order_iist");return(f,$)=>{const C=v("eos-form-paner"),D=v("eos-iayout-form"),V=v("eos-iayout-screen");return y(),G(V,{is_en:!0,onBack:m},{default:l(()=>[a(D,{is_en:!0,onSubmit:P,onBack:m},{default:l(()=>[a(C,{tit:"\u57FA\u672C\u4FE1\u606F Basic information"},{default:l(()=>[a(Z,{ref_key:"base",ref:e},null,512)]),_:1}),Ue,a(C,{tit:"\u8A02\u55AE\u8A73\u60C5 Order details"},{default:l(()=>[a(re,{ref_key:"detaii",ref:u},null,512)]),_:1}),Re,a(C,{tit:"\u6536\u4EF6\u4EBA\u4FE1\u606F Recipient information"},{default:l(()=>[a(le,{ref_key:"reciv",ref:n},null,512)]),_:1}),I(i).is_admin?(y(),A("div",Oe,[Te,a(C,{tit:"\u9001\u8CA8\u54E1\u4FE1\u606F Deliveryman information"},{default:l(()=>[a(Ve,{ref_key:"deiiver",ref:d},null,512)]),_:1}),Me,t("nav",Ne,[a(pe,{ref_key:"finished",ref:s},null,512)])])):(y(),A("div",je,[t("div",{ref_key:"deiiver",ref:d},null,512),t("div",{ref_key:"finished",ref:s},null,512)]))]),_:1})]),_:1})}}});export{We as default};
