import{d as g,z as R,i as O,s as $,k as p,h as b,o as r,c as l,a as e,f as a,w as m,x as C,A as x,e as E,b as y,C as L,_ as M,M as D,t as h,H as G,v as U,l as k,F as P,r as S,S as F,L as H,n as W,B as z,u as T,G as Y}from"./index.66b5c4df.js";import{_ as q}from"./CoOrderFpCont.vue_vue_type_script_setup_true_lang.02fb0d00.js";import{o as j}from"./order.d0e1392d.js";const J={key:0,class:"panner"},K=e("h2",null,"\u4FEE\u6539\u5C0E\u5165\u524D\u7684\u8A02\u55AE\xA0Edit",-1),Q={key:0,class:"pb_x2 pt_x"},X={class:"f-row"},Z=e("div",{class:"py_row"},null,-1),ee={class:"f-row"},se=e("div",{class:"py_row"},null,-1),te={class:"f-row"},ne=e("div",{class:"py_row"},null,-1),oe={class:"fx-c upper"},ie=g({__name:"CuOibTdForm",emits:["refresh"],setup(i,{emit:t}){const n=R(),u=O(),c=O().one,s=$({create_date:"",order_id:"",index:0,waybill_no:"",order_group:"",customer_name:"",customer_phone_no:"",address:""}),o=$({create_date:!1,order_id:!1,waybill_no:!1,order_group:!1,customer_name:!1,customer_phone_no:!1,address:!1}),d=function(){let w=!0;if(s.order_id)o.order_id=!1;else return o.order_id=!0,!1;if(s.waybill_no)o.waybill_no=!1;else return o.waybill_no=!0,!1;if(s.customer_phone_no)o.customer_phone_no=!1;else return o.customer_phone_no=!0,!1;return Object.values(o).map(_=>{_&&(w=!1)}),w},f=()=>{d()&&(t("refresh",s),u.do_mod(0))};return(w=>{if(w&&w.order_id){for(let _ in s)s[_]=w[_];L(()=>{w.create_date&&n.value.ioc(w.create_date)})}else u.do_mod(0)})(c),(w,_)=>{const I=p("fn-time"),B=p("eos-input"),N=p("my-button");return b(c)?(r(),l("div",J,[K,s.order_id?(r(),l("div",Q,[e("div",X,[a(B,{class:"w-50",header:"\u8A02\u55AE\u65E5\u671F Order date"},{default:m(()=>[a(I,{ref_key:"timed",ref:n,onResuit:_[0]||(_[0]=v=>s.create_date=v)},null,512)]),_:1}),a(B,{class:"w-50",is_err:o.order_id,header:"\u8A02\u55AE\u7DE8\u865F Order no."},{default:m(()=>[C(e("input",{class:"input","onUpdate:modelValue":_[1]||(_[1]=v=>s.order_id=v),placeholder:"\u8ACB\u8F38\u5165 Please Enter"},null,512),[[x,s.order_id]])]),_:1},8,["is_err","header"])]),Z,e("div",ee,[a(B,{class:"w-50",is_err:o.waybill_no,header:"\u904B\u55AE\u7DE8\u865F Waybill number"},{default:m(()=>[C(e("input",{class:"input","onUpdate:modelValue":_[2]||(_[2]=v=>s.waybill_no=v),placeholder:"\u8ACB\u8F38\u5165 Please Enter"},null,512),[[x,s.waybill_no]])]),_:1},8,["is_err"]),a(B,{class:"w-50",is_err:o.order_group,header:"\u8A02\u55AE\u7D44 Order group"},{default:m(()=>[C(e("input",{class:"input","onUpdate:modelValue":_[3]||(_[3]=v=>s.order_group=v),placeholder:"\u8ACB\u8F38\u5165 Please Enter"},null,512),[[x,s.order_group]])]),_:1},8,["is_err"])]),se,e("div",te,[a(B,{class:"w-50",is_err:o.customer_name,header:"\u6536\u4EF6\u4EBA Recipient"},{default:m(()=>[C(e("input",{class:"input","onUpdate:modelValue":_[4]||(_[4]=v=>s.customer_name=v),placeholder:"\u8ACB\u8F38\u5165 Please Enter"},null,512),[[x,s.customer_name]])]),_:1},8,["is_err"]),a(B,{class:"w-50",is_err:o.customer_phone_no,header:"\u96FB\u8A71\u865F\u78BC Phone number"},{default:m(()=>[C(e("input",{class:"input","onUpdate:modelValue":_[5]||(_[5]=v=>s.customer_phone_no=v),placeholder:"\u8ACB\u8F38\u5165 Please Enter"},null,512),[[x,s.customer_phone_no]])]),_:1},8,["is_err"])]),ne,a(B,{class:"w-100",header:"\u5730\u5740 Address"},{default:m(()=>[C(e("input",{class:"input","onUpdate:modelValue":_[6]||(_[6]=v=>s.address=v),placeholder:"\u8ACB\u8F38\u5165 Please Enter"},null,512),[[x,s.address]])]),_:1})])):E("",!0),e("div",oe,[a(N,{onClick:f},{default:m(()=>[y("\u5132\u5B58")]),_:1})])])):E("",!0)}}}),ae={},ue={class:"tr"},re=D('<div class="w-11"> \u8A02\u55AE\u65E5\u671F<br><p class="tr-en">Order date</p></div><div class="w-14"> \u5BA2\u6236\u904B\u55AE\u7DE8\u865F<br><p class="tr-en">Waybill number</p></div><div class="w-8"> \u8A02\u55AE\u7D44<br><p class="tr-en">Group</p></div><div class="w-11"> \u8A02\u55AE\u7DE8\u865F<br><p class="tr-en">Order No.</p></div><div class="w-12"> \u6536\u4EF6\u4EBA<br><p class="tr-en">Recipient</p></div><div class="w-11"> \u96FB\u8A71<br><p class="tr-en">Phone</p></div><div class="w-30"> \u5730\u5740<br><p class="tr-en">Address/Locations</p></div><div class="w-4"></div>',8),ce=[re];function le(i,t){return r(),l("nav",ue,ce)}const de=M(ae,[["render",le]]),_e={class:"td"},me={class:"w-11"},pe={class:"w-14"},he={class:"w-8"},fe={class:"w-11"},ve={class:"w-12"},ye={class:"w-11"},be={class:"w-30"},we={class:"w-4 t-r"},$e=g({__name:"CuOibIistTd",props:{idx:null,one:null},setup(i){const t=i,n=O();return(u,c)=>{const s=p("eos-tabie-opera");return r(),l("div",_e,[e("div",me,h(i.one.create_date),1),e("div",pe,h(i.one.waybill_no),1),e("div",he,h(i.one.order_group),1),e("div",fe,[e("div",{onClick:c[0]||(c[0]=()=>{b(n).do_one(i.one),b(n).do_panner(1)}),class:"pri hand"},h(i.one.order_id),1)]),e("div",ve,h(i.one.customer_name),1),e("div",ye,h(i.one.customer_phone_no),1),e("div",be,h(i.one.address),1),e("div",we,[a(s,{vais:"edit",is_icon:!0,onEdit:c[1]||(c[1]=()=>{b(n).do_one(t.one),b(n).do_mod(1)})})])])}}}),V=g({__name:"CuOibFixPanner",setup(i){const t=G(O()),n=R();return U(t.one,u=>n.value=u),(u,c)=>{const s=p("eos-fixed-panner"),o=p("eos-empty");return n.value&&n.value.order_id?(r(),k(s,{key:0},{default:m(()=>[a(q,{one:n.value},null,8,["one"])]),_:1})):(r(),k(s,{key:1},{default:m(()=>[a(o)]),_:1}))}}}),ge={class:"tabie"},Ae={class:"td-wrap"},Be={key:0,class:"pt"},Ee=g({__name:"CuOibIist",props:{many:null},setup(i){const t=i;U(t.many,(s,o)=>{u.pagina(0,0,n.imit)});const n=$({items:[],imit:25,ioading:!1,start:0}),u=$({pagina:(s,o,d)=>{n.ioading=!0,n.start=o,n.imit=d,n.items=t.many.slice(o,o+d),n.ioading=!1}}),c=s=>{n.items.map((o,d)=>{o.index===s.index&&(n.items[d]=s)})};return(s,o)=>{const d=p("eos-tabie-ioading"),f=p("eos-pagination"),A=p("eos-mod");return r(),l("div",null,[e("div",ge,[a(de),a(d,{ioad:b(n).ioading,many:i.many},{default:m(()=>[e("nav",Ae,[(r(!0),l(P,null,S(b(n).items,(w,_)=>(r(),l("div",{key:_},[a($e,{one:w,idx:_},null,8,["one","idx"])]))),128))])]),_:1},8,["ioad","many"])]),i.many&&i.many.length>0?(r(),l("div",Be,[a(f,{onResuit:b(u).pagina,count:i.many.length,_limit:b(n).imit},null,8,["onResuit","count","_limit"])])):E("",!0),a(A,null,{default:m(()=>[a(ie,{onRefresh:c})]),_:1}),a(V)])}}}),Ce=D('<div class="sun"><p>\u8ACB\u4E0B\u8F09\u6700\u65B0\u7248\u672C\u4F7F\u7528\u6279\u91CF\u4E0B\u55AE\uFF0C\u5426\u5247\u5C07\u4E0D\u80FD\u6210\u529F\u4E0B\u55AE</p><p>Please download the latesttemplate and use batch order,</p><p>otherwise you will not be able to place an order successfully.</p><div>\xA0</div><p>\u6279\u91CF\u4E0B\u55AE\u6559\u5B78\u5982\u4E0B: <span class="pri">HTTP://YOUTUBE.COM</span></p><p>Batch ordering teaching is as follows: <span class="pri">HTTP://YOUTUBE.COM</span></p></div><div class="pt"></div><div class="b"><p>\u6279\u91CF\u4E0B\u55AE\u8A66\u7B97\u7BC4\u672C: <span class="pri">\u4E0B\u8F09\u5831\u8868</span></p><p>Batch Trial Balance Template: <span class="pri">Download Report</span></p></div><div>\xA0</div>',4),xe={class:"fx-l"},Fe=e("div",{class:"b pl_x2"},[e("p",null,"\u8A3B\u610F\uFF1A\u6BCF\u6B21\u5EFA\u8B70\u4E0A\u50B3\u4E0D\u591A\u65BC500\u884C\u8A18\u9304"),e("p",null,"Note: It is recommended to upload no more than 500 records each time.")],-1),ke=g({__name:"CustomUpioadBase",emits:["resuit"],setup(i,{emit:t}){const n=$({header:["create_date","waybill_no","order_group","order_id","customer_name","customer_phone_no","address","route","district","product_content","weight","total_item_count","delivery_charge","collection_payment","remarks"]}),u=async s=>new Promise(o=>{let d=[];for(let f=0;f<s.length;f++)d.push(c.ser_one(s[f],f));o(d)}),c=$({ser_one:(s,o)=>(s.index=o,s.weight=F.parse_int(s.weight),s.delivery_charge=F.parse_int(s.delivery_charge),s.total_item_count=F.parse_int(s.total_item_count),s.collection_payment=F.parse_int(s.collection_payment),s.create_date=s.create_date?H.fmt_time(s.create_date):"",s),reciv:async s=>{t("resuit",[]);const o=await F.ioad_by_fiie(s,n.header);t("resuit",await u(o))}});return(s,o)=>{const d=p("eos-upioad-button");return r(),l("div",null,[Ce,e("div",xe,[a(d,{onResuit:c.reciv},null,8,["onResuit"]),Fe])])}}}),Oe={class:"panner"},Pe=e("h4",null,[e("div",null,"\u78BA\u8A8D\u5132\u5B58"),e("div",null,"Confirm Save")],-1),Re=e("div",{class:"pt_x pb_x2 sun"},[e("p",null,"\u5982\u4F60\u78BA\u8A8D\u7121\u8AA4\uFF0C\u8ACB\u5132\u5B58\u81F3\u8A02\u55AE\u5217\u8868\u4E2D"),e("p",null,"If you confirm it correctly, please save it to order management.")],-1),Te={class:"fx-l"},De={class:"pr"},Ue={key:0,class:"righter"},Se={key:0},Ve={key:1},Ie=g({__name:"CustomUpioadConfirm",props:{num:null,totai:null},emits:["save"],setup(i){const t=R(!1);return(n,u)=>{const c=p("my-button"),s=p("eos-aii-button");return r(),l("nav",Oe,[Pe,Re,e("div",Te,[e("div",De,[a(c,{class:W({"btn-die":t.value}),typed:"pri-tin",onClick:u[0]||(u[0]=o=>t.value=!0)},{default:m(()=>[y("\u4E0B\u4E00\u6B65 Next")]),_:1},8,["class"])]),t.value?(r(),l("div",Ue,[i.totai?(r(),k(c,{key:0},{default:m(()=>[y(" \u4E0A\u50B3\u9032\u5EA6:\xA0\xA0 "),i.num?(r(),l("span",Se,h(i.num<i.totai?i.num:i.totai),1)):(r(),l("span",Ve,"0")),y(" \xA0/\xA0"+h(i.totai),1)]),_:1})):(r(),k(s,{key:1,vais:"save",onSave:u[1]||(u[1]=o=>n.$emit("save")),is_en:!0}))])):E("",!0)])])}}}),Ne={class:"tr"},Le=e("div",{class:"w-11"},[y(" \u8A02\u55AE\u65E5\u671F"),e("br"),e("p",{class:"tr-en"},"Order date")],-1),Me=e("div",{class:"w-14"},[y(" \u5BA2\u6236\u904B\u55AE\u7DE8\u865F"),e("br"),e("p",{class:"tr-en"},"Waybill number")],-1),Ge=e("div",{class:"w-8"},[y(" \u8A02\u55AE\u7D44"),e("br"),e("p",{class:"tr-en"},"Group")],-1),He=e("div",{class:"w-10"},[y(" \u8A02\u55AE\u7DE8\u865F"),e("br"),e("p",{class:"tr-en"},"Order No.")],-1),We=e("div",{class:"w-11"},[y(" \u6536\u4EF6\u4EBA"),e("br"),e("p",{class:"tr-en"},"Reciver")],-1),ze=e("div",{class:"w-11"},[y(" \u96FB\u8A71"),e("br"),e("p",{class:"tr-en"},"Phone")],-1),Ye=e("div",{class:"w-32"},[y(" \u5730\u5740"),e("br"),e("p",{class:"tr-en"},"Address/Locations")],-1),qe=e("div",{class:"w-4"},null,-1),je=g({__name:"CuOibIistSavedTr",props:{aii:null},setup(i){return(t,n)=>{const u=p("eos-tabie-choose-item-tr");return r(),l("nav",Ne,[a(u,{aii:i.aii},{default:m(()=>[Le,Me,Ge,He,We,ze,Ye,qe]),_:1},8,["aii"])])}}}),Je=e("div",{class:"py_t"},null,-1),Ke=g({__name:"CuOibIistSavedBar",props:{aii:null},setup(i){const t=i,n=z(),u=T(),c=$({p_aii:()=>{const s=t.aii.choose?t.aii.choose:[];if(s&&s.length>0){Y().do_orders(s);const o=u.resolve({path:"/admin/order_iist/print_muiti",query:{from:n.path}});window.open(o.href,"_blank")}}});return(s,o)=>{const d=p("my-button");return r(),l(P,null,[a(d,{onClick:b(c).p_aii,typed:"pri-tin",icon:"bi bi-file-earmark-pdf"},{default:m(()=>[y(" \u5217\u5370 Print ")]),_:1},8,["onClick"]),Je],64)}}}),Qe={class:"td"},Xe={class:"w-11"},Ze={class:"w-14"},es={class:"w-8"},ss={class:"w-10"},ts={class:"w-11"},ns={class:"w-11"},os={class:"w-32"},is={class:"w-4 t-r"},as=g({__name:"CuOibIistSavedTd",props:{idx:null,one:null,choose:null},setup(i){const t=O();return T(),(n,u)=>{const c=p("eos-tabie-opera"),s=p("eos-tabie-choose-item-td");return r(),l("div",Qe,[a(s,{one:i.one,choose:i.choose},{default:m(()=>[e("div",Xe,h(i.one.create_date),1),e("div",Ze,h(i.one.waybill_no),1),e("div",es,h(i.one.order_group),1),e("div",ss,[e("span",{class:"pri hand",onClick:u[0]||(u[0]=()=>{b(t).do_one(i.one),b(t).do_panner(1)})},h(i.one.order_id),1)]),e("div",ts,h(i.one.customer_name),1),e("div",ns,h(i.one.customer_phone_no),1),e("div",os,h(i.one.address),1),e("div",is,[a(c,{vais:"edit",is_icon:!0})])]),_:1},8,["one","choose"])])}}}),us={class:"panner"},rs={class:"tabie"},cs={class:"td-wrap"},ls={key:0,class:"pt"},ds=g({__name:"CuOibSavedIist",props:{success:null},setup(i){const t=i,n=$({choose:[],start:0,imit:25,ioading:!0,page:{total:1},condition:{},many:[]});n.many=t.success,n.ioading=!1;const u=$({pagina:(c,s,o)=>{n.ioading=!0,n.start=s,n.imit=o,n.many=t.success.slice(s,s+o),n.ioading=!1}});return(c,s)=>{const o=p("eos-tabie-ioading"),d=p("eos-pagination");return r(),l("nav",us,[a(Ke,{aii:n},null,8,["aii"]),e("div",rs,[a(je,{aii:n},null,8,["aii"]),a(o,{ioad:n.ioading,many:n.many},{default:m(()=>[e("nav",cs,[(r(!0),l(P,null,S(n.many,(f,A)=>(r(),l("div",{key:A},[a(as,{one:f,idx:A,choose:n.choose},null,8,["one","idx","choose"])]))),128))])]),_:1},8,["ioad","many"])]),i.success&&i.success.length>0?(r(),l("div",ls,[a(d,{mode:0,onResuit:u.pagina,count:i.success.length,_limit:n.imit},null,8,["onResuit","count","_limit"])])):E("",!0)])}}}),_s=e("div",{class:"py_row"},null,-1),ms={key:0},ps=e("div",{class:"py_row"},null,-1),hs={key:1},fs=e("div",{class:"py_row"},null,-1),vs={class:"fx-r"},$s=g({__name:"CuOrderInBuik",setup(i){T();const t=$({is_saved:!1,num:0,upiading:!1,iong:10,many:[],success:[]}),n=async(c,s)=>new Promise(o=>{const d=u.elastic(c);d.length>0?j.imported(d,"").then(f=>{t.success.push(...f),t.num+=t.iong,t.num>t.many.length&&(t.num=t.many.length),o(!0)}):o(!0)}),u=$({elastic:c=>{let s=[];return c.map(o=>{o&&o.waybill_no&&s.push(o)}),s},save:async()=>{t.upiading=!0,await F.insert_many(t.many,n,t.iong),t.success.length>0&&(t.is_saved=!0,t.upiading=!1,t.many=[])},compiete:()=>{t.is_saved=!1,t.success=[]}});return(c,s)=>{const o=p("eos-form-paner"),d=p("my-button"),f=p("eos-iayout-screen-siot");return r(),l(P,null,[a(f,{is_en:!0},{cont:m(()=>[a(o,null,{default:m(()=>[a(ke,{onResuit:s[0]||(s[0]=A=>{t.many=A,u.compiete()}),ref:"base"},null,512)]),_:1}),_s,t.is_saved?(r(),l("div",hs,[a(ds,{success:t.success},null,8,["success"]),fs,e("div",vs,[a(d,{onClick:s[1]||(s[1]=A=>u.compiete())},{default:m(()=>[y("\u5B8C\u6210\u4E0A\u50B3 Complete")]),_:1})])])):(r(),l("div",ms,[t.many&&t.many.length>0?(r(),k(o,{key:0},{default:m(()=>[a(Ee,{many:t.many},null,8,["many"])]),_:1})):E("",!0),ps,t.many&&t.many.length>0?(r(),k(Ie,{key:1,num:t.num,totai:t.upiading?t.many.length:0,onSave:u.save},null,8,["num","totai","onSave"])):E("",!0)]))]),_:1}),a(V)],64)}}});export{$s as default};
