import{d as g,A as R,i as P,v as $,k as p,h as w,o as u,c as m,a as e,g as i,w as _,y as E,B as C,e as x,b,D as H,_ as M,O as T,t as h,L as W,x as U,l as k,F as O,r as V,J as F,I as G,n as Y,C as I,u as D,H as q}from"./index.1d5a22a8.js";import{_ as z}from"./CoOrderFpCont.vue_vue_type_script_setup_true_lang.9ac24038.js";import{o as J}from"./order.11522f45.js";const j={key:0,class:"panner"},K=e("h2",null,"\u4FEE\u6539\u5C0E\u5165\u524D\u7684\u8A02\u55AE\xA0Edit",-1),Q={key:0,class:"pb_x2 pt_x"},X={class:"f-row"},Z=e("div",{class:"py_row"},null,-1),ee={class:"f-row"},se=e("div",{class:"py_row"},null,-1),te={class:"f-row"},ne=e("div",{class:"py_row"},null,-1),oe={class:"f-row"},ie=e("div",{class:"py_row"},null,-1),ae={class:"fx-c upper"},ue=g({__name:"CuOibTdForm",emits:["refresh"],setup(n,{emit:r}){const s=R(),c=P(),a=P().one,t=$({receipt_date:"",order_id:"",index:0,waybill_no:"",order_group:"",total_item_count:0,customer_name:"",customer_phone_no:"",address:""}),o=$({receipt_date:!1,order_id:!1,waybill_no:!1,order_group:!1,total_item_count:!1,customer_name:!1,customer_phone_no:!1,address:!1}),l=function(){let y=!0;if(t.order_id)o.order_id=!1;else return o.order_id=!0,!1;if(t.waybill_no)o.waybill_no=!1;else return o.waybill_no=!0,!1;if(t.customer_phone_no)o.customer_phone_no=!1;else return o.customer_phone_no=!0,!1;return Object.values(o).map(d=>{d&&(y=!1)}),y},f=()=>{l()&&(r("refresh",t),c.do_mod(0))};return(y=>{if(y&&y.order_id){for(let d in t)t[d]=y[d];H(()=>{y.receipt_date&&s.value.ioc(y.receipt_date)})}else c.do_mod(0)})(a),(y,d)=>{const N=p("fn-time"),B=p("eos-input"),L=p("my-button");return w(a)?(u(),m("div",j,[K,t.order_id?(u(),m("div",Q,[e("div",X,[i(B,{class:"w-50",header:"\u6536\u4EF6\u6642\u9593 Receipt time"},{default:_(()=>[i(N,{ref_key:"timed",ref:s,onResuit:d[0]||(d[0]=v=>t.receipt_date=v)},null,512)]),_:1}),i(B,{class:"w-50",is_err:o.order_id,header:"\u8A02\u55AE\u7DE8\u865F Order no."},{default:_(()=>[E(e("input",{class:"input","onUpdate:modelValue":d[1]||(d[1]=v=>t.order_id=v),placeholder:"\u8ACB\u8F38\u5165 Please Enter"},null,512),[[C,t.order_id]])]),_:1},8,["is_err","header"])]),Z,e("div",ee,[i(B,{class:"w-50",is_err:o.waybill_no,header:"\u904B\u55AE\u7DE8\u865F Waybill number"},{default:_(()=>[E(e("input",{class:"input","onUpdate:modelValue":d[2]||(d[2]=v=>t.waybill_no=v),placeholder:"\u8ACB\u8F38\u5165 Please Enter"},null,512),[[C,t.waybill_no]])]),_:1},8,["is_err"]),i(B,{class:"w-50",is_err:o.order_group,header:"\u8A02\u55AE\u7D44 Order group"},{default:_(()=>[E(e("input",{class:"input","onUpdate:modelValue":d[3]||(d[3]=v=>t.order_group=v),placeholder:"\u8ACB\u8F38\u5165 Please Enter"},null,512),[[C,t.order_group]])]),_:1},8,["is_err"])]),se,e("div",te,[i(B,{class:"w-50",is_err:o.total_item_count,header:"\u4EF6\u6578 Package"},{default:_(()=>[E(e("input",{class:"input",type:"number","onUpdate:modelValue":d[4]||(d[4]=v=>t.total_item_count=v),placeholder:"\u8ACB\u8F38\u5165 Please Enter"},null,512),[[C,t.total_item_count]])]),_:1},8,["is_err"])]),ne,e("div",oe,[i(B,{class:"w-50",is_err:o.customer_name,header:"\u6536\u4EF6\u4EBA Recipient"},{default:_(()=>[E(e("input",{class:"input","onUpdate:modelValue":d[5]||(d[5]=v=>t.customer_name=v),placeholder:"\u8ACB\u8F38\u5165 Please Enter"},null,512),[[C,t.customer_name]])]),_:1},8,["is_err"]),i(B,{class:"w-50",is_err:o.customer_phone_no,header:"\u96FB\u8A71\u865F\u78BC Phone number"},{default:_(()=>[E(e("input",{class:"input","onUpdate:modelValue":d[6]||(d[6]=v=>t.customer_phone_no=v),placeholder:"\u8ACB\u8F38\u5165 Please Enter"},null,512),[[C,t.customer_phone_no]])]),_:1},8,["is_err"])]),ie,i(B,{class:"w-100",header:"\u5730\u5740 Address"},{default:_(()=>[E(e("textarea",{class:"input","onUpdate:modelValue":d[7]||(d[7]=v=>t.address=v),placeholder:"\u8ACB\u8F38\u5165 Please Enter"},null,512),[[C,t.address]])]),_:1})])):x("",!0),e("div",ae,[i(L,{onClick:f},{default:_(()=>[b("\u5132\u5B58")]),_:1})])])):x("",!0)}}}),re={},ce={class:"tr"},le=T('<div class="w-11"> \u6536\u4EF6\u6642\u9593<br><p class="tr-en">Receipt time</p></div><div class="w-14"> \u5BA2\u6236\u904B\u55AE\u7DE8\u865F<br><p class="tr-en">Waybill number</p></div><div class="w-8"> \u8A02\u55AE\u7D44<br><p class="tr-en">Group</p></div><div class="w-11"> \u8A02\u55AE\u7DE8\u865F<br><p class="tr-en">Order No.</p></div><div class="w-12"> \u6536\u4EF6\u4EBA<br><p class="tr-en">Recipient</p></div><div class="w-11"> \u96FB\u8A71<br><p class="tr-en">Phone</p></div><div class="w-8"> \u4EF6\u6578<br><p class="tr-en">Package</p></div><div class="w-22"> \u5730\u5740<br><p class="tr-en">Address/Locations</p></div><div class="w-4"></div>',9),de=[le];function _e(n,r){return u(),m("nav",ce,de)}const me=M(re,[["render",_e]]),pe={class:"td"},he={class:"w-11"},fe={class:"w-14"},ve={class:"w-8"},ye={class:"w-11"},be={class:"w-12"},we={class:"w-11"},$e={class:"w-8"},ge={class:"w-22"},Ae={class:"w-4 t-r"},Be=g({__name:"CuOibIistTd",props:{idx:null,one:null},setup(n){const r=n,s=P();return(c,a)=>{const t=p("eos-tabie-opera");return u(),m("div",pe,[e("div",he,h(n.one.receipt_date),1),e("div",fe,h(n.one.waybill_no),1),e("div",ve,h(n.one.order_group),1),e("div",ye,[e("div",{onClick:a[0]||(a[0]=()=>{w(s).do_one(n.one),w(s).do_panner(1)}),class:"pri hand"},h(n.one.order_id),1)]),e("div",be,h(n.one.customer_name),1),e("div",we,h(n.one.customer_phone_no),1),e("div",$e,h(n.one.total_item_count),1),e("div",ge,h(n.one.address),1),e("div",Ae,[i(t,{vais:"edit",is_icon:!0,onEdit:a[1]||(a[1]=()=>{w(s).do_one(r.one),w(s).do_mod(1)})})])])}}}),S=g({__name:"CuOibFixPanner",setup(n){const r=W(P()),s=R();return U(r.one,c=>s.value=c),(c,a)=>{const t=p("eos-fixed-panner"),o=p("eos-empty");return s.value&&s.value.order_id?(u(),k(t,{key:0},{default:_(()=>[i(z,{one:s.value},null,8,["one"])]),_:1})):(u(),k(t,{key:1},{default:_(()=>[i(o)]),_:1}))}}}),Ee={class:"tabie"},Ce={class:"td-wrap"},xe={key:0,class:"pt"},Fe=g({__name:"CuOibIist",props:{many:null},setup(n){const r=n;U(r.many,(t,o)=>{c.pagina(0,0,s.imit)});const s=$({items:[],imit:50,ioading:!1,start:0}),c=$({pagina:(t,o,l)=>{s.ioading=!0,s.start=o,s.imit=l,s.items=r.many.slice(o,o+l),s.ioading=!1}}),a=t=>{s.items.map((o,l)=>{o.index===t.index&&(s.items[l]=t)})};return(t,o)=>{const l=p("eos-tabie-ioading"),f=p("eos-pagination"),A=p("eos-mod");return u(),m("div",null,[e("div",Ee,[i(me),i(l,{ioad:w(s).ioading,many:n.many},{default:_(()=>[e("nav",Ce,[(u(!0),m(O,null,V(w(s).items,(y,d)=>(u(),m("div",{key:d},[i(Be,{one:y,idx:d},null,8,["one","idx"])]))),128))])]),_:1},8,["ioad","many"])]),n.many&&n.many.length>0?(u(),m("div",xe,[i(f,{mode:0,onResuit:w(c).pagina,count:n.many.length,_limit:w(s).imit},null,8,["onResuit","count","_limit"])])):x("",!0),i(A,null,{default:_(()=>[i(ue,{onRefresh:a})]),_:1}),i(S)])}}}),ke=T('<div class="sun"><p>\u8ACB\u4E0B\u8F09\u6700\u65B0\u7248\u672C\u4F7F\u7528\u6279\u91CF\u4E0B\u55AE\uFF0C\u5426\u5247\u5C07\u4E0D\u80FD\u6210\u529F\u4E0B\u55AE</p><p>Please download the latesttemplate and use batch order,</p><p>otherwise you will not be able to place an order successfully.</p><div>\xA0</div><p>\u6279\u91CF\u4E0B\u55AE\u6559\u5B78\u5982\u4E0B: <span class="pri">HTTP://YOUTUBE.COM</span></p><p>Batch ordering teaching is as follows: <span class="pri">HTTP://YOUTUBE.COM</span></p></div><div class="pt"></div><div class="b"><p>\u6279\u91CF\u4E0B\u55AE\u8A66\u7B97\u7BC4\u672C: <span class="pri">\u4E0B\u8F09\u5831\u8868</span></p><p>Batch Trial Balance Template: <span class="pri">Download Report</span></p></div><div>\xA0</div>',4),Pe={class:"fx-l"},Oe=e("div",{class:"b pl_x2"},[e("p",null,"\u8A3B\u610F\uFF1A\u6BCF\u6B21\u5EFA\u8B70\u4E0A\u50B3\u4E0D\u591A\u65BC500\u884C\u8A18\u9304"),e("p",null,"Note: It is recommended to upload no more than 500 records each time.")],-1),Re=g({__name:"CustomUpioadBase",emits:["resuit"],setup(n,{emit:r}){const s=$({header:["receipt_date","waybill_no","order_group","order_id","customer_name","customer_phone_no","address","route","district","product_content","weight","total_item_count","delivery_charge","collection_payment","remarks"]}),c=async t=>new Promise(o=>{let l=[];for(let f=0;f<t.length;f++)l.push(a.ser_one(t[f],f));o(l)}),a=$({ser_one:(t,o)=>(t.index=o,t.weight=F.parse_int(t.weight),t.delivery_charge=F.parse_int(t.delivery_charge),t.total_item_count=F.parse_int(t.total_item_count),t.total_item_count||(t.total_item_count=1),t.collection_payment=F.parse_int(t.collection_payment),t.receipt_date=t.receipt_date?G.fmt_time(t.receipt_date):"",t),reciv:async t=>{r("resuit",[]);const o=await F.ioad_by_fiie(t,s.header);r("resuit",await c(o))}});return(t,o)=>{const l=p("eos-upioad-button");return u(),m("div",null,[ke,e("div",Pe,[i(l,{onResuit:a.reciv},null,8,["onResuit"]),Oe])])}}}),De={class:"panner"},Te=e("h4",null,[e("div",null,"\u78BA\u8A8D\u5132\u5B58"),e("div",null,"Confirm Save")],-1),Ue=e("div",{class:"pt_x pb_x2 sun"},[e("p",null,"\u5982\u4F60\u78BA\u8A8D\u7121\u8AA4\uFF0C\u8ACB\u5132\u5B58\u81F3\u8A02\u55AE\u5217\u8868\u4E2D"),e("p",null,"If you confirm it correctly, please save it to order management.")],-1),Ve={class:"fx-l"},Ie={class:"pr"},Se={key:0,class:"righter"},Ne={key:0},Le={key:1},He=g({__name:"CustomUpioadConfirm",props:{num:null,totai:null},emits:["save"],setup(n){const r=R(!1);return(s,c)=>{const a=p("my-button"),t=p("eos-aii-button");return u(),m("nav",De,[Te,Ue,e("div",Ve,[e("div",Ie,[i(a,{class:Y({"btn-die":r.value}),typed:"pri-tin",onClick:c[0]||(c[0]=o=>r.value=!0)},{default:_(()=>[b("\u4E0B\u4E00\u6B65 Next")]),_:1},8,["class"])]),r.value?(u(),m("div",Se,[n.totai?(u(),k(a,{key:0},{default:_(()=>[b(" \u4E0A\u50B3\u9032\u5EA6:\xA0\xA0 "),n.num?(u(),m("span",Ne,h(n.num<n.totai?n.num:n.totai),1)):(u(),m("span",Le,"0")),b(" \xA0/\xA0"+h(n.totai),1)]),_:1})):(u(),k(t,{key:1,vais:"save",onSave:c[1]||(c[1]=o=>s.$emit("save")),is_en:!0}))])):x("",!0)])])}}}),Me={class:"tr"},We=e("div",{class:"w-11"},[b(" \u6536\u4EF6\u6642\u9593"),e("br"),e("p",{class:"tr-en"},"Receipt time")],-1),Ge=e("div",{class:"w-14"},[b(" \u5BA2\u6236\u904B\u55AE\u7DE8\u865F"),e("br"),e("p",{class:"tr-en"},"Waybill number")],-1),Ye=e("div",{class:"w-8"},[b(" \u8A02\u55AE\u7D44"),e("br"),e("p",{class:"tr-en"},"Group")],-1),qe=e("div",{class:"w-10"},[b(" \u8A02\u55AE\u7DE8\u865F"),e("br"),e("p",{class:"tr-en"},"Order No.")],-1),ze=e("div",{class:"w-11"},[b(" \u6536\u4EF6\u4EBA"),e("br"),e("p",{class:"tr-en"},"Reciver")],-1),Je=e("div",{class:"w-11"},[b(" \u96FB\u8A71"),e("br"),e("p",{class:"tr-en"},"Phone")],-1),je=e("div",{class:"w-32"},[b(" \u5730\u5740"),e("br"),e("p",{class:"tr-en"},"Address/Locations")],-1),Ke=e("div",{class:"w-4"},null,-1),Qe=g({__name:"CuOibIistSavedTr",props:{aii:null},setup(n){return(r,s)=>{const c=p("eos-tabie-choose-item-tr");return u(),m("nav",Me,[i(c,{aii:n.aii},{default:_(()=>[We,Ge,Ye,qe,ze,Je,je,Ke]),_:1},8,["aii"])])}}}),Xe=e("div",{class:"py_t"},null,-1),Ze=g({__name:"CuOibIistSavedBar",props:{aii:null},setup(n){const r=n,s=I(),c=D(),a=$({p_aii:()=>{const t=r.aii.choose?r.aii.choose:[];if(t&&t.length>0){q().do_orders(t);const o=c.resolve({path:"/admin/order_iist/print_muiti",query:{from:s.path}});window.open(o.href,"_blank")}}});return(t,o)=>{const l=p("my-button");return u(),m(O,null,[i(l,{onClick:w(a).p_aii,typed:"pri-tin",icon:"bi bi-file-earmark-pdf"},{default:_(()=>[b(" \u5217\u5370 Print ")]),_:1},8,["onClick"]),Xe],64)}}}),es={class:"td"},ss={class:"w-11"},ts={class:"w-14"},ns={class:"w-8"},os={class:"w-10"},is={class:"w-11"},as={class:"w-11"},us={class:"w-32"},rs={class:"w-4 t-r"},cs=g({__name:"CuOibIistSavedTd",props:{idx:null,one:null,choose:null},setup(n){const r=P();return D(),(s,c)=>{const a=p("eos-tabie-opera"),t=p("eos-tabie-choose-item-td");return u(),m("div",es,[i(t,{one:n.one,choose:n.choose},{default:_(()=>[e("div",ss,h(n.one.receipt_date),1),e("div",ts,h(n.one.waybill_no),1),e("div",ns,h(n.one.order_group),1),e("div",os,[e("span",{class:"pri hand",onClick:c[0]||(c[0]=()=>{w(r).do_one(n.one),w(r).do_panner(1)})},h(n.one.order_id),1)]),e("div",is,h(n.one.customer_name),1),e("div",as,h(n.one.customer_phone_no),1),e("div",us,h(n.one.address),1),e("div",rs,[i(a,{vais:"edit",is_icon:!0})])]),_:1},8,["one","choose"])])}}}),ls={class:"panner"},ds={class:"tabie"},_s={class:"td-wrap"},ms={key:0,class:"pt"},ps=g({__name:"CuOibSavedIist",props:{success:null},setup(n){const r=n,s=$({choose:[],start:0,imit:25,ioading:!0,page:{total:1},condition:{},many:[]});s.many=r.success,s.ioading=!1;const c=$({pagina:(a,t,o)=>{s.ioading=!0,s.start=t,s.imit=o,s.many=r.success.slice(t,t+o),s.ioading=!1}});return(a,t)=>{const o=p("eos-tabie-ioading"),l=p("eos-pagination");return u(),m("nav",ls,[i(Ze,{aii:s},null,8,["aii"]),e("div",ds,[i(Qe,{aii:s},null,8,["aii"]),i(o,{ioad:s.ioading,many:s.many},{default:_(()=>[e("nav",_s,[(u(!0),m(O,null,V(s.many,(f,A)=>(u(),m("div",{key:A},[i(cs,{one:f,idx:A,choose:s.choose},null,8,["one","idx","choose"])]))),128))])]),_:1},8,["ioad","many"])]),n.success&&n.success.length>0?(u(),m("div",ms,[i(l,{mode:0,onResuit:c.pagina,count:n.success.length,_limit:s.imit},null,8,["onResuit","count","_limit"])])):x("",!0)])}}}),hs=e("div",{class:"py_row"},null,-1),fs={key:0},vs=e("div",{class:"py_row"},null,-1),ys={key:1},bs=e("div",{class:"py_row"},null,-1),ws={class:"fx-r"},Bs=g({__name:"CuOrderInBuik",setup(n){I();const r=D(),s=$({is_saved:!1,num:0,upiading:!1,iong:10,many:[],success:[]}),c=async(t,o)=>new Promise(l=>{const f=a.elastic(t);f.length>0?J.imported(f,"").then(A=>{s.success.push(...A),s.num+=s.iong,s.num>s.many.length&&(s.num=s.many.length),l(!0)}):l(!0)}),a=$({elastic:t=>{let o=[];return t.map(l=>{l&&l.waybill_no&&o.push(l)}),o},save:async()=>{a.start(),await F.insert_many(s.many,c,s.iong),s.success.length>0&&(s.is_saved=!0,s.upiading=!1,s.many=[])},compiete:()=>{s.is_saved=!1,s.success.length=0},back:()=>r.back(),start:()=>{s.num=0,s.success.length=0,s.upiading=!0}});return(t,o)=>{const l=p("eos-form-paner"),f=p("my-button"),A=p("eos-iayout-screen-siot");return u(),m(O,null,[i(A,{is_en:!0,onBack:a.back},{cont:_(()=>[i(l,null,{default:_(()=>[i(Re,{onResuit:o[0]||(o[0]=y=>{s.many=y,a.compiete()}),ref:"base"},null,512)]),_:1}),hs,s.is_saved?(u(),m("div",ys,[i(ps,{success:s.success},null,8,["success"]),bs,e("div",ws,[i(f,{onClick:o[1]||(o[1]=y=>a.compiete())},{default:_(()=>[b("\u5B8C\u6210\u4E0A\u50B3 Complete")]),_:1})])])):(u(),m("div",fs,[s.many&&s.many.length>0?(u(),k(l,{key:0},{default:_(()=>[i(Fe,{many:s.many},null,8,["many"])]),_:1})):x("",!0),vs,s.many&&s.many.length>0?(u(),k(He,{key:1,num:s.num,totai:s.upiading?s.many.length:0,onSave:a.save},null,8,["num","totai","onSave"])):x("",!0)]))]),_:1},8,["onBack"]),i(S)],64)}}});export{Bs as default};
