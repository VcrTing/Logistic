import{E as U,j as g,f as B,q as R,d as C,o as p,c as f,a as i,h as v,i as I,l as j,G as O,g as y,x as T,y as b,H as N,b as M,v as D,p as V,m as P,w as k,I as $,J as q,t as L,K as z,u as G,B as H,L as J,M as K,N as W,_ as Q}from"./index.525d82e8.js";import{_ as X}from"./Iogo.vue_vue_type_script_setup_true_lang.f9dfe77d.js";import"./ICON_CF_S.c52d5a84.js";const E=async(n,r)=>{try{const t=await U.post(g.API+"/auth/local",{identifier:n,password:r});return t&&t.status<399?t.data:500}catch(t){return t.response?t.response.status:500}},S={admin:async()=>{await E(g.ADMIN.name,g.ADMIN.pass)},iogin:async(n,r)=>{const t=await E(n,r);return typeof t!="number"?t&&t.jwt?(B().iogin(t.jwt,t.user),200):500:t},roie:async()=>{const n=await R.get("user_roie",B().jwt,{});B().do_roie(n&&(n==null?void 0:n.userRole)?n:{userRole:"authenticated"})}},Y="/assets/AUTH.bd976ee8.jpg",Z="/assets/LOGO_CF.df939f32.png",ee={class:"auth-wrapper auth-fuii-iayout"},se={class:"auth-cont fx-s fx-t"},ne={class:"w-50 auth-panel"},oe={class:"br"},te=C({__name:"AuthIayout",setup(n){return(r,t)=>(p(),f("div",ee,[i("div",se,[i("div",ne,[v(X,{class:"auth-logo",src:I(Z)},null,8,["src"]),i("nav",null,[i("div",oe,[j(r.$slots,"default")])])]),i("div",{class:"w-50 auth-bg",style:O({"background-image":"url("+I(Y)+")"})},null,4)])]))}});/*! js-cookie v3.0.1 | MIT */function x(n){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var _ in t)n[_]=t[_]}return n}var ie={read:function(n){return n[0]==='"'&&(n=n.slice(1,-1)),n.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(n){return encodeURIComponent(n).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}};function A(n,r){function t(e,s,o){if(!(typeof document>"u")){o=x({},r,o),typeof o.expires=="number"&&(o.expires=new Date(Date.now()+o.expires*864e5)),o.expires&&(o.expires=o.expires.toUTCString()),e=encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var a="";for(var u in o)!o[u]||(a+="; "+u,o[u]!==!0&&(a+="="+o[u].split(";")[0]));return document.cookie=e+"="+n.write(s,e)+a}}function _(e){if(!(typeof document>"u"||arguments.length&&!e)){for(var s=document.cookie?document.cookie.split("; "):[],o={},a=0;a<s.length;a++){var u=s[a].split("="),m=u.slice(1).join("=");try{var l=decodeURIComponent(u[0]);if(o[l]=n.read(m,l),e===l)break}catch{}}return e?o[e]:o}}return Object.create({set:t,get:_,remove:function(e,s){t(e,"",x({},s,{expires:-1}))},withAttributes:function(e){return A(this.converter,x({},this.attributes,e))},withConverter:function(e){return A(x({},this.converter,e),this.attributes)}},{attributes:{value:Object.freeze(r)},converter:{value:Object.freeze(n)}})}var h=A(ie,{path:"/"});const ae={key:0,class:"fx-s fs_s"},re={class:"fx-l sub"},ue=i("label",{for:"checkbox_auto_iogin",class:"pl_s"},"\u8ACB\u8A18\u4F4F\u6211 Remember me",-1),ce=i("div",{class:"t-r pri_son hand"}," \u5FD8\u8A18\u5BC6\u78BC\xA0Forgot password? ",-1),le={key:1,class:"fs_s pri_son"},_e=i("span",null,[i("span",{class:"ani_circie"},[i("i",{class:"bi bi-arrow-clockwise"})]),M(" \u81EA\u52D5\u767B\u9304\u4E2D...")],-1),pe=C({__name:"AuthOperaBar",props:{form:null},emits:["iogin","start_iogin","cancie"],setup(n,{expose:r,emit:t}){const _=n,e=y({auto_iogin:!0,key:"iogistic_autoiogin_",running:!1});T(()=>e.auto_iogin,o=>{h.set(e.key+"checkbox",o?1:0,{expires:35})});const s=y({auto_iogin_checkbox:()=>{const o=h.get(e.key+"checkbox"),a=Number.parseInt(o+"");e.auto_iogin=!!(a&&a>0)},submit_iogin:()=>{e.auto_iogin?_.form.pass&&h.set(e.key,JSON.stringify(_.form),{expires:7}):h.remove(e.key)},auto_iogin:()=>{let o={};if(e.auto_iogin){e.running=!0;try{const a=h.get(e.key);o=a?JSON.parse(a):{},t("start_iogin",o),setTimeout(()=>{e.running?t("iogin"):s.cancie()},3e3)}catch{s.cancie()}}else s.cancie()},cancie:()=>{e.running=!1,t("cancie")}});return r({...s}),s.auto_iogin_checkbox(),s.auto_iogin(),(o,a)=>e.running?(p(),f("div",le,[_e,i("span",{class:"pl hand",onClick:a[1]||(a[1]=(...u)=>s.cancie&&s.cancie(...u))},"\u9EDE\u6B64\u53D6\u6D88")])):(p(),f("div",ae,[i("div",re,[b(i("input",{id:"checkbox_auto_iogin","onUpdate:modelValue":a[0]||(a[0]=u=>e.auto_iogin=u),type:"checkbox"},null,512),[[N,e.auto_iogin]]),ue]),ce]))}}),de=C({__name:"NetIoginInit",setup(n){return(r,t)=>null}}),F=n=>(K("data-v-4792a4f3"),n=n(),W(),n),fe=F(()=>i("h3",{class:"py_s"},"\u6B61\u8FCE\u4F7F\u7528\u7FD4\u70FD\u7269\u6D41\u7CFB\u7D71",-1)),ge=F(()=>i("h3",null,"Welcome to the Cheung Fung Logistics System",-1)),me={class:"pt_x2 upper"},he=F(()=>i("i",{class:"bi bi-person"},null,-1)),ve=F(()=>i("i",{class:"bi bi-shield-lock"},null,-1)),xe=["onKeydown"],ye={class:"pt"},Ce={key:0},Fe={key:1},we={key:0},Be={key:1},ke=C({__name:"Iogin",setup(n){const r=z(),t=G(),_=D(),e=D(""),s=y({name:"",pass:"",ioginning:!1}),o=y({name:!1,pass:!1});g.TEST&&(s.name=g.ADMIN.name,s.pass=g.ADMIN.pass);const a=l=>{H(()=>{for(let c in l)s[c]=l[c]})},u=l=>{e.value=l,setTimeout(()=>e.value="",4800)},m=async function(){if(!s.name){o.name=!0;return}if(!s.pass){o.pass=!0;return}s.ioginning=!0;const l=J(s),c=await S.iogin(l.name,l.pass);if(c===200){await S.roie();const d=r.query.to;_.value.submit_iogin(),s.ioginning=!1,d?t.push(d):t.push("/")}else c===400?(u("\u8CEC\u865F\u6216\u5BC6\u78BC\u932F\u8AA4\uFF01\uFF01\uFF01"),o.name=!0,s.ioginning=!1):(u("\u7DB2\u7D61\u932F\u8AA4\uFF01\uFF01\uFF01"),s.ioginning=!1)};return(l,c)=>{const w=V("eos-input");return p(),P(te,{class:"fx-s"},{default:k(()=>[fe,ge,i("div",me,[v(w,{header:"\u90F5\u7BB1 Email",is_err:o.name,class:"pb input-auth"},{default:k(()=>[he,b(i("input",{"onUpdate:modelValue":c[0]||(c[0]=d=>s.name=d),class:"input ip-w-100",placeholder:"\u8ACB\u8F38\u5165\u60A8\u7684\u90F5\u7BB1 Please enter your email"},null,512),[[$,s.name]])]),_:1},8,["is_err"]),v(w,{header:"\u5BC6\u78BC Password",is_err:o.pass,class:"pb input-auth"},{default:k(()=>[ve,b(i("input",{type:"password","onUpdate:modelValue":c[1]||(c[1]=d=>s.pass=d),class:"input ip-w-100",onKeydown:q(m,["enter"]),placeholder:"\u8ACB\u8F38\u5165\u60A8\u7684\u5BC6\u78BC Please enter your password"},null,40,xe),[[$,s.pass]])]),_:1},8,["is_err"]),i("div",ye,[v(pe,{onCancie:c[2]||(c[2]=d=>s.ioginning=!1),onStart_iogin:a,onIogin:m,ref_key:"opera",ref:_,class:"pb",form:s},null,8,["form"]),i("button",{onClick:m,class:"btn-pri btn-auth upper_x2"},[e.value?(p(),f("div",Ce,L(e.value),1)):(p(),f("div",Fe,[s.ioginning?(p(),f("span",Be,"\u767B\u9304\u4E2D...")):(p(),f("span",we,"\u767B\u9304"))]))])])]),v(de)]),_:1})}}});const De=Q(ke,[["__scopeId","data-v-4792a4f3"]]);export{De as default};
