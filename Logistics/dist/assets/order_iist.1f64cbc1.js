import{d as g,u as D,k as A,O as C,f as k,p as v,o as _,c as h,h as y,w as f,a as e,t as l,i as a,P as T,n as F,e as w,m as x,b as $,K as G,v as I,g as O,Q as B,N as R,F as S,y as P,I as L,z as W,R as M,L as j,M as H,_ as Q,r as K}from"./index.329bf766.js";import{_ as J}from"./EosCompanySwitchDrop.vue_vue_type_script_setup_true_lang.5ffcc518.js";import{_ as X}from"./JsBarcode.vue_vue_type_script_setup_true_lang.8c7f52f1.js";import{L as Y}from"./ICON_CF_S.c52d5a84.js";import{_ as Z}from"./OrderIistFixedPanner.vue_vue_type_script_setup_true_lang.e9c9fc0a.js";import"./company.5c272658.js";import"./CoOrderFpCont.vue_vue_type_script_setup_true_lang.bc89c957.js";const ee={class:"w-9"},te={class:"w-14 pr_s"},ne={class:"w-12 pr_s"},se={class:"w-10 pr"},oe={class:"w-11 px_s fx-l ps-r"},ie=e("i",{class:"bi bi-person-circle"},null,-1),ae=[ie],de={class:"w-10 pr"},re={class:"w-9 pr_s"},_e={class:"w-10"},ce={class:"w-8 pr_s"},le={class:"w-7 fx-r"},ue=e("i",{class:"bi bi-trash"},null,-1),pe=[ue],me=g({__name:"OrderIistTd",props:{idx:null,one:null,aii:null},setup(o){const c=o,u=D(),n=A(),i=C(),t=k().is_admin,s=r=>{!t&&r.is_cancel||(i.do_order(r),c.aii.who.length=0,c.aii.who.push(r),n.do_mod(-200))};return(r,d)=>{const p=v("eos-tabie-opera"),m=v("eos-tabie-choose-item-td");return _(),h("div",{class:F(["td",{"td-kiiied":o.one.kiiied,"td-focus-err":o.one.is_new,"td-succ":o.one.is_complete_list,"td-die":o.one.is_cancel}])},[y(m,{one:o.one,aii:o.aii},{default:f(()=>[e("div",ee,l(a(T).view_time(o.one.create_date,"/")),1),e("div",te,l(o.one.cf_waybill_no),1),e("div",ne,l(o.one.waybill_no),1),e("div",se,l(o.one.order_group),1),e("div",oe,[e("span",{class:F(["order-td-deiivery-icon",{"order-td-deiivery-icon-iive":o.one.delivery_man_info&&o.one.delivery_man_info.id}]),onClick:d[0]||(d[0]=()=>{a(i).do_order(o.one),a(u).push("/admin/order_iist/edit")})},ae,2),e("span",{class:"pri hand",onClick:d[1]||(d[1]=()=>{a(i).do_order(o.one),a(n).do_panner(1),a(i).read(o.one.id,o.one.is_new),o.one.is_new=!1})},l(o.one.order_id),1)]),e("div",de,l(a(T).view_time(o.one.delivery_date,"/")),1),e("div",re,l(a(T).view_time(o.one.receipt_date,"/")),1),e("div",_e,l(o.one.customer_name),1),e("div",ce,l(o.one.customer_phone_no),1),e("div",le,[a(t)?w("",!0):(_(),h("span",{key:0,class:F(["px_s",{err_son:!o.one.is_cancel,sus_son:o.one.is_cancel}]),onClick:d[2]||(d[2]=E=>s(o.one))},pe,2)),y(p,{is_icon:!0,vais:a(t)?"trash_edit_print":"edit_print",onEdit:d[3]||(d[3]=()=>{a(i).do_order(o.one),a(u).push("/admin/order_iist/edit")}),onTrash:d[4]||(d[4]=E=>s(o.one)),onPrint:d[5]||(d[5]=()=>{a(i).do_order(o.one),a(n).do_mod(1),a(i).do_orders_print([o.one]),a(i).read(o.one.id,o.one.is_new),o.one.is_new=!1})},null,8,["vais"])])]),_:1},8,["one","aii"])],2)}}}),he={class:"tr"},ye=e("div",{class:"w-9"},[$(" \u5275\u5EFA\u65E5\u671F"),e("br"),e("p",{class:"tr-en"},"Create date")],-1),fe=e("div",{class:"w-14"},[$(" \u7FD4\u70FD\u904B\u55AE\u865F\u78BC"),e("br"),e("p",{class:"tr-en"},"CF waybill number")],-1),ve=e("div",{class:"w-12"},[$(" \u5BA2\u6236\u904B\u55AE\u7DE8\u865F"),e("br"),e("p",{class:"tr-en"},"Waybill number")],-1),be=e("div",{class:"w-10"},[$(" \u8A02\u55AE\u7D44"),e("br"),e("p",{class:"tr-en"},"Group")],-1),$e=e("div",{class:"w-11"},[$(" \u8A02\u55AE\u7DE8\u865F"),e("br"),e("p",{class:"tr-en"},"Order No.")],-1),xe=e("div",{class:"w-10"},[$(" \u6D3E\u9001\u65E5\u671F"),e("br"),e("p",{class:"tr-en"},"Delivery date")],-1),we=e("div",{class:"w-9"},[$(" \u8A02\u55AE\u65E5\u671F"),e("br"),e("p",{class:"tr-en"},"Order date")],-1),ge=e("div",{class:"w-10"},[$(" \u6536\u4EF6\u4EBA"),e("br"),e("p",{class:"tr-en"},"Recipient")],-1),Ee=e("div",{class:"w-8"},[$(" \u6536\u4EF6\u96FB\u8A71"),e("br"),e("p",{class:"tr-en"},"Phone")],-1),ke={class:"w-7 fx-r"},Ae=g({__name:"OrderIistTr",props:{aii:null},setup(o){return(c,u)=>{const n=v("eos-go-button"),i=v("eos-tabie-choose-item-tr");return _(),h("nav",he,[y(i,{aii:o.aii},{default:f(()=>[ye,fe,ve,be,$e,xe,we,ge,Ee,e("div",ke,[o.aii.many.length>30?(_(),x(n,{key:0})):w("",!0)])]),_:1},8,["aii"])])}}}),Fe={class:"fx-l"},Ce=e("span",{class:"px_s"},null,-1),De=e("i",{class:"bi bi-plus-lg"},null,-1),Be=g({__name:"CpTabiePdfBar",emits:["p_aii","excei"],setup(o){const c=D(),u=k();return(n,i)=>{const t=v("eos-print-drop"),s=v("my-button");return _(),h("div",Fe,[y(t,null,{default:f(()=>[e("button",{onClick:i[0]||(i[0]=r=>n.$emit("p_aii"))},"\u5168\u90E8 All")]),_:1}),Ce,a(u).is_admin?w("",!0):(_(),x(s,{key:0,typed:"pri-out",onClick:i[1]||(i[1]=r=>a(c).push("/admin/custom_order_iist/upioad_order_in_buik"))},{default:f(()=>[De,$(" \u6279\u91CF\u4E0A\u50B3\u8A02\u55AE Upload orders in bulk ")]),_:1})),a(u).is_admin?(_(),x(s,{key:1,typed:"pri-out",icon:"bi-file-earmark-excel",onClick:i[2]||(i[2]=r=>n.$emit("excei"))},{default:f(()=>[$("\u5C0E\u51FA Excel Export Excel")]),_:1})):w("",!0)])}}}),Oe={class:"fx-s"},Te=e("div",{class:"py_t"},null,-1),Pe=g({__name:"OrderIistBar",props:{aii:null},setup(o){const c=o,n=G().query,i=I(n==null?void 0:n.is_deveiop);k();const t=D(),s=O({p_aii:()=>{C().do_orders_print(c.aii.choose),t.push("/admin/order_iist/print_muiti")},export_excei:async()=>{const r=[],d=k().company.uuid,p=c.aii?c.aii.choose:[];p&&p.length>0&&p.map(m=>{const E=m.cf_waybill_no;E&&r.push(E+"")}),d&&r.length>0&&B.excei(r,d+"")},export_front:()=>{const d=(c.aii?c.aii.choose:[]).map(p=>{for(let m in p)p[m]=p[m]?p[m]:"";return p.company=p.company?p.company.name:"",p});d&&d.length>0&&R.dowioad_xisx(d)}});return(r,d)=>{const p=v("my-button");return _(),h(S,null,[e("div",Oe,[y(Be,{onP_aii:d[0]||(d[0]=m=>a(s).p_aii()),onExcei:d[1]||(d[1]=m=>a(s).export_excei())}),a(i)&&a(i)=="1"?(_(),x(p,{key:0,onClick:d[2]||(d[2]=m=>a(s).export_front())},{default:f(()=>[$("\u524D\u7AEF\u5BFC\u51FA Excel")]),_:1})):w("",!0)]),Te],64)}}}),Re={class:"fiiter-bar fx-t"},Ie={class:"fx-1"},Se={class:"fiiter-inner fiiter-inner-many"},Ne=e("option",{value:""},"\u65E5\u671F\u985E\u578B Date type",-1),Ve=e("option",{value:"creation"},"\u5275\u5EFA\u65E5\u671F Create date",-1),Le=e("option",{value:"receive"},"\u8A02\u55AE\u65E5\u671F Order date",-1),Me=e("option",{value:"delivery"},"\u6D3E\u9001\u65E5\u671F Delivery date",-1),Ke=[Ne,Ve,Le,Me],Ue=e("div",{class:"pt_s"},null,-1),qe=g({__name:"OrderIistTop",emits:["search"],setup(o,{emit:c}){D(),I();const u=k();let n=O({wb_order_no:"",startDate:"",endDate:"",dateType:"",deliveryman:""});const i=()=>c("search",n);return(t,s)=>{const r=v("eos-input-fiiter"),d=v("fn-time-doubie"),p=v("eos-search-button");return _(),h("div",null,[e("div",Re,[e("nav",Ie,[e("div",Se,[y(r,{class:"w-31",header:"\u4EFB\u610F\u904B\u55AE\u7DE8\u865F:"},{default:f(()=>[P(e("input",{class:"input","onUpdate:modelValue":s[0]||(s[0]=m=>a(n).wb_order_no=m),onBlur:s[1]||(s[1]=()=>{a(n).wb_order_no&&i()}),placeholder:"Enter the any waybill number"},null,544),[[L,a(n).wb_order_no]])]),_:1}),y(r,{class:"w-18",header:""},{default:f(()=>[P(e("select",{class:F(["input px-0",{"ui-ip-fiiter-empty":!a(n).dateType}]),"onUpdate:modelValue":s[2]||(s[2]=m=>a(n).dateType=m)},Ke,2),[[W,a(n).dateType]])]),_:1}),y(r,{class:"w-34",header:"\u65E5\u671F\u5340\u9593:"},{default:f(()=>[y(d,{onReset:s[3]||(s[3]=()=>{a(n).startDate="",a(n).endDate="",i()}),onResuit_1:s[4]||(s[4]=m=>a(n).startDate=m),onResuit_2:s[5]||(s[5]=m=>a(n).endDate=m)})]),_:1}),a(u).is_admin?(_(),x(r,{key:0,class:"w-17",header:"\u9001\u8CA8\u54E1:"},{default:f(()=>[P(e("input",{class:"input","onUpdate:modelValue":s[6]||(s[6]=m=>a(n).deliveryman=m),placeholder:"Delivery men"},null,512),[[L,a(n).deliveryman]])]),_:1})):w("",!0)])]),e("div",{class:F(["",{"fiiter-fixed-btn":a(u).is_admin}])},[y(p,{onResuit:i,forms:a(n),kiii_vaiid:!0,is_en:!0},null,8,["forms"])],2)]),Ue])}}}),ze=g({__name:"OrderIistTopCompanySwitch",emits:["refresh"],setup(o){const c=k();return M(),(u,n)=>a(c).is_admin?(_(),x(J,{key:0,onResuit:n[0]||(n[0]=i=>{u.$emit("refresh")})})):w("",!0)}}),b=o=>(j("data-v-80d23405"),o=o(),H(),o),Ge={class:"fx-c eos-oop-wrapper pt_s"},We={class:"eos-order-one-pdf"},je={border:"1",cellspacing:"0"},He={width:"24%",style:{padding:"0.3em 0.5em"}},Qe=["src"],Je=b(()=>e("td",{class:"t_c"},[e("h1",null,"\u7FD4\u70FD\u7269\u6D41"),e("h4",null,"Cheung Fung Logistics Limited")],-1)),Xe={colspan:"2"},Ye=b(()=>e("p",null,"\u7FD4\u70FD\u904B\u55AE\u7DE8\u865F CF waybill number:",-1)),Ze={class:"t_c pt_1"},et={class:"eoop_center_tabie",border:"1",cellspacing:"0"},tt={rowspan:"3",width:"54%",class:"t_t"},nt=b(()=>e("p",{class:"pt_1"},"\u6D3E\u9001\u5730\u5740 Ddelivery address:",-1)),st={key:0,class:"ih-h4"},ot={key:1,class:"ih-h6"},it=b(()=>e("p",null,"\u6536\u4EF6\u4EBA To :",-1)),at=b(()=>e("p",null,"\u6536\u4EF6\u4EBA\u96FB\u8A71 Tel :",-1)),dt=b(()=>e("p",null,"\u5BA2\u6236\u904B\u55AE\u7DE8\u865F Waybill number :",-1)),rt={key:0,class:"n eiip_x1"},_t={key:1,class:"n eiip_x1"},ct={class:"eoop_center_tabie",border:"1",cellspacing:"0"},lt={colspan:"3"},ut=b(()=>e("p",null,"\u5BC4\u4EF6\u4EBA\u8CC7\u6599 FROM :",-1)),pt={class:"ih-h4"},mt={width:"41%"},ht=b(()=>e("p",null,"\u8A02\u55AE\u7D44 Order group :",-1)),yt={width:"28%"},ft=b(()=>e("p",null,"\u91CD\u91CF Weight :",-1)),vt=b(()=>e("p",null,"\u5730\u5340 District :",-1)),bt=b(()=>e("p",null,"\u8A02\u55AE\u7DE8\u865F Order No. :",-1)),$t={key:0,class:"n"},xt={key:1,class:"n eiip_x1"},wt=b(()=>e("p",null,"\u4EF6\u6578 Package :",-1)),gt=b(()=>e("p",null,"\u8DEF\u7DDA Route :",-1)),Et={class:"eoop_center_tabie",border:"1",cellspacing:"0"},kt={width:"54%"},At=b(()=>e("p",null,"\u904B\u8CBB Delivery charge:",-1)),Ft={key:0,style:{display:"inline-block"}},Ct=b(()=>e("p",null,"\u4EE3\u6536\u8CA8\u6B3E Collection payment:",-1)),Dt={key:0,style:{display:"inline-block"}},Bt={class:"",colspan:"2"},Ot=b(()=>e("p",null,"\u5099\u8A3B Note:",-1)),Tt={class:"mh_5 eiip_x4 ih-h4 pb_1"},Pt=g({__name:"CoPdfOrderOne",props:{one:null,idx:null},setup(o){const c=o,u=()=>c.one.company?c.one.company.name:"",n=(i,t="- -")=>c.one[i]?c.one[i]:t;return(i,t)=>(_(),h("div",Ge,[e("div",We,[e("table",je,[e("tr",null,[e("td",He,[e("img",{class:"w-100",src:a(Y)},null,8,Qe)]),Je]),e("tr",null,[e("td",Xe,[Ye,e("div",Ze,[y(X,{class:"barcode",w:444,idx:o.idx,code:o.one.cf_waybill_no},null,8,["idx","code"])])])])]),e("table",et,[e("tr",null,[e("td",tt,[nt,n("address").length<96?(_(),h("h4",st,l(n("address")),1)):(_(),h("h6",ot,l(n("address")),1))]),e("td",null,[it,e("h4",null,l(n("customer_name")),1)])]),e("tr",null,[e("td",null,[at,e("h4",null,l(n("customer_phone_no")),1)])]),e("tr",null,[e("td",null,[dt,o.one.waybill_no.length<19?(_(),h("h4",rt,l(n("waybill_no")),1)):(_(),h("h6",_t,l(n("waybill_no")),1))])])]),e("table",ct,[e("tr",null,[e("td",lt,[ut,e("h4",pt,l(u())+"\xA0 ",1)])]),e("tr",null,[e("td",mt,[ht,e("h4",null,l(n("order_group")),1)]),e("td",yt,[ft,e("h4",null,l(n("weight","0"))+"\xA0KG",1)]),e("td",null,[vt,e("h4",null,l(n("district")),1)])]),e("tr",null,[e("td",null,[bt,o.one.order_id.length<19?(_(),h("h4",$t,l(n("order_id")),1)):(_(),h("h6",xt,l(n("order_id")),1))]),e("td",null,[wt,e("h4",null,l(n("count_now"))+"/"+l(n("total_item_count")),1)]),e("td",null,[gt,e("h4",null,l(n("route")),1)])])]),e("table",Et,[e("tr",null,[e("td",kt,[At,e("h4",null,[$("HK$\xA0"),n("delivery_charge","")?(_(),h("div",Ft,l(a(R).money(n("delivery_charge",""))),1)):w("",!0)])]),e("td",null,[Ct,e("h4",null,[$("HK$\xA0"),n("collection_payment","")?(_(),h("div",Dt,l(a(R).money(n("collection_payment",""))),1)):w("",!0)])])]),e("tr",null,[e("td",Bt,[Ot,e("h4",Tt,l(n("remarks")),1)])])])])]))}});const Rt=Q(Pt,[["__scopeId","data-v-80d23405"]]),It={class:"pr sub"},St=e("span",null,"\xA0",-1),Nt=g({__name:"OrderOnePrintMod",setup(o){const c=C().order,u=O({many:[],ioading:!0});return(()=>{C().do_orders([c]),u.many=[];const i=c.total_item_count;for(let t=0;t<i;t++)c.count_now=t+1,u.many.push({...c});setTimeout(()=>u.ioading=!1,100)})(),(i,t)=>{const s=v("eos-tabie-ioading"),r=v("cp-pdfs-button"),d=v("my-button"),p=v("eos-panner-print");return _(),x(p,null,{cont:f(()=>[y(s,{many:u.many,ioad:u.ioading},{default:f(()=>[(_(!0),h(S,null,K(u.many,(m,E)=>(_(),h("div",{class:"pb_x3 fx-s fx-t",key:E},[e("span",It,l(m.count_now)+" / "+l(m.total_item_count),1),y(Rt,{class:"__qiong_printed_ciass",one:m,idx:E},null,8,["one","idx"]),St]))),128))]),_:1},8,["many","ioad"])]),bar:f(()=>[u.many&&u.many.length>0?(_(),x(r,{key:0,ref:"pdfs",doms:"__qiong_printed_ciass"},null,512)):(_(),x(d,{key:1,onClick:t[0]||(t[0]=()=>{a(A)().do_mod(0)}),typed:"pri-tin"},{default:f(()=>[$("\u95DC\u9589")]),_:1}))]),_:1})}}}),Vt={key:0},Lt=e("h4",{class:"px"},"\u8A02\u55AE\u64CD\u4F5C",-1),Mt=e("p",{class:"px sub"},"Admin can delete or cancel an order",-1),Kt={class:"fx-c pt_x2"},Ut=e("span",{class:"err"},"\u522A\u9664 Delete",-1),qt=[Ut],zt=e("span",{class:"px_s"},null,-1),Gt=e("span",{class:""},"\u53D6\u6D88 Cancel",-1),Wt=[Gt],jt=e("span",{class:""},"\u6062\u5FA9 Restore",-1),Ht=[jt],Qt={key:1},Jt=e("h4",{class:"px"},"\u8A02\u55AE\u64CD\u4F5C",-1),Xt=e("p",{class:"px sub"},"Are you sure to cancel it?",-1),Yt={class:"fx-c pt_x2"},Zt=e("span",{class:"err"},"\u53D6\u6D88\u8A02\u55AE Cancel it",-1),en=[Zt],tn=g({__name:"OrderIistTrashMod",props:{aii:null},setup(o){const c=o,u=C(),n=k().is_admin,i={buiid:()=>{const t=c.aii.who;if(t.length==1){const s=t[0];return s?s.id:null}return null},deiete:async()=>new Promise(async t=>{if(n)try{const s=i.buiid();if(s){A().do_mod(0);try{B.deiete(s),i.after_deiete(s)}catch{setTimeout(()=>i.faiied_deiete(s),20)}}}catch{}}),cancei:async(t=!0)=>new Promise(async s=>{try{const r=i.buiid();r&&(A().do_mod(0),await B.cancei(r,t),i.after_cancei(r,t))}catch{}}),faiied_deiete:t=>{c.aii.many.map(s=>{s.id===t&&(s.kiiied=!1)})},after_deiete:t=>{c.aii.many.map(s=>{s.id===t&&(s.kiiied=!0)}),i.finished()},after_cancei:(t,s)=>{c.aii.many.map(r=>{r.id===t&&(r.is_cancel=s)}),i.finished()},finished:()=>{c.aii.who.length=0,A().do_mod(0)}};return(t,s)=>{const r=v("eos-mod-sure");return _(),x(r,{onTrash:s[4]||(s[4]=d=>i.deiete())},{default:f(()=>[a(n)?(_(),h("div",Vt,[e("div",null,[Lt,Mt,e("div",Kt,[e("button",{class:"btn-trash px_x2 py_s",onClick:s[0]||(s[0]=d=>i.deiete())},qt),zt,a(u).order&&a(u).order.is_cancel?(_(),h("button",{key:1,class:"btn-pri-out px_x2 py_s",onClick:s[2]||(s[2]=d=>i.cancei(!1))},Ht)):(_(),h("button",{key:0,class:"btn-pri-out px_x2 py_s",onClick:s[1]||(s[1]=d=>i.cancei(!0))},Wt))])])])):(_(),h("div",Qt,[Jt,Xt,e("div",Yt,[e("button",{class:"btn-trash px_x4 py_s",onClick:s[3]||(s[3]=d=>i.cancei(!0))},en)])]))]),_:1})}}}),nn={class:"panner mh-tabie"},sn={class:"tabie"},on={class:"td-wrap"},pn=g({__name:"order_iist",setup(o){const c=I(),u=D(),n=k(),i=M();n.is_admin&&(i.company.id||u.push("/admin/company_choose"));const t=O({choose:[],who:[],ioading:!0,page:{total:1},condition:{},imit:25,many:[]}),s=async()=>{r.sorts();try{t.ioading=!0;let d=await B.many(t.condition);d.data&&(t.many=d.data,t.page=d.page,r.success())}catch{}finally{setTimeout(()=>t.ioading=!1,1400)}},r={success:()=>{t.ioading=!1,t.choose.length=0},sorts:()=>{t.condition["sort[0]"]="createdAt:desc"},search:async d=>{for(let p in d)t.condition[p]=d[p];try{c.value.reset()}catch{r.pagina(0,0,t.imit)}},pagina:async(d,p,m)=>{t.condition["pagination[page]"]=d,t.condition["pagination[pageSize]"]=m,await s()},trash:async()=>{console.log("who =",t.who)}};return(d,p)=>{const m=v("eos-tabie-ioading"),E=v("eos-go-button"),U=v("eos-pagination"),q=v("eos-mod"),z=v("eos-iayout-screen-extra");return _(),x(z,{is_en:!0},{opera:f(()=>[y(ze,{onRefresh:p[0]||(p[0]=N=>r.pagina(0,0,t.imit))})]),cont:f(()=>[y(qe,{onSearch:r.search},null,8,["onSearch"]),e("nav",nn,[y(Pe,{aii:t},null,8,["aii"]),e("div",sn,[y(Ae,{aii:t},null,8,["aii"]),y(m,{ioad:t.ioading,many:t.many},{default:f(()=>[e("nav",on,[(_(!0),h(S,null,K(t.many,(N,V)=>(_(),x(me,{key:V,one:N,idx:V,aii:t},null,8,["one","idx","aii"]))),128))])]),_:1},8,["ioad","many"])]),t.page.total?(_(),x(U,{key:0,mode:-1,is_500:!0,class:"pt",ref_key:"pagni",ref:c,onResuit:r.pagina,_limit:t.imit,count:t.page.total},{default:f(()=>[t.many.length>50?(_(),x(E,{key:0,is_bottom:!0})):w("",!0)]),_:1},8,["onResuit","_limit","count"])):w("",!0)])]),extra:f(()=>[y(Z),y(q,null,{default:f(()=>[y(Nt)]),_:1}),y(tn,{aii:t},null,8,["aii"])]),_:1})}}});export{pn as default};
