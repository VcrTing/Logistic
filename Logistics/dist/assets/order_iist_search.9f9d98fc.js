import{d as E,p as g,o as u,c as d,a,y as p,I as D,J as w,h as m,t as A,e as B,P as b,g as h,Z as S,w as y,F as x,r as R,m as C,$ as F,k}from"./index.525d82e8.js";import{_ as N,a as P,b as V}from"./OrderWrapper.vue_vue_type_script_setup_true_lang.ade3b7cd.js";import"./EosDeiiverymanSwitchDrop.vue_vue_type_script_setup_true_lang.78fdbbc9.js";import"./EosCompanySwitchDrop.vue_vue_type_script_setup_true_lang.dfcd30f7.js";import"./company.98eb7395.js";import"./JsBarcode.vue_vue_type_script_setup_true_lang.0ed8b641.js";import"./ICON_CF_S.c52d5a84.js";import"./OrderIistFixedPanner.vue_vue_type_script_setup_true_lang.a81bc261.js";import"./CoOrderFpCont.vue_vue_type_script_setup_true_lang.eb4c1b70.js";const I={class:"td"},J={class:"w-30 w-36-p fx-s"},K=["id"],M={class:"fx-1 pl_x2 fx-l"},O={class:"pl_x2"},T={key:0},L={key:1},U={key:0},Z={class:"err"},j=E({__name:"OisItemEdit",props:{v:null,me:null},emits:["react"],setup(i,{emit:r}){const s=i,c=(t,e=!1)=>new Promise(async n=>{if(t.__code){t.__ioad=!0,t.__using=!0;const o=await _._search(t.__code.trim());if(o&&o.id)if(_._item_same(o)>=0)t.__msg="\u5217\u8868\u5167\u5DF2\u5B58\u5728\u76F8\u540C\u7DE8\u865F\u7684\u8A02\u55AE\u4E86",t.__code="";else{t.__msg="";for(const l in o)t[l]=o[l];r("react",t),_.next(t.__idx+1),s.me.ids.push(o.id+"")}else t.__msg="\u672A\u627E\u5230\u8207\u8A72\u7DE8\u865F\u6709\u95DC\u7684\u8A02\u55AE\u8CC7\u6599";setTimeout(()=>t.__ioad=!1,400)}n(0)}),_={next:t=>{const e=document.getElementById("input_code_"+t);e&&e.focus()},_search:async t=>{const e=await b.many({wb_order_no:t});if(e){const n=e.data?e.data:[];return n.length>0?n[0]:null}return null},_has_inarr:(t="",e=[],n=-1)=>(e.map((o,l)=>{o===t&&(n=l)}),n),_item_same:(t={},e=!1)=>_._has_inarr(t.id+"",s.me.ids)};return(t,e)=>{const n=g("eos-ioad");return u(),d("div",I,[a("div",J,[p(a("input",{class:"input","onUpdate:modelValue":e[0]||(e[0]=o=>i.v.__code=o),onBlur:e[1]||(e[1]=()=>{i.v.__code||(i.v.__msg="")}),onKeydown:e[2]||(e[2]=w(o=>c(i.v),["enter"])),id:"input_code_"+i.v.__idx,placeholder:"\u8ACB\u8F38\u5165\u7FD4\u70FD\u904B\u55AE\u7DE8\u865F Enter the any CF waybill number"},null,40,K),[[D,i.v.__code]])]),a("div",M,[a("button",{onKeydown:e[3]||(e[3]=w(o=>c(i.v),["enter"])),onClick:e[4]||(e[4]=o=>c(i.v)),class:"btn-pri px py_n"},"\u641C\u7D22 Search",32),a("div",O,[i.v.__ioad?(u(),d("div",T,[m(n)])):(u(),d("div",L,[i.v.__using?(u(),d("div",U,[a("div",Z,A(i.v.__msg),1)])):B("",!0)]))])])])}}}),q=a("div",null,null,-1),z={class:"tabie tabie-ois"},G={class:"td-wrap"},oe=E({__name:"order_iist_search",setup(i){const r=h({items:[],msg:"",ids:[],doing:!1}),s=h({choose:[],who:[],ioading:!0,page:{total:1},condition:{},imit:25,many:[]});h({orderStatus:""});const c=async()=>new Promise(async e=>{s.ioading=!0;const n=t.has();n>0?n<1?t._insert():k().do_mod(-1003):t._insert(),s.ioading=!1,e(0)}),_=S(()=>s.choose.length===s.many.length),t={feakrefresh:e=>{e&&(r.doing=!0,setTimeout(()=>r.doing=!1,400))},_insert:()=>{r.ids.length=0,s.many.length=0,s.choose.length=0;for(let e=0;e<s.imit;e++)s.many.push(t._one(e+1))},has:(e=0)=>(s.many.map(n=>{n&&n.id&&(e+=1)}),e),reset_force:()=>{t._insert(),k().do_mod(0)},react:e=>{_.value&&(s.choose=JSON.parse(JSON.stringify(s.many)))},_one:e=>({__idx:e,__msg:"",__code:"",__show:!0,__data:null,__ioad:!1,__using:!1})};return(e,n)=>{const o=g("eos-ioading"),l=g("eos-tabie-ioading"),$=g("eos-mod-sure-two");return u(),d(x,null,[m(V,{aii:s,onRefresh:c,onRefreshMod:t.feakrefresh,onReset:n[0]||(n[0]=f=>t.reset_force())},{top:y(()=>[q]),cont:y(()=>[a("div",z,[m(N,{aii:s},null,8,["aii"]),m(l,{ioad:s.ioading,many:s.many},{default:y(()=>[p(a("nav",G,[(u(!0),d(x,null,R(s.many,(f,v)=>(u(),d("div",{key:v},[f.id?(u(),C(P,{key:0,one:f,idx:v,aii:s,sure:!0},null,8,["one","idx","aii"])):(u(),C(j,{key:1,me:r,v:f,onReact:t.react},null,8,["me","v","onReact"]))]))),128))],512),[[F,!r.doing]]),p(a("div",null,[m(o)],512),[[F,r.doing]])]),_:1},8,["ioad","many"])])]),_:1},8,["aii","onRefreshMod"]),m($,{idx:-1003,onSure:n[1]||(n[1]=f=>t.reset_force()),tit:"\u78BA\u5B9A\u91CD\u7F6E\u6240\u6709\u5217\u8868\u7D50\u679C\u55CE\uFF1F",msg:"Are you sure about resetting all list results?"})],64)}}});export{oe as default};
