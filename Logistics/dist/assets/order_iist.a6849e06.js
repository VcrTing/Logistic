import{d as g,u as D,k,N as C,f as A,p as b,o as r,c as f,h,w as y,a as e,t as p,i as a,q as T,n as F,e as w,m as x,b as $,L as K,A as I,g as O,O as B,M as R,F as S,y as P,J as L,z as W,P as M,v as j,x as H,_ as J,r as q}from"./index.ab135edd.js";import{_ as Q}from"./EosCompanySwitchDrop.vue_vue_type_script_setup_true_lang.b2a62e03.js";import{_ as X}from"./JsBarcode.vue_vue_type_script_setup_true_lang.901d87f8.js";import{L as Y}from"./ICON_CF_S.c52d5a84.js";import{_ as Z}from"./OrderIistFixedPanner.vue_vue_type_script_setup_true_lang.b08776dd.js";import"./company.fb2de955.js";import"./CoOrderFpCont.vue_vue_type_script_setup_true_lang.23bd0281.js";const ee={class:"w-9"},te={class:"w-14 pr_s"},ne={class:"w-12 pr_s"},se={class:"w-9 pr_s"},oe=e("i",{class:"bi bi-person-circle"},null,-1),ie=[oe],ae={class:"pri hand"},de={class:"w-10 pr"},ce={class:"w-9 pr_s"},_e={class:"w-10"},re={class:"w-8 pr_s"},ue={class:"w-7 fx-r"},le=e("i",{class:"bi bi-trash"},null,-1),pe=[le],me=g({__name:"OrderIistTd",props:{idx:null,one:null,aii:null},setup(o){const _=o,m=D(),s=k(),i=C(),t=A().is_admin,n=c=>{!t&&c.is_cancel||(i.do_order(c),_.aii.who.length=0,_.aii.who.push(c),s.do_mod(-200))};return(c,d)=>{const u=b("eos-tabie-opera"),l=b("eos-tabie-choose-item-td");return r(),f("div",{class:F(["td",{"td-kiiied":o.one.kiiied,"td-focus-err":o.one.is_new,"td-succ":!1,"td-die":o.one.is_cancel}])},[h(l,{one:o.one,aii:o.aii},{default:y(()=>[e("div",ee,p(a(T).view_time(o.one.create_date,"/")),1),e("div",te,p(o.one.cf_waybill_no),1),e("div",ne,p(o.one.waybill_no),1),e("div",se,p(o.one.order_group),1),e("div",{class:"w-12 px_s fx-l ps-r",onClick:d[0]||(d[0]=()=>{a(i).do_order(o.one),a(s).do_panner(1),a(i).read(o.one.id,o.one.is_new),o.one.is_new=!1})},[e("span",{class:F(["order-td-deiivery-icon",{"order-td-deiivery-icon-iive":!1}])},ie),e("span",ae,p(o.one.order_id),1)]),e("div",de,p(a(T).view_time(o.one.delivery_date,"/")),1),e("div",ce,p(a(T).view_time(o.one.receipt_date,"/")),1),e("div",_e,p(o.one.customer_name),1),e("div",re,p(o.one.customer_phone_no),1),e("div",ue,[a(t)?w("",!0):(r(),f("span",{key:0,class:F(["px_s",{err_son:!o.one.is_cancel,sus_son:o.one.is_cancel}]),onClick:d[1]||(d[1]=E=>n(o.one))},pe,2)),h(u,{is_icon:!0,vais:a(t)?"trash_edit_print":"edit_print",onEdit:d[2]||(d[2]=()=>{a(i).do_order(o.one),a(m).push("/admin/order_iist/edit")}),onTrash:d[3]||(d[3]=E=>n(o.one)),onPrint:d[4]||(d[4]=()=>{a(i).do_order(o.one),a(s).do_mod(1),a(i).do_orders_print([o.one]),a(i).read(o.one.id,o.one.is_new),o.one.is_new=!1})},null,8,["vais"])])]),_:1},8,["one","aii"])],2)}}}),he={class:"tr"},ye=e("div",{class:"w-9"},[$(" \u5275\u5EFA\u65E5\u671F"),e("br"),e("p",{class:"tr-en"},"Create date")],-1),fe=e("div",{class:"w-14"},[$(" \u7FD4\u70FD\u904B\u55AE\u865F\u78BC"),e("br"),e("p",{class:"tr-en"},"CF waybill number")],-1),be=e("div",{class:"w-12"},[$(" \u5BA2\u6236\u904B\u55AE\u7DE8\u865F"),e("br"),e("p",{class:"tr-en"},"Waybill number")],-1),ve=e("div",{class:"w-9"},[$(" \u8A02\u55AE\u7D44"),e("br"),e("p",{class:"tr-en"},"Group")],-1),$e=e("div",{class:"w-12"},[$(" \u8A02\u55AE\u7DE8\u865F"),e("br"),e("p",{class:"tr-en"},"Order No.")],-1),xe=e("div",{class:"w-10"},[$(" \u6D3E\u9001\u65E5\u671F"),e("br"),e("p",{class:"tr-en"},"Delivery date")],-1),we=e("div",{class:"w-9"},[$(" \u8A02\u55AE\u65E5\u671F"),e("br"),e("p",{class:"tr-en"},"Order date")],-1),ge=e("div",{class:"w-10"},[$(" \u6536\u4EF6\u4EBA"),e("br"),e("p",{class:"tr-en"},"Recipient")],-1),Ee=e("div",{class:"w-8"},[$(" \u6536\u4EF6\u96FB\u8A71"),e("br"),e("p",{class:"tr-en"},"Phone")],-1),Ae={class:"w-7 fx-r"},ke=g({__name:"OrderIistTr",props:{aii:null},setup(o){return(_,m)=>{const s=b("eos-go-button"),i=b("eos-tabie-choose-item-tr");return r(),f("nav",he,[h(i,{aii:o.aii},{default:y(()=>[ye,fe,be,ve,$e,xe,we,ge,Ee,e("div",Ae,[o.aii.many.length>30?(r(),x(s,{key:0})):w("",!0)])]),_:1},8,["aii"])])}}}),Fe={class:"fx-l"},Ce=e("span",{class:"px_s"},null,-1),De=e("i",{class:"bi bi-plus-lg"},null,-1),Be=g({__name:"CpTabiePdfBar",emits:["p_aii","excei"],setup(o){const _=D(),m=A();return(s,i)=>{const t=b("eos-print-drop"),n=b("my-button");return r(),f("div",Fe,[h(t,null,{default:y(()=>[e("button",{onClick:i[0]||(i[0]=c=>s.$emit("p_aii"))},"\u5168\u90E8 All")]),_:1}),Ce,a(m).is_admin?w("",!0):(r(),x(n,{key:0,typed:"pri-out",onClick:i[1]||(i[1]=c=>a(_).push("/admin/custom_order_iist/upioad_order_in_buik"))},{default:y(()=>[De,$(" \u6279\u91CF\u4E0A\u50B3\u8A02\u55AE Upload orders in bulk ")]),_:1})),a(m).is_admin?(r(),x(n,{key:1,typed:"pri-out",icon:"bi-file-earmark-excel",onClick:i[2]||(i[2]=c=>s.$emit("excei"))},{default:y(()=>[$("\u5C0E\u51FA Excel Export Excel")]),_:1})):w("",!0)])}}}),Oe={class:"fx-s"},Te=e("div",{class:"py_t"},null,-1),Pe=g({__name:"OrderIistBar",props:{aii:null},setup(o){const _=o,s=K().query,i=I(s==null?void 0:s.is_deveiop);A();const t=D(),n=O({p_aii:()=>{C().do_orders_print(_.aii.choose),t.push("/admin/order_iist/print_muiti")},export_excei:async()=>{const c=[],d=A().company.uuid,u=_.aii?_.aii.choose:[];u&&u.length>0&&u.map(l=>{const E=l.cf_waybill_no;E&&c.push(E+"")}),d&&c.length>0&&B.excei(c,d+"")},export_front:()=>{const d=(_.aii?_.aii.choose:[]).map(u=>{for(let l in u)u[l]=u[l]?u[l]:"";return u.company=u.company?u.company.name:"",u});d&&d.length>0&&R.dowioad_xisx(d)}});return(c,d)=>{const u=b("my-button");return r(),f(S,null,[e("div",Oe,[h(Be,{onP_aii:d[0]||(d[0]=l=>a(n).p_aii()),onExcei:d[1]||(d[1]=l=>a(n).export_excei())}),a(i)&&a(i)=="1"?(r(),x(u,{key:0,onClick:d[2]||(d[2]=l=>a(n).export_front())},{default:y(()=>[$("\u524D\u7AEF\u5BFC\u51FA Excel")]),_:1})):w("",!0)]),Te],64)}}}),Re={class:"fiiter-bar fx-t"},Ie={class:"fx-1"},Se={class:"fiiter-inner fiiter-inner-many"},Ne=e("option",{value:""},"\u65E5\u671F\u985E\u578B Date type",-1),Ve=e("option",{value:"creation"},"\u5275\u5EFA\u65E5\u671F Create date",-1),Le=e("option",{value:"receive"},"\u8A02\u55AE\u65E5\u671F Order date",-1),Me=e("option",{value:"delivery"},"\u6D3E\u9001\u65E5\u671F Delivery date",-1),qe=[Ne,Ve,Le,Me],Ue=e("div",{class:"pt_s"},null,-1),ze=g({__name:"OrderIistTop",emits:["search"],setup(o,{emit:_}){D(),I();const m=A();let s=O({wb_order_no:"",startDate:"",endDate:"",dateType:"",deliveryman:""});const i=()=>_("search",s);return(t,n)=>{const c=b("eos-input-fiiter"),d=b("fn-time-doubie"),u=b("eos-search-button");return r(),f("div",null,[e("div",Re,[e("nav",Ie,[e("div",Se,[h(c,{class:"w-31",header:"\u4EFB\u610F\u904B\u55AE\u7DE8\u865F:"},{default:y(()=>[P(e("input",{class:"input","onUpdate:modelValue":n[0]||(n[0]=l=>a(s).wb_order_no=l),onBlur:n[1]||(n[1]=()=>{a(s).wb_order_no&&i()}),placeholder:"Enter the any waybill number"},null,544),[[L,a(s).wb_order_no]])]),_:1}),h(c,{class:"w-18",header:""},{default:y(()=>[P(e("select",{class:F(["input px-0",{"ui-ip-fiiter-empty":!a(s).dateType}]),"onUpdate:modelValue":n[2]||(n[2]=l=>a(s).dateType=l)},qe,2),[[W,a(s).dateType]])]),_:1}),h(c,{class:"w-34",header:"\u65E5\u671F\u5340\u9593:"},{default:y(()=>[h(d,{onReset:n[3]||(n[3]=()=>{a(s).startDate="",a(s).endDate="",i()}),onResuit_1:n[4]||(n[4]=l=>a(s).startDate=l),onResuit_2:n[5]||(n[5]=l=>a(s).endDate=l)})]),_:1}),a(m).is_admin?(r(),x(c,{key:0,class:"w-17",header:"\u9001\u8CA8\u54E1:"},{default:y(()=>[P(e("input",{class:"input","onUpdate:modelValue":n[6]||(n[6]=l=>a(s).deliveryman=l),placeholder:"Delivery men"},null,512),[[L,a(s).deliveryman]])]),_:1})):w("",!0)])]),e("div",{class:F(["",{"fiiter-fixed-btn":a(m).is_admin}])},[h(u,{onResuit:i,forms:a(s),kiii_vaiid:!0,is_en:!0},null,8,["forms"])],2)]),Ue])}}}),Ge=g({__name:"OrderIistTopCompanySwitch",emits:["refresh"],setup(o){const _=A();return M(),(m,s)=>a(_).is_admin?(r(),x(Q,{key:0,onResuit:s[0]||(s[0]=i=>{m.$emit("refresh")})})):w("",!0)}}),v=o=>(j("data-v-cd318f3c"),o=o(),H(),o),Ke={class:"fx-c eos-oop-wrapper pt_s"},We={class:"eos-order-one-pdf"},je={border:"1",cellspacing:"0"},He={width:"24%",style:{padding:"0.3em 0.5em"}},Je=["src"],Qe=v(()=>e("td",{class:"t_c"},[e("h1",null,"\u7FD4\u70FD\u7269\u6D41"),e("h4",null,"Cheung Fung Logistics Limited")],-1)),Xe={colspan:"2"},Ye=v(()=>e("p",null,"\u7FD4\u70FD\u904B\u55AE\u7DE8\u865F CF waybill number:",-1)),Ze={class:"t_c pt_1"},et={class:"eoop_center_tabie",border:"1",cellspacing:"0"},tt={rowspan:"3",width:"54%",class:"t_t"},nt=v(()=>e("p",{class:"pt_1"},"\u6D3E\u9001\u5730\u5740 Ddelivery address:",-1)),st={class:"ih-h4 eiip_x4"},ot=v(()=>e("p",null,"\u6536\u4EF6\u4EBA To :",-1)),it=v(()=>e("p",null,"\u6536\u4EF6\u4EBA\u96FB\u8A71 Tel :",-1)),at=v(()=>e("p",null,"\u5BA2\u6236\u904B\u55AE\u7DE8\u865F Waybill number :",-1)),dt={key:0,class:"n eiip_x1"},ct={key:1,class:"n eiip_x1"},_t={class:"eoop_center_tabie",border:"1",cellspacing:"0"},rt={colspan:"3"},ut=v(()=>e("p",null,"\u5BC4\u4EF6\u4EBA\u8CC7\u6599 FROM :",-1)),lt={class:"ih-h4"},pt={width:"41%"},mt=v(()=>e("p",null,"\u8A02\u55AE\u7D44 Order group :",-1)),ht={width:"28%"},yt=v(()=>e("p",null,"\u91CD\u91CF Weight :",-1)),ft=v(()=>e("p",null,"\u5730\u5340 District :",-1)),bt=v(()=>e("p",null,"\u8A02\u55AE\u7DE8\u865F Order No. :",-1)),vt={key:0,class:"n"},$t={key:1,class:"n eiip_x1"},xt=v(()=>e("p",null,"\u4EF6\u6578 Package :",-1)),wt=v(()=>e("p",null,"\u8DEF\u7DDA Route :",-1)),gt={class:"eoop_center_tabie",border:"1",cellspacing:"0"},Et={width:"54%"},At=v(()=>e("p",null,"\u904B\u8CBB Delivery charge:",-1)),kt={key:0,style:{display:"inline-block"}},Ft=v(()=>e("p",null,"\u4EE3\u6536\u8CA8\u6B3E Collection payment:",-1)),Ct={key:0,style:{display:"inline-block"}},Dt={class:"",colspan:"2"},Bt=v(()=>e("p",null,"\u5099\u8A3B Note:",-1)),Ot={class:"mh_5 eiip_x4 ih-h4 pb_1"},Tt=g({__name:"CoPdfOrderOne",props:{one:null,idx:null},setup(o){const _=o,m=()=>_.one.company?_.one.company.name:"",s=(i,t="- -")=>_.one[i]?_.one[i]:t;return(i,t)=>(r(),f("div",Ke,[e("div",We,[e("table",je,[e("tr",null,[e("td",He,[e("img",{class:"w-100",src:a(Y)},null,8,Je)]),Qe]),e("tr",null,[e("td",Xe,[Ye,e("div",Ze,[h(X,{class:"barcode",w:420,idx:o.idx,code:o.one.cf_waybill_no},null,8,["idx","code"])])])])]),e("table",et,[e("tr",null,[e("td",tt,[nt,e("h4",st,p(s("address")),1)]),e("td",null,[ot,e("h4",null,p(s("customer_name")),1)])]),e("tr",null,[e("td",null,[it,e("h4",null,p(s("customer_phone_no")),1)])]),e("tr",null,[e("td",null,[at,o.one.waybill_no.length<19?(r(),f("h4",dt,p(s("waybill_no")),1)):(r(),f("h6",ct,p(s("waybill_no")),1))])])]),e("table",_t,[e("tr",null,[e("td",rt,[ut,e("h4",lt,p(m())+"\xA0 ",1)])]),e("tr",null,[e("td",pt,[mt,e("h4",null,p(s("order_group")),1)]),e("td",ht,[yt,e("h4",null,p(s("weight","0"))+"\xA0KG",1)]),e("td",null,[ft,e("h4",null,p(s("district")),1)])]),e("tr",null,[e("td",null,[bt,o.one.order_id.length<19?(r(),f("h4",vt,p(s("order_id")),1)):(r(),f("h6",$t,p(s("order_id")),1))]),e("td",null,[xt,e("h4",null,p(s("count_now"))+"/"+p(s("total_item_count")),1)]),e("td",null,[wt,e("h4",null,p(s("route")),1)])])]),e("table",gt,[e("tr",null,[e("td",Et,[At,e("h4",null,[$("HK$\xA0"),s("delivery_charge","")?(r(),f("div",kt,p(a(R).money(s("delivery_charge",""))),1)):w("",!0)])]),e("td",null,[Ft,e("h4",null,[$("HK$\xA0"),s("collection_payment","")?(r(),f("div",Ct,p(a(R).money(s("collection_payment",""))),1)):w("",!0)])])]),e("tr",null,[e("td",Dt,[Bt,e("h4",Ot,p(s("remarks")),1)])])])])]))}});const Pt=J(Tt,[["__scopeId","data-v-cd318f3c"]]),Rt={class:"pr sub"},It=e("span",null,"\xA0",-1),St=g({__name:"OrderOnePrintMod",setup(o){const _=C().order,m=O({many:[],ioading:!0});return(()=>{C().do_orders([_]),m.many=[];const i=_.total_item_count;for(let t=0;t<i;t++)_.count_now=t+1,m.many.push({..._});setTimeout(()=>m.ioading=!1,100)})(),(i,t)=>{const n=b("eos-tabie-ioading"),c=b("cp-pdfs-button"),d=b("my-button"),u=b("eos-panner-print");return r(),x(u,null,{cont:y(()=>[h(n,{many:m.many,ioad:m.ioading},{default:y(()=>[(r(!0),f(S,null,q(m.many,(l,E)=>(r(),f("div",{class:"pb_x3 fx-s fx-t",key:E},[e("span",Rt,p(l.count_now)+" / "+p(l.total_item_count),1),h(Pt,{class:"__qiong_printed_ciass",one:l,idx:E},null,8,["one","idx"]),It]))),128))]),_:1},8,["many","ioad"])]),bar:y(()=>[m.many&&m.many.length>0?(r(),x(c,{key:0,ref:"pdfs",doms:"__qiong_printed_ciass"},null,512)):(r(),x(d,{key:1,onClick:t[0]||(t[0]=()=>{a(k)().do_mod(0)}),typed:"pri-tin"},{default:y(()=>[$("\u95DC\u9589")]),_:1}))]),_:1})}}}),Nt={key:0},Vt=e("h4",{class:"px"},"\u8A02\u55AE\u64CD\u4F5C",-1),Lt=e("p",{class:"px sub"},"Admin can delete or cancel an order",-1),Mt={class:"fx-c pt_x2"},qt=e("span",{class:"err"},"\u522A\u9664 Delete",-1),Ut=[qt],zt=e("span",{class:"px_s"},null,-1),Gt=e("span",{class:""},"\u53D6\u6D88 Cancel",-1),Kt=[Gt],Wt=e("span",{class:""},"\u6062\u5FA9 Restore",-1),jt=[Wt],Ht={key:1},Jt=e("h4",{class:"px"},"\u8A02\u55AE\u64CD\u4F5C",-1),Qt=e("p",{class:"px sub"},"Are you sure to cancel it?",-1),Xt={class:"fx-c pt_x2"},Yt=e("span",{class:"err"},"\u53D6\u6D88\u8A02\u55AE Cancel it",-1),Zt=[Yt],en=g({__name:"OrderIistTrashMod",props:{aii:null},setup(o){const _=o,m=C(),s=A().is_admin,i={buiid:()=>{const t=_.aii.who;if(t.length==1){const n=t[0];return n?n.id:null}return null},deiete:async()=>new Promise(async t=>{if(s)try{const n=i.buiid();if(n){k().do_mod(0);try{B.deiete(n),i.after_deiete(n)}catch{setTimeout(()=>i.faiied_deiete(n),20)}}}catch{}}),cancei:async(t=!0)=>new Promise(async n=>{try{const c=i.buiid();c&&(k().do_mod(0),await B.cancei(c,t),i.after_cancei(c,t))}catch{}}),faiied_deiete:t=>{_.aii.many.map(n=>{n.id===t&&(n.kiiied=!1)})},after_deiete:t=>{_.aii.many.map(n=>{n.id===t&&(n.kiiied=!0)}),i.finished()},after_cancei:(t,n)=>{_.aii.many.map(c=>{c.id===t&&(c.is_cancel=n)}),i.finished()},finished:()=>{_.aii.who.length=0,k().do_mod(0)}};return(t,n)=>{const c=b("eos-mod-sure");return r(),x(c,{onTrash:n[4]||(n[4]=d=>i.deiete())},{default:y(()=>[a(s)?(r(),f("div",Nt,[e("div",null,[Vt,Lt,e("div",Mt,[e("button",{class:"btn-trash px_x2 py_s",onClick:n[0]||(n[0]=d=>i.deiete())},Ut),zt,a(m).order&&a(m).order.is_cancel?(r(),f("button",{key:1,class:"btn-pri-out px_x2 py_s",onClick:n[2]||(n[2]=d=>i.cancei(!1))},jt)):(r(),f("button",{key:0,class:"btn-pri-out px_x2 py_s",onClick:n[1]||(n[1]=d=>i.cancei(!0))},Kt))])])])):(r(),f("div",Ht,[Jt,Qt,e("div",Xt,[e("button",{class:"btn-trash px_x4 py_s",onClick:n[3]||(n[3]=d=>i.cancei(!0))},Zt)])]))]),_:1})}}}),tn={class:"panner mh-tabie"},nn={class:"tabie"},sn={class:"td-wrap"},ln=g({__name:"order_iist",setup(o){const _=I(),m=D(),s=A(),i=M();s.is_admin&&(i.company.id||m.push("/admin/company_choose"));const t=O({choose:[],who:[],ioading:!0,page:{total:1},condition:{},imit:25,many:[]}),n=async()=>{c.sorts();try{t.ioading=!0;let d=await B.many(t.condition);d.data&&(t.many=d.data,t.page=d.page,c.success())}catch{}finally{setTimeout(()=>t.ioading=!1,1400)}},c={success:()=>{t.ioading=!1,t.choose.length=0},sorts:()=>{t.condition["sort[0]"]="createdAt:desc"},search:async d=>{for(let u in d)t.condition[u]=d[u];try{_.value.reset()}catch{c.pagina(0,0,t.imit)}},pagina:async(d,u,l)=>{t.condition["pagination[page]"]=d,t.condition["pagination[pageSize]"]=l,await n()},trash:async()=>{console.log("who =",t.who)}};return(d,u)=>{const l=b("eos-tabie-ioading"),E=b("eos-go-button"),U=b("eos-pagination"),z=b("eos-mod"),G=b("eos-iayout-screen-extra");return r(),x(G,{is_en:!0},{opera:y(()=>[h(Ge,{onRefresh:u[0]||(u[0]=N=>c.pagina(0,0,t.imit))})]),cont:y(()=>[h(ze,{onSearch:c.search},null,8,["onSearch"]),e("nav",tn,[h(Pe,{aii:t},null,8,["aii"]),e("div",nn,[h(ke,{aii:t},null,8,["aii"]),h(l,{ioad:t.ioading,many:t.many},{default:y(()=>[e("nav",sn,[(r(!0),f(S,null,q(t.many,(N,V)=>(r(),x(me,{key:V,one:N,idx:V,aii:t},null,8,["one","idx","aii"]))),128))])]),_:1},8,["ioad","many"])]),t.page.total?(r(),x(U,{key:0,mode:-1,is_500:!0,class:"pt",ref_key:"pagni",ref:_,onResuit:c.pagina,_limit:t.imit,count:t.page.total},{default:y(()=>[t.many.length>50?(r(),x(E,{key:0,is_bottom:!0})):w("",!0)]),_:1},8,["onResuit","_limit","count"])):w("",!0)])]),extra:y(()=>[h(Z),h(z,null,{default:y(()=>[h(St)]),_:1}),h(en,{aii:t},null,8,["aii"])]),_:1})}}});export{ln as default};
