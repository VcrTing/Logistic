import{d as A,p as y,o as l,c as h,h as m,w as v,a as e,m as C,e as k,b as w,F as S,r as J,n as O,t as g,u as j,k as x,Q as K,v as V,i as p,R as N,f as F,g as E,S as Y,P as B,j as H,y as R,J as U,I as M,z as X,x as Z,T as ee,l as z}from"./index.3826691a.js";import{_ as se}from"./EosCompanySwitchDrop.vue_vue_type_script_setup_true_lang.459a71d3.js";import{_ as L}from"./EosDeiiverymanSwitchDrop.vue_vue_type_script_setup_true_lang.2a0c5b61.js";import{_ as ie}from"./OrderIistFixedPanner.vue_vue_type_script_setup_true_lang.af131e33.js";const W=(u=[])=>{const _=[];return u.map(i=>{i.kiiied||i.id&&_.push(i)}),_},D={buiid_finai_choose:W,buiid_mui_choose:(u,_="cf_waybill_no")=>{const i=[];return u=u?W(u):[],u.map(r=>{const n=r[_];n&&i.push(n)}),i}},ne={class:"tr"},te=e("div",{class:"w-9"},[w(" \u5275\u5EFA\u65E5\u671F"),e("br"),e("p",{class:"tr-en"},"Create date")],-1),oe=e("div",{class:"w-13"},[w(" \u7FD4\u70FD\u904B\u55AE\u865F\u78BC"),e("br"),e("p",{class:"tr-en"},"CF waybill number")],-1),ae=e("div",{class:"w-13"},[w(" \u5BA2\u6236\u904B\u55AE\u7DE8\u865F"),e("br"),e("p",{class:"tr-en"},"Waybill number")],-1),ue=e("div",{class:"w-10"},[w(" \u8A02\u55AE\u7D44"),e("br"),e("p",{class:"tr-en"},"Group")],-1),ce=e("div",{class:"w-12 w-11-p"},[w(" \u8A02\u55AE\u7DE8\u865F"),e("br"),e("p",{class:"tr-en"},"Order No.")],-1),re=e("div",{class:"w-9"},[w(" \u6D3E\u9001\u65E5\u671F"),e("br"),e("p",{class:"tr-en"},"Delivery date")],-1),_e=e("div",{class:"w-8"},[w(" \u8A02\u55AE\u65E5\u671F"),e("br"),e("p",{class:"tr-en"},"Order date")],-1),de=e("div",{class:"w-9"},[w(" \u6536\u4EF6\u4EBA"),e("br"),e("p",{class:"tr-en"},"Recipient")],-1),le=e("div",{class:"w-7 w-8-p"},[w(" \u6536\u4EF6\u96FB\u8A71"),e("br"),e("p",{class:"tr-en"},"Phone")],-1),pe=e("div",{class:"w-3"},null,-1),me={class:"w-7 fx-r"},Ki=A({__name:"OrderIistTr",props:{aii:null},setup(u){return(_,i)=>{const r=y("eos-go-button"),n=y("eos-tabie-choose-item-tr");return l(),h("nav",ne,[m(n,{aii:u.aii},{default:v(()=>[te,oe,ae,ue,ce,re,_e,de,le,pe,e("div",me,[u.aii.many.length>30?(l(),C(r,{key:0})):k("",!0)])]),_:1},8,["aii"])])}}}),he={class:"eos-tabie-opera fx-r fx-wp"},fe=["onClick"],ve={key:0,class:"hand"},ye={key:1,class:"hand hv-big"},$e=A({__name:"EosTabieOperaOrder",props:{vais:null,is_icon:{type:Boolean}},emits:["view","edit","trash","save","print","cancei"],setup(u,{emit:_}){const i=[{txt:"\u8A73\u60C5",code:"view",caii:()=>_("view"),icon:"bi bi-eye",ciass:"pri_son"},{txt:"\u522A\u9664",code:"trash",caii:()=>_("trash"),icon:"bi bi-trash",ciass:"err_trash_son"},{txt:"\u53D6\u6D88",code:"cancei",caii:()=>_("cancei"),icon:"bi bi-x-circle",ciass:"pri_son"},{txt:"\u7DE8\u8F2F",code:"edit",caii:()=>_("edit"),icon:"bi bi-pencil-square",ciass:"pri_son"},{txt:"\u5132\u5B58",code:"save",caii:()=>_("save"),icon:"bi bi-save",ciass:"pri_son"},{txt:"\u6253\u5370",code:"print",caii:()=>_("print"),icon:"bi bi-printer-fill",ciass:"pri_son"}];return(r,n)=>(l(),h("div",he,[(l(),h(S,null,J(i,(d,t)=>e("span",{key:t},[u.vais&&u.vais.indexOf(d.code)>=0?(l(),h("span",{key:0,class:O(["px_s",d.ciass]),onClick:o=>d.caii()},[u.is_icon?(l(),h("span",ye,[e("i",{class:O(["d-ib",d.icon])},null,2)])):(l(),h("span",ve,g(d.txt),1))],10,fe)):k("",!0)])),64))]))}}),be={class:"w-9"},xe={class:"w-13 pr_s"},we={class:"w-13 pr_s"},Ae={class:"w-10 pr"},Ce={class:"w-12 w-11-p px_s fx-l ps-r"},ke=e("span",{class:"hv-big"},[e("i",{class:"bi bi-person-circle"})],-1),ge=[ke],Ee={class:"w-9 pr"},Fe={class:"w-8 pr_s"},De={class:"w-9"},Be={class:"w-7 w-8-p pr_s"},Te={class:"w-3 fx-c"},Pe={key:0,class:"bi bi-lightbulb-fill buib"},Re={key:1,class:"bi bi-lightbulb"},Oe={class:"w-7 fx-r"},Yi=A({__name:"OrderIistTd",props:{idx:null,one:null,aii:null},setup(u){const _=u,i=j(),r=x(),n=K(),d=V("print"),t={init:()=>new Promise(o=>{d.value=F().is_admin?F().is_manager?"cancei_edit_print":"trash_cancei_edit_print":"cancei_edit_print",o(0)}),print:()=>new Promise(o=>{const s=_.one;n.do_order(s),r.do_mod(1),n.do_orders_print([s]),n.read(s.id,s.is_new),s.is_new=!1,o(0)}),open:o=>new Promise(s=>{_.aii.who.length=0,_.aii.who.push(_.one),r.do_mod(o),s(0)}),trash:()=>t.open(-205),cancei:()=>t.open(-206)};return t.init(),(o,s)=>{const a=y("eos-tabie-choose-item-td");return l(),h("div",{class:O(["td",{"td-kiiied":u.one.kiiied,"td-focus-err":u.one.is_new,"td-succ":u.one.is_complete_list,"td-die":u.one.is_cancel}])},[m(a,{one:u.one,aii:u.aii},{default:v(()=>[e("div",be,g(p(N).view_time(u.one.create_date,"/")),1),e("div",xe,g(u.one.cf_waybill_no),1),e("div",we,g(u.one.waybill_no),1),e("div",Ae,g(u.one.order_group),1),e("div",Ce,[e("span",{class:O(["order-td-deiivery-icon",{"order-td-deiivery-icon-iive":u.one.delivery_man_info&&u.one.delivery_man_info.id}]),onClick:s[0]||(s[0]=()=>{p(n).do_order(u.one),p(i).push("/admin/order_iist/edit")})},ge,2),e("span",{class:"pri hand",onClick:s[1]||(s[1]=()=>{p(n).do_order(u.one),p(r).do_panner(1),p(n).read(u.one.id,u.one.is_new),u.one.is_new=!1})},g(u.one.order_id),1)]),e("div",Ee,g(p(N).view_time(u.one.delivery_date,"/")),1),e("div",Fe,g(p(N).view_time(u.one.receipt_date,"/")),1),e("div",De,g(u.one.customer_name),1),e("div",Be,g(u.one.customer_phone_no),1),e("div",Te,[u.one.is_complete_list?(l(),h("i",Pe)):(l(),h("i",Re))]),e("div",Oe,[m($e,{is_icon:!0,vais:d.value,onEdit:s[2]||(s[2]=()=>{p(n).do_order(u.one),p(i).push("/admin/order_iist/edit")}),onTrash:s[3]||(s[3]=c=>t.trash()),onCancei:s[4]||(s[4]=c=>t.cancei()),onPrint:s[5]||(s[5]=c=>t.print())},null,8,["vais"])])]),_:1},8,["one","aii"])],2)}}}),Se={class:"d-ib"},Me={class:"eos-order-status-switch-drop"},Ve=e("i",{class:"bi bi-stack"},null,-1),Ie={class:"pt_s"},Ue=["onClick"],je={class:"px"},Ne=e("p",{class:"px sub pt"},"Please select a value after the order status has changed.",-1),Le={class:"fx-c pt_x2"},Ke=e("span",{class:"px"},null,-1),Ye=A({__name:"EosOrderStatusSwitchDrop",emits:["resuit"],setup(u,{emit:_}){E({ioading:!1});const i=d=>{_("resuit",n.v,d)},r={v_to_name:(d="")=>{const t=n.v;return n.ops.map(o=>{o.v==t&&(d=o.name)}),d}},n=E({now:-1,open:!0,ioading:!0,v:"",ops:[{name:"\u8CA8\u54C1\u5DF2\u5230\u8CA8\u5009 The goods have arrived at the warehouse",id:0,func:d=>{n.v=d,x().do_mod(-1001)},v:"is_in_warehouse"},{name:"\u8CA8\u54C1\u5DF2\u96E2\u958B\u8CA8\u5009\u904B\u9001\u5BA2\u4EBA\u4E2D The goods have left the warehouse",id:1,func:d=>{n.v=d,x().do_mod(-1001)},v:"is_leave_warehouse"},{name:"\u8A02\u55AE\u5DF2\u5B8C\u6210\u9001\u8CA8 The order has been delivered",id:2,func:d=>{n.v=d,x().do_mod(-1001)},v:"is_complete_list"},{name:"\u8CA8\u54C1\u672A\u80FD\u6210\u529F\u9001\u5230\u5BA2\u4EBA The goods were not delivered to the guests",id:3,func:d=>{n.v=d,x().do_mod(-1001)},v:"is_fail_deliver"}]});return(d,t)=>{const o=y("my-button"),s=y("fn-drop-down"),a=y("eos-mod-sure-two");return l(),h("div",Se,[e("div",Me,[m(s,null,{tit:v(()=>[m(o,{typed:"pri-out"},{default:v(()=>[Ve,w(" \u6279\u91CF\u4FEE\u6539\u72C0\u614B Batch change status ")]),_:1})]),cont:v(()=>[e("nav",Ie,[(l(!0),h(S,null,J(n.ops,(c,f)=>(l(),h("button",{class:"fx-l",key:f,onClick:$=>c.func?c.func(c.v):void 0},g(c.name),9,Ue))),128))])]),_:1})]),m(a,{idx:-1001},{default:v(()=>[e("h4",je,g(r.v_to_name())+"?",1),Ne,e("div",Le,[e("button",{class:"btn-pri px_x2 py_s",onClick:t[0]||(t[0]=c=>i(!0))}," \u662F\u7684\xA0Yes "),Ke,e("button",{class:"btn-err px_x2 py_s",onClick:t[1]||(t[1]=c=>i(!1))}," \u4E0D\u662F\xA0No ")])]),_:1})])}}}),ze=e("i",{class:"bi bi-filetype-pdf"},null,-1),We=e("span",null,"\xA0\u5217\u5370 Print",-1),qe=A({__name:"EosPdfButton",setup(u){return(_,i)=>{const r=y("my-button");return l(),C(r,{typed:"pri-tin"},{default:v(()=>[ze,We]),_:1})}}}),Ge=e("i",{class:"bi bi-trash"},null,-1),Je=e("span",null," \u6279\u91CF\u522A\u9664\u9078\u64C7\u8A02\u55AE Delete order selection in bulk ",-1),Qe=e("i",{class:"bi bi-x-circle"},null,-1),He=e("span",null," \u6279\u91CF\u53D6\u6D88\u9078\u64C7\u8A02\u55AE Cancel order selection in bulk ",-1),q=A({__name:"EosMuiTrashButton",props:{is_cancei:{type:Boolean}},emits:["trash","cancei"],setup(u){return(_,i)=>{const r=y("my-button");return u.is_cancei?(l(),C(r,{key:1,typed:"pri-out",onClick:i[1]||(i[1]=n=>_.$emit("cancei"))},{default:v(()=>[Qe,He]),_:1})):(l(),C(r,{key:0,typed:"pri-out",onClick:i[0]||(i[0]=n=>_.$emit("trash"))},{default:v(()=>[Ge,Je]),_:1}))}}}),Xe={class:"fx-s fx-b"},Ze={class:"fx-1"},es=e("span",{class:"px_s"},null,-1),ss=e("i",{class:"bi bi-person-plus"},null,-1),is=e("i",{class:"bi bi-plus-lg"},null,-1),ns=e("span",{class:"px_s"},null,-1),ts={key:0,class:"pt"},os=e("span",{class:"px_s"},null,-1),as=e("span",{class:"px_s"},null,-1),us=e("i",{class:"bi bi-file-earmark-spreadsheet"},null,-1),cs=e("div",{class:"py_t"},null,-1),rs=A({__name:"OrderIistBar",props:{aii:null},emits:["refresh"],setup(u,{emit:_}){const i=u,r=x(),n=F(),d=j(),t=n.is_admin,o=E({uuid:()=>{const s=t?Y().company:F().company;return s?s.uuid:null},p_aii:()=>{o._has_choose()&&(K().do_orders_print(D.buiid_finai_choose(i.aii.choose)),d.push("/admin/order_iist/print_muiti"))},export_excei:async()=>new Promise(s=>{const a=D.buiid_mui_choose(i.aii.choose),c=o.uuid();c&&a.length>0&&B.excei(a,c+""),s(0)}),_has_choose:()=>{const s=D.buiid_finai_choose(i.aii.choose);return s&&s.length>0},mui_trash:()=>{o._has_choose()&&r.do_mod(-201)},mui_cancei:()=>{o._has_choose()&&r.do_mod(-202)},mui_deiivery_pius:()=>{o._has_choose()&&r.do_mod(102)},mui_order_status:(s,a)=>new Promise(async c=>{const f=D.buiid_mui_choose(i.aii.choose);H.TEST&&console.log(f,a,s),f.length>0&&(await B.status_mui(f,a,s),x().do_mod(0),_("refresh"),o.feakchangestatus(s,a)),c(0)}),feakchangestatus:(s,a)=>{const c=D.buiid_finai_choose(i.aii.choose),f=c.length,$=i.aii.many,b=$.length;for(let T=0;T<b;T++){const I=$[T];for(let P=0;P<f;P++){const Q=c[P];I.cf_waybill_no==Q.cf_waybill_no&&(I[s]=a)}}}});return(s,a)=>{const c=y("my-button");return l(),h(S,null,[e("div",Xe,[e("div",Ze,[e("div",null,[m(qe,{onClick:a[0]||(a[0]=f=>p(o).p_aii())}),es,p(t)?(l(),C(c,{key:0,typed:"pri-out",onClick:a[1]||(a[1]=f=>p(o).mui_deiivery_pius())},{default:v(()=>[ss,w(" \xA0\u6279\u91CF\u6DFB\u52A0\u9001\u8CA8\u54E1 Upload Deliveryman in bulk ")]),_:1})):(l(),C(c,{key:1,typed:"pri-out",onClick:a[2]||(a[2]=f=>p(d).push("/admin/custom_order_iist/upioad_order_in_buik"))},{default:v(()=>[is,w(" \u6279\u91CF\u4E0A\u50B3\u8A02\u55AE Upload orders in bulk ")]),_:1})),ns,m(Ye,{onResuit:p(o).mui_order_status},null,8,["onResuit"])]),p(t)?(l(),h("div",ts,[p(n).is_manager?k("",!0):(l(),C(q,{key:0,onTrash:p(o).mui_trash,onCancei:a[3]||(a[3]=()=>{})},null,8,["onTrash"])),os,m(q,{is_cancei:!0,onCancei:p(o).mui_cancei,onTrash:a[4]||(a[4]=()=>{})},null,8,["onCancei"]),as])):k("",!0)]),e("div",null,[m(c,{onClick:a[5]||(a[5]=f=>p(o).export_excei())},{default:v(()=>[us,w(" \xA0\u5C0E\u51FA Excel Export Excel ")]),_:1})])]),cs],64)}}}),_s={class:"fiiter-bar fx-t"},ds={class:"fx-1"},ls={class:"fiiter-inner fiiter-inner-many"},ps=e("option",{value:""},"\u65E5\u671F\u985E\u578B Date type",-1),ms=e("option",{value:"creation"},"\u5275\u5EFA\u65E5\u671F Create date",-1),hs=e("option",{value:"receive"},"\u8A02\u55AE\u65E5\u671F Order date",-1),fs=e("option",{value:"delivery"},"\u6D3E\u9001\u65E5\u671F Delivery date",-1),vs=[ps,ms,hs,fs],ys=e("div",{class:"pt_s"},null,-1),$s=A({__name:"OrderIistTop",emits:["search"],setup(u,{emit:_}){j(),V();const i=F(),r=()=>_("search",n);let n=E({wb_order_no:"",startDate:"",endDate:"",dateType:"",deliveryman:"",orderStatus:""});return(d,t)=>{const o=y("eos-input-fiiter"),s=y("fn-time-doubie"),a=y("eos-search-button");return l(),h("div",null,[e("div",_s,[e("nav",ds,[e("div",ls,[m(o,{class:"w-31",header:"\u4EFB\u610F\u904B\u55AE\u7DE8\u865F:"},{default:v(()=>[R(e("input",{class:"input","onUpdate:modelValue":t[0]||(t[0]=c=>p(n).wb_order_no=c),onKeydown:t[1]||(t[1]=U(c=>r(),["enter"])),placeholder:"Enter the any waybill number"},null,544),[[M,p(n).wb_order_no]])]),_:1}),m(o,{class:"w-18",header:""},{default:v(()=>[R(e("select",{class:O(["input px-0",{"ui-ip-fiiter-empty":!p(n).dateType}]),"onUpdate:modelValue":t[2]||(t[2]=c=>p(n).dateType=c)},vs,2),[[X,p(n).dateType]])]),_:1}),m(o,{class:"w-34",header:"\u65E5\u671F\u5340\u9593:"},{default:v(()=>[m(s,{onReset:t[3]||(t[3]=()=>{p(n).startDate="",p(n).endDate="",r()}),onResuit_1:t[4]||(t[4]=c=>p(n).startDate=c),onResuit_2:t[5]||(t[5]=c=>p(n).endDate=c)})]),_:1}),p(i).is_admin?(l(),C(o,{key:0,class:"w-17",header:"\u9001\u8CA8\u54E1:"},{default:v(()=>[R(e("input",{class:"input","onUpdate:modelValue":t[6]||(t[6]=c=>p(n).deliveryman=c),placeholder:"Delivery men"},null,512),[[M,p(n).deliveryman]])]),_:1})):k("",!0)])]),e("div",{class:O(["",{"fiiter-fixed-btn":p(i).is_admin}])},[m(a,{onResuit:r,forms:p(n),kiii_vaiid:!0,is_en:!0},null,8,["forms"])],2)]),ys])}}}),bs=A({__name:"OrderIistTopCompanySwitch",emits:["refresh"],setup(u){const _=F();return Y(),(i,r)=>p(_).is_admin?(l(),C(se,{key:0,onResuit:r[0]||(r[0]=n=>{i.$emit("refresh")})})):k("",!0)}}),xs=A({__name:"OrderTrashRef",props:{aii:null},setup(u,{expose:_}){const i=u;K();const r=F().is_admin,n={buiid_choose:()=>D.buiid_mui_choose(i.aii.choose),buiid:()=>{const t=i.aii.who;if(t.length==1){const o=t[0];return o?o.id:null}return null},faiied_deiete:t=>{i.aii.many.map(o=>{o.id===t&&(o.kiiied=!1)})},after_deiete:t=>{i.aii.many.map(o=>{o.id===t&&(o.kiiied=!0)}),n.finished()},after_cancei:(t,o)=>{i.aii.many.map(s=>{s.id===t&&(s.is_cancel=o)}),n.finished()},finished:()=>{i.aii.who.length=0,x().do_mod(0)}};return _({deiete_mui:async()=>{const t=n.buiid_choose();if(t.length>0)return await B.deiete_mui(t)},after_deiete_mui:()=>new Promise(t=>{const o=n.buiid_choose();i.aii.many.map(s=>{o.map(a=>{s.cf_waybill_no===a&&(s.kiiied=!0)})}),t(0)}),deiete:async()=>new Promise(async t=>{if(r)try{const o=n.buiid();if(o){x().do_mod(0);try{B.deiete(o),n.after_deiete(o)}catch{setTimeout(()=>n.faiied_deiete(o),20)}}}catch{}}),cancei_mui:async()=>{const t=n.buiid_choose();if(t.length>0)return await B.cancei_mui(t)},after_cancei_mui:()=>new Promise(t=>{const o=n.buiid_choose();i.aii.many.map(s=>{o.map(a=>{s.cf_waybill_no===a&&(s.is_cancel=!0)})}),t(0)}),cancei:async(t=!0)=>new Promise(async o=>{try{const s=n.buiid();s&&(x().do_mod(0),await B.cancei(s,t),n.after_cancei(s,t))}catch{}})}),(t,o)=>null}}),ws={key:0},As=e("h4",{class:"px"},"\u6279\u91CF\u522A\u9664",-1),Cs=e("p",{class:"px sub"},"Are you sure to delete them?",-1),ks={class:"fx-c pt_x2"},gs=e("span",{class:"err"},"\u78BA\u8A8D Yes",-1),Es=[gs],Fs={key:1},Ds=e("h4",{class:"px"},"\u8A02\u55AE\u64CD\u4F5C",-1),Bs=e("p",{class:"px sub"},"Are you sure to delete it?",-1),Ts={class:"fx-c pt_x2"},Ps=e("span",{class:"err"},"\u78BA\u8A8D Yes",-1),Rs=[Ps],Os=A({__name:"OitmTrashInner",emits:["trash","trash_mui"],setup(u){const _=x();return(i,r)=>(l(),h(S,null,[p(_).mod===-201?(l(),h("div",ws,[As,Cs,e("div",ks,[e("button",{class:"btn-trash px_x2 py_s",onClick:r[0]||(r[0]=n=>i.$emit("trash_mui"))},Es)])])):k("",!0),p(_).mod===-205?(l(),h("div",Fs,[Ds,Bs,e("div",Ts,[e("button",{class:"btn-trash px_x2 py_s",onClick:r[1]||(r[1]=n=>i.$emit("trash"))},Rs)])])):k("",!0)],64))}}),Ss={key:0},Ms=e("h4",{class:"px"},"\u6279\u91CF\u53D6\u6D88",-1),Vs=e("p",{class:"px sub"},"Are you sure to cancel them?",-1),Is={class:"fx-c pt_x2"},Us=e("span",{class:""},"\u78BA\u8A8D Yes",-1),js=[Us],Ns={key:1},Ls=e("h4",{class:"px"},"\u8A02\u55AE\u64CD\u4F5C",-1),Ks=e("p",{class:"px sub"},"Are you sure to cancel / restore it?",-1),Ys={class:"fx-c pt_x2"},zs=e("span",{class:""},"\u53D6\u6D88 Cancel",-1),Ws=[zs],qs=e("span",{class:"px_s"},null,-1),Gs=e("span",{class:""},"\u6062\u5FA9 Restore",-1),Js=[Gs],Qs=A({__name:"OitmCanceiInner",emits:["cancei","cancei_mui","restore","restore_mui"],setup(u){const _=x();return(i,r)=>(l(),h(S,null,[p(_).mod===-202?(l(),h("div",Ss,[Ms,Vs,e("div",Is,[e("button",{class:"btn-pri-tin px_x2 py_s",onClick:r[0]||(r[0]=n=>i.$emit("cancei_mui"))},js)])])):k("",!0),p(_).mod===-206?(l(),h("div",Ns,[Ls,Ks,e("div",Ys,[e("button",{class:"btn-pri-tin px_x2 py_s",onClick:r[1]||(r[1]=n=>i.$emit("cancei"))},Ws),qs,e("button",{class:"btn-pri-out px_x2 py_s",onClick:r[2]||(r[2]=n=>i.$emit("restore"))},Js)])])):k("",!0)],64))}}),Hs={key:0},Xs={key:1},Zs=e("h4",{class:"px"},"\u8A02\u55AE\u64CD\u4F5C",-1),ei=e("p",{class:"px sub"},"Are you sure to cancel it?",-1),si={class:"fx-c pt_x2"},ii=e("span",{class:"err"},"\u53D6\u6D88\u8A02\u55AE Cancel it",-1),ni=[ii],G=A({__name:"OrderIistTrashMod",props:{aii:null},emits:["success"],setup(u,{emit:_}){const i=V(),r=F().is_admin,n=E({ioading:!1}),d={resuit_trash:async o=>{n.ioading=!1,o&&(await i.value.after_deiete_mui(),x().do_mod(0),setTimeout(()=>_("success"),800))},resuit_cancei:async o=>{n.ioading=!1,o&&(await i.value.after_cancei_mui(),x().do_mod(0))}},t={deiete:()=>i.value.deiete(),deiete_mui:()=>new Promise(async o=>{if(!n.ioading){n.ioading=!0;const s=await i.value.deiete_mui();await d.resuit_trash(s)}}),cancei:async(o=!0)=>i.value.cancei(o),cancei_mui:async(o=!0)=>{const s=await i.value.cancei_mui();d.resuit_cancei(s)}};return(o,s)=>{const a=y("eos-mod-sure");return l(),C(a,{onTrash:s[7]||(s[7]=c=>t.deiete())},{default:v(()=>[p(r)?(l(),h("div",Hs,[m(Os,{onTrash:s[0]||(s[0]=c=>t.deiete()),onTrash_mui:s[1]||(s[1]=c=>t.deiete_mui())}),m(Qs,{onCancei:s[2]||(s[2]=c=>t.cancei(!0)),onCancei_mui:s[3]||(s[3]=c=>t.cancei_mui(!0)),onRestore:s[4]||(s[4]=c=>t.cancei(!1)),onRestore_mui:s[5]||(s[5]=c=>t.cancei_mui(!1))})])):(l(),h("div",Xs,[Zs,ei,e("div",si,[e("button",{class:"btn-trash px_x4 py_s",onClick:s[6]||(s[6]=c=>t.cancei(!0))},ni)])])),m(xs,{ref_key:"otfREF",ref:i,aii:u.aii},null,8,["aii"])]),_:1})}}}),ti={class:"py f-row"},oi={class:"ps-r"},ai={key:0,class:"ip-vai-succ-icon"},ui=e("i",{class:"bi bi-check-lg"},null,-1),ci=[ui],ri={class:"py f-row"},_i={class:"ps-r"},di={key:0,class:"ip-vai-succ-icon"},li=e("i",{class:"bi bi-check-lg"},null,-1),pi=[li],mi={class:"ps-r"},hi={key:0,class:"ip-vai-succ-icon"},fi=e("i",{class:"bi bi-check-lg"},null,-1),vi=[fi],yi={class:"py pl"},$i={class:"pb"},bi={class:"pb"},xi={class:""},wi=A({__name:"CoDeiivermanPius",setup(u,{expose:_}){const i=E({many:[],ioading:!1,deiiv:{}}),r=E({phone_no:!1,chinese_name:!1,contractor_name:!1}),n=E({phone_no:"",chinese_name:"",contractor_name:""}),d=E({phone_no:!1,chinese_name:!1,contractor_name:!1});Z(()=>n.chinese_name,(s,a)=>{a&&!s&&o.reset({phone_no:"",chinese_name:"",contractor_name:""})});const t={searchMan:async s=>new Promise(async a=>{if(!i.ioading)try{t.ciose(),i.ioading=!0,t.open(s);const c={};c[s]=n[s];const f=await ee.many_of_param(c);i.many=f&&f.length>0?f:[]}catch{}setTimeout(()=>i.ioading=!1,200)}),ciose:()=>{for(let s in r)r[s]=!1},open:(s="phone_no",a=!0)=>{t.ciose(),n[s]&&(r[s]=a)},insert:s=>{if(i.deiiv=s,t.ciose(),i.deiiv)for(const a in n)n[a]=i.deiiv[a]}},o={can:()=>{let s=!0;if(n.phone_no)d.phone_no=!1;else return d.phone_no=!0,!1;if(i.deiiv.id)d.phone_no=!1;else return d.phone_no=!0,d.chinese_name=!0,d.contractor_name=!0,!1;return Object.values(d).map(a=>{a&&(s=!1)}),s},reset:s=>{const a=s.delivery_man_info;for(let c in n)n[c]=a?a[c]:"";i.deiiv=a||{},t.ciose()}};return _({resuit:()=>o.can()?{delivery_man_info:i.deiiv.id,id:i.deiiv.id,chinese_name:i.deiiv.chinese_name}:void 0,reset:o.reset}),(s,a)=>{const c=y("eos-input"),f=y("ef-deliver-typed"),$=y("ef-car-typed");return l(),h(S,null,[e("div",ti,[m(c,{class:"w-100",is_err:d.chinese_name,header:"\u59D3\u540D(\u4E2D\u6587\u540D\u6216\u82F1\u6587\u540D\u5747\u53EF) Name (You can enter Chinese or English)"},{default:v(()=>[m(L,{aii:i,show:r.chinese_name,onResuit:t.insert,onCiose:t.ciose},{default:v(()=>[e("div",oi,[R(e("input",{class:"input","onUpdate:modelValue":a[0]||(a[0]=b=>n.chinese_name=b),onKeydown:a[1]||(a[1]=U(b=>t.searchMan("chinese_name"),["enter"])),placeholder:"\u8F38\u5165\u5B8C\u6210\u5F8C\u8ACB\u6309\u56DE\u8ECA\u9375 Press Enter when you have finished typing"},null,544),[[M,n.chinese_name]]),i.deiiv&&i.deiiv.id?(l(),h("span",ai,ci)):k("",!0)])]),_:1},8,["aii","show","onResuit","onCiose"])]),_:1},8,["is_err","header"])]),e("div",ri,[m(c,{class:"w-36 w-50-p",is_err:d.phone_no,header:"\u96FB\u8A71\u865F\u78BC Telephone number"},{default:v(()=>[m(L,{aii:i,show:r.phone_no,onResuit:t.insert,onCiose:t.ciose},{default:v(()=>[e("div",_i,[R(e("input",{class:"input","onUpdate:modelValue":a[2]||(a[2]=b=>n.phone_no=b),onKeydown:a[3]||(a[3]=U(b=>t.searchMan("phone_no"),["enter"])),placeholder:"\u8ACB\u8F38\u5165 Please enter"},null,544),[[M,n.phone_no]]),i.deiiv&&i.deiiv.id?(l(),h("span",di,pi)):k("",!0)])]),_:1},8,["aii","show","onResuit","onCiose"])]),_:1},8,["is_err"]),m(c,{class:"w-333 w-50-p",is_err:!1,header:"\u5224\u982D\u540D\u7A31 Contractor name"},{default:v(()=>[m(L,{aii:i,show:r.contractor_name,onResuit:t.insert,onCiose:t.ciose},{default:v(()=>[e("div",mi,[R(e("input",{class:"input","onUpdate:modelValue":a[4]||(a[4]=b=>n.contractor_name=b),onKeydown:a[5]||(a[5]=U(b=>t.searchMan("contractor_name"),["enter"])),placeholder:"\u8ACB\u8F38\u5165 Please enter"},null,544),[[M,n.contractor_name]]),i.deiiv&&i.deiiv.contractor_name?(l(),h("span",hi,vi)):k("",!0)])]),_:1},8,["aii","show","onResuit","onCiose"])]),_:1})]),e("div",yi,[e("p",$i,[w("\u9001\u8CA8\u54E1\u985E\u5225 Type of deliveryman:\xA0\xA0"),m(f,{class:"d-ib",def:i.deiiv.type,is_txt_mode:!0},null,8,["def"])]),e("p",bi,[w("\u8ECA\u724C Licence plate:\xA0\xA0"),e("span",null,g(i.deiiv.license_plate_no),1)]),e("p",xi,[w("\u8CA8\u8ECA\u985E\u578B Truck type:\xA0\xA0"),m($,{class:"d-ib",def:i.deiiv.truck_type,is_txt_mode:!0},null,8,["def"])])])],64)}}}),Ai={class:"px_x2 py"},Ci=e("h4",null,[e("div",null,"\u6279\u91CF\u6DFB\u52A0\u9001\u8CA8\u54E1")],-1),ki=e("div",{class:"pb"},"Upload Deliveryman in bulk",-1),gi={class:"fx-c pt upper"},Ei={key:0},Fi=e("i",{class:"bi bi-save"},null,-1),Di=e("span",null,"\xA0\xA0\u6DFB\u52A0\xA0Add",-1),Bi=[Fi,Di],Ti={key:1},Pi=e("i",{class:"bi bi-save"},null,-1),Ri=e("span",null,"\xA0\xA0\u6DFB\u52A0\u4E2D\xA0Add...",-1),Oi=[Pi,Ri],Si={key:1,class:"px"},Mi=e("i",{class:"bi bi-x-lg"},null,-1),Vi=A({__name:"OrderDeiiveryPlusMod",props:{aii:null},emits:["success"],setup(u,{emit:_}){const i=u,r=V(),n=E({msg:"",ioading:!1,man:{}}),d={buiid:()=>D.buiid_mui_choose(i.aii.choose),feakdeiiveryman:()=>new Promise(async t=>{const o=D.buiid_finai_choose(i.aii.choose),s=i.aii.many;if(n.man&&n.man.id){const a=s.length,c=o.length;for(let f=0;f<a;f++){const $=s[f];for(let b=0;b<c;b++)o[b].id==$.id&&($.delivery_man_info=n.man)}}t(0)}),succ:()=>{d.feakdeiiveryman(),x().do_mod(0),_("success"),n.msg=""},submit:async()=>new Promise(async t=>{if(!n.ioading){n.ioading=!0,n.msg="";const o=d.buiid();if(o.length>0){const s=r.value.resuit();s&&(n.man=s,await B.deiivery_pius(s.id,o)?(d.succ(),t(1)):n.msg="\u7DB2\u7D61\u9023\u7D50\u932F\u8AA4\uFF01\uFF01\uFF01")}setTimeout(()=>n.ioading=!1,200)}t(0)})};return(t,o)=>{const s=y("my-button");return l(),h("div",Ai,[Ci,ki,m(wi,{ref_key:"deiiv",ref:r},null,512),e("div",gi,[m(s,null,{default:v(()=>[n.msg?(l(),h("div",Si,[Mi,e("span",null,"\xA0\xA0"+g(n.msg),1)])):(l(),h("div",{key:0,class:"px_x3",onClick:o[0]||(o[0]=a=>d.submit())},[n.ioading?(l(),h("div",Ti,Oi)):(l(),h("div",Ei,Bi))]))]),_:1})])])}}}),Ii={class:"panner mh-tabie"},zi=A({__name:"OrderWrapper",props:{aii:null},emits:["refresh","refreshMod","reset"],setup(u,{emit:_}){const i=u,r=V(),n=j(),d=x(),t=F(),o=Y(),s=()=>_("refresh"),a={resetcompany:()=>{a.pagina(0,0,i.aii.imit),_("reset")},sorts:()=>{i.aii.condition["sort[0]"]="createdAt:desc"},fresh:()=>{s()},freshMod:()=>_("refreshMod"),success:()=>{i.aii.ioading=!1,i.aii.choose.length=0},search:async c=>new Promise(async f=>{for(let $ in c)i.aii.condition[$]=c[$];try{r.value.reset()}catch{a.pagina(0,0,i.aii.imit)}f(0)}),pagina:async(c,f,$)=>{i.aii.condition["pagination[page]"]=c,i.aii.condition["pagination[pageSize]"]=$,i.aii.imit=$,s()},init:()=>new Promise(c=>{t.is_admin&&(o.company.id||n.push("/admin/company_choose")),c(0)})};return a.init(),(c,f)=>{const $=y("eos-go-button"),b=y("eos-pagination"),T=y("eos-mod"),I=y("eos-iayout-screen-extra");return l(),C(I,{is_en:!0,onBack:f[2]||(f[2]=P=>p(n).go(-1))},{opera:v(()=>[m(bs,{onRefresh:f[0]||(f[0]=P=>a.resetcompany())})]),cont:v(()=>[z(c.$slots,"top",{},()=>[m($s,{onSearch:a.search},null,8,["onSearch"])]),e("nav",Ii,[m(rs,{aii:u.aii,onRefresh:f[1]||(f[1]=P=>_("refreshMod",!0))},null,8,["aii"]),z(c.$slots,"cont"),u.aii.page.total?(l(),C(b,{key:0,mode:-1,is_500:!0,class:"pt",ref_key:"pagni",ref:r,onResuit:a.pagina,_limit:u.aii.imit,count:u.aii.page.total},{default:v(()=>[u.aii.many.length>50?(l(),C($,{key:0,is_bottom:!0})):k("",!0)]),_:1},8,["onResuit","_limit","count"])):k("",!0)])]),extra:v(()=>[m(ie),m(T,null,{default:v(()=>[p(d).mod===102?(l(),C(Vi,{key:0,aii:u.aii,onSuccess:a.freshMod},null,8,["aii","onSuccess"])):(l(),C(G,{key:1,aii:u.aii},null,8,["aii"]))]),_:1}),m(G,{aii:u.aii,onSuccess:a.freshMod},null,8,["aii","onSuccess"])]),_:3})}}});export{Ki as _,Yi as a,zi as b};
