import{d as w,p as y,o as l,c as h,h as m,w as f,a as e,m as x,e as A,b,F as R,r as J,n as P,t as g,u as V,k as $,Q as N,v as S,i as p,R as U,f as D,g as F,S as L,P as B,j as X,y as T,J as M,I as O,z,x as Z,T as ee,l as W}from"./index.b4ec00ad.js";import{_ as se}from"./EosCompanySwitchDrop.vue_vue_type_script_setup_true_lang.800e409b.js";import{_ as I}from"./EosDeiiverymanSwitchDrop.vue_vue_type_script_setup_true_lang.a284a682.js";import{_ as ie}from"./OrderIistFixedPanner.vue_vue_type_script_setup_true_lang.c80eaf24.js";const q=(u=[])=>{const d=[];return console.log("CHOOSE =",u),u.map(s=>{s.kiiied||s.id&&d.push(s)}),d},j=(u,d,s)=>{const r=d.length,t=u.length;for(let _=0;_<t;_++){const n=u[_];for(let a=0;a<r;a++){const i=d[a];s(n,i)}}},E={buiid_finai_choose:q,buiid_mui_choose:(u,d="cf_waybill_no")=>{const s=[];return u=u?q(u):[],u.map(r=>{const t=r[d];t&&s.push(t)}),s},feak_kiied:(u,d,s,r="id")=>j(u,d,(t,_)=>{t[r]==_[r]&&(t.kiiied=s,_.kiiied=s)}),feak_cancei:(u,d,s,r="id")=>j(u,d,(t,_)=>{t[r]==_[r]&&(t.is_cancel=s,_.is_cancel=s)}),feak_change_status:(u,d,s,r)=>j(u,d,(t,_)=>{t.cf_waybill_no==_.cf_waybill_no&&(t[s]=r,_[s]=r)})},te={class:"tr"},ne=e("div",{class:"w-9"},[b(" \u5275\u5EFA\u65E5\u671F"),e("br"),e("p",{class:"tr-en"},"Create date")],-1),oe=e("div",{class:"w-13"},[b(" \u7FD4\u70FD\u904B\u55AE\u865F\u78BC"),e("br"),e("p",{class:"tr-en"},"CF waybill number")],-1),ae=e("div",{class:"w-13"},[b(" \u5BA2\u6236\u904B\u55AE\u7DE8\u865F"),e("br"),e("p",{class:"tr-en"},"Waybill number")],-1),ue=e("div",{class:"w-10"},[b(" \u8A02\u55AE\u7D44"),e("br"),e("p",{class:"tr-en"},"Group")],-1),ce=e("div",{class:"w-12 w-11-p"},[b(" \u8A02\u55AE\u7DE8\u865F"),e("br"),e("p",{class:"tr-en"},"Order No.")],-1),re=e("div",{class:"w-9"},[b(" \u6D3E\u9001\u65E5\u671F"),e("br"),e("p",{class:"tr-en"},"Delivery date")],-1),_e=e("div",{class:"w-8"},[b(" \u8A02\u55AE\u65E5\u671F"),e("br"),e("p",{class:"tr-en"},"Order date")],-1),de=e("div",{class:"w-9"},[b(" \u6536\u4EF6\u4EBA"),e("br"),e("p",{class:"tr-en"},"Recipient")],-1),le=e("div",{class:"w-7 w-8-p"},[b(" \u6536\u4EF6\u96FB\u8A71"),e("br"),e("p",{class:"tr-en"},"Phone")],-1),pe=e("div",{class:"w-3"},null,-1),me={class:"w-7 fx-r"},Hi=w({__name:"OrderIistTr",props:{aii:null},setup(u){return(d,s)=>{const r=y("eos-go-button"),t=y("eos-tabie-choose-item-tr");return l(),h("nav",te,[m(t,{aii:u.aii},{default:f(()=>[ne,oe,ae,ue,ce,re,_e,de,le,pe,e("div",me,[u.aii.many.length>30?(l(),x(r,{key:0})):A("",!0)])]),_:1},8,["aii"])])}}}),he={class:"eos-tabie-opera fx-r fx-wp"},fe=["onClick"],ve={key:0,class:"hand"},ye={key:1,class:"hand hv-big"},$e=w({__name:"EosTabieOperaOrder",props:{vais:null,is_icon:{type:Boolean}},emits:["view","edit","trash","save","print","cancei"],setup(u,{emit:d}){const s=[{txt:"\u8A73\u60C5",code:"view",caii:()=>d("view"),icon:"bi bi-eye",ciass:"pri_son"},{txt:"\u522A\u9664",code:"trash",caii:()=>d("trash"),icon:"bi bi-trash",ciass:"err_trash_son"},{txt:"\u53D6\u6D88",code:"cancei",caii:()=>d("cancei"),icon:"bi bi-x-circle",ciass:"pri_son"},{txt:"\u7DE8\u8F2F",code:"edit",caii:()=>d("edit"),icon:"bi bi-pencil-square",ciass:"pri_son"},{txt:"\u5132\u5B58",code:"save",caii:()=>d("save"),icon:"bi bi-save",ciass:"pri_son"},{txt:"\u6253\u5370",code:"print",caii:()=>d("print"),icon:"bi bi-printer-fill",ciass:"pri_son"}];return(r,t)=>(l(),h("div",he,[(l(),h(R,null,J(s,(_,n)=>e("span",{key:n},[u.vais&&u.vais.indexOf(_.code)>=0?(l(),h("span",{key:0,class:P(["px_s",_.ciass]),onClick:a=>_.caii()},[u.is_icon?(l(),h("span",ye,[e("i",{class:P(["d-ib",_.icon])},null,2)])):(l(),h("span",ve,g(_.txt),1))],10,fe)):A("",!0)])),64))]))}}),be={class:"w-9"},we={class:"w-13 pr_s"},xe={class:"w-13 pr_s"},Ae={class:"w-10 pr"},Ce={class:"w-12 w-11-p px_s fx-l ps-r"},ke=e("span",{class:"hv-big"},[e("i",{class:"bi bi-person-circle"})],-1),ge=[ke],Ee={class:"w-9 pr"},Fe={class:"w-8 pr_s"},De={class:"w-9"},Be={class:"w-7 w-8-p pr_s"},Te={class:"w-3 fx-c"},Pe={key:0,class:"bi bi-lightbulb-fill buib"},Re={key:1,class:"bi bi-lightbulb"},Oe={class:"w-7 fx-r"},Ji=w({__name:"OrderIistTd",props:{idx:null,one:null,aii:null},setup(u){const d=u,s=V(),r=$(),t=N(),_=S("print"),n={init:()=>new Promise(a=>{_.value=D().is_admin?D().is_manager?"cancei_edit_print":"trash_cancei_edit_print":"cancei_edit_print",a(0)}),print:()=>new Promise(a=>{const i=d.one;t.do_order(i),r.do_mod(1),t.do_orders_print([i]),t.read(i.id,i.is_new),i.is_new=!1,a(0)}),open:a=>new Promise(i=>{d.aii.who.length=0,d.aii.who.push(d.one),r.do_mod(a),i(0)}),trash:()=>n.open(-205),cancei:()=>n.open(-206)};return n.init(),(a,i)=>{const o=y("eos-tabie-choose-item-td");return l(),h("div",{class:P(["td",{"td-kiiied":u.one.kiiied,"td-focus-err":u.one.is_new,"td-succ":u.one.is_complete_list,"td-die":u.one.is_cancel}])},[m(o,{one:u.one,aii:u.aii},{default:f(()=>[e("div",be,g(p(U).view_time(u.one.create_date,"/")),1),e("div",we,g(u.one.cf_waybill_no),1),e("div",xe,g(u.one.waybill_no),1),e("div",Ae,g(u.one.order_group),1),e("div",Ce,[e("span",{class:P(["order-td-deiivery-icon",{"order-td-deiivery-icon-iive":u.one.delivery_man_info&&u.one.delivery_man_info.id}]),onClick:i[0]||(i[0]=()=>{p(t).do_order(u.one),p(s).push("/admin/order_iist/edit")})},ge,2),e("span",{class:"pri hand",onClick:i[1]||(i[1]=()=>{p(t).do_order(u.one),p(r).do_panner(1),p(t).read(u.one.id,u.one.is_new),u.one.is_new=!1})},g(u.one.order_id),1)]),e("div",Ee,g(p(U).view_time(u.one.delivery_date,"/")),1),e("div",Fe,g(p(U).view_time(u.one.receipt_date,"/")),1),e("div",De,g(u.one.customer_name),1),e("div",Be,g(u.one.customer_phone_no),1),e("div",Te,[u.one.is_complete_list?(l(),h("i",Pe)):(l(),h("i",Re))]),e("div",Oe,[m($e,{is_icon:!0,vais:_.value,onEdit:i[2]||(i[2]=()=>{p(t).do_order(u.one),p(s).push("/admin/order_iist/edit")}),onTrash:i[3]||(i[3]=c=>n.trash()),onCancei:i[4]||(i[4]=c=>n.cancei()),onPrint:i[5]||(i[5]=c=>n.print())},null,8,["vais"])])]),_:1},8,["one","aii"])],2)}}}),Se={class:"d-ib"},Me={class:"eos-order-status-switch-drop"},Ve=e("i",{class:"bi bi-stack"},null,-1),Ue={class:"pt_s"},Ie=["onClick"],je={class:"px"},Ne=e("p",{class:"px sub pt"},"Please select a value after the order status has changed.",-1),Le={class:"fx-c pt_x2"},Ke=e("span",{class:"px"},null,-1),Ye=w({__name:"EosOrderStatusSwitchDrop",emits:["resuit"],setup(u,{emit:d}){F({ioading:!1});const s=_=>{d("resuit",t.v,_)},r={v_to_name:(_="")=>{const n=t.v;return t.ops.map(a=>{a.v==n&&(_=a.name)}),_}},t=F({now:-1,open:!0,ioading:!0,v:"",ops:[{name:"\u8CA8\u54C1\u5DF2\u5230\u8CA8\u5009 The goods have arrived at the warehouse",id:0,func:_=>{t.v=_,$().do_mod(-1001)},v:"is_in_warehouse"},{name:"\u8CA8\u54C1\u5DF2\u96E2\u958B\u8CA8\u5009\u904B\u9001\u5BA2\u4EBA\u4E2D The goods have left the warehouse",id:1,func:_=>{t.v=_,$().do_mod(-1001)},v:"is_leave_warehouse"},{name:"\u8A02\u55AE\u5DF2\u5B8C\u6210\u9001\u8CA8 The order has been delivered",id:2,func:_=>{t.v=_,$().do_mod(-1001)},v:"is_complete_list"},{name:"\u8CA8\u54C1\u672A\u80FD\u6210\u529F\u9001\u5230\u5BA2\u4EBA The goods were not delivered to the guests",id:3,func:_=>{t.v=_,$().do_mod(-1001)},v:"is_fail_deliver"}]});return(_,n)=>{const a=y("my-button"),i=y("fn-drop-down"),o=y("eos-mod-sure-two");return l(),h("div",Se,[e("div",Me,[m(i,null,{tit:f(()=>[m(a,{typed:"pri-out"},{default:f(()=>[Ve,b(" \u6279\u91CF\u4FEE\u6539\u72C0\u614B Batch change status ")]),_:1})]),cont:f(()=>[e("nav",Ue,[(l(!0),h(R,null,J(t.ops,(c,v)=>(l(),h("button",{class:"fx-l",key:v,onClick:C=>c.func?c.func(c.v):void 0},g(c.name),9,Ie))),128))])]),_:1})]),m(o,{idx:-1001},{default:f(()=>[e("h4",je,g(r.v_to_name())+"?",1),Ne,e("div",Le,[e("button",{class:"btn-pri px_x2 py_s",onClick:n[0]||(n[0]=c=>s(!0))}," \u662F\u7684\xA0Yes "),Ke,e("button",{class:"btn-err px_x2 py_s",onClick:n[1]||(n[1]=c=>s(!1))}," \u4E0D\u662F\xA0No ")])]),_:1})])}}}),ze=e("i",{class:"bi bi-filetype-pdf"},null,-1),We=e("span",null,"\xA0\u5217\u5370 Print",-1),qe=w({__name:"EosPdfButton",setup(u){return(d,s)=>{const r=y("my-button");return l(),x(r,{typed:"pri-tin"},{default:f(()=>[ze,We]),_:1})}}}),Ge=e("i",{class:"bi bi-trash"},null,-1),He=e("span",null," \u6279\u91CF\u522A\u9664\u9078\u64C7\u8A02\u55AE Delete order selection in bulk ",-1),Je=e("i",{class:"bi bi-x-circle"},null,-1),Qe=e("span",null," \u6279\u91CF\u53D6\u6D88\u9078\u64C7\u8A02\u55AE Cancel order selection in bulk ",-1),G=w({__name:"EosMuiTrashButton",props:{is_cancei:{type:Boolean}},emits:["trash","cancei"],setup(u){return(d,s)=>{const r=y("my-button");return u.is_cancei?(l(),x(r,{key:1,typed:"pri-out",onClick:s[1]||(s[1]=t=>d.$emit("cancei"))},{default:f(()=>[Je,Qe]),_:1})):(l(),x(r,{key:0,typed:"pri-out",onClick:s[0]||(s[0]=t=>d.$emit("trash"))},{default:f(()=>[Ge,He]),_:1}))}}}),Xe={class:"fx-s fx-b"},Ze={class:"fx-1"},es=e("span",{class:"px_s"},null,-1),ss=e("i",{class:"bi bi-person-plus"},null,-1),is=e("i",{class:"bi bi-plus-lg"},null,-1),ts=e("span",{class:"px_s"},null,-1),ns={key:0,class:"pt"},os=e("span",{class:"px_s"},null,-1),as=e("span",{class:"px_s"},null,-1),us=e("i",{class:"bi bi-file-earmark-spreadsheet"},null,-1),cs=e("div",{class:"py_t"},null,-1),rs=w({__name:"OrderIistBar",props:{aii:null},emits:["refresh"],setup(u,{emit:d}){const s=u,r=$(),t=D(),_=V(),n=t.is_admin,a=F({uuid:()=>{const i=n?L().company:D().company;return i?i.uuid:null},p_aii:()=>new Promise(i=>{if(a._has_choose()){N().do_orders_print(E.buiid_finai_choose(s.aii.choose));const o=_.resolve({path:"/admin/order_iist/print_muiti"});setTimeout(()=>window.open(o.href,"_blank"),400)}i(0)}),export_excei:async()=>new Promise(i=>{const o=E.buiid_mui_choose(s.aii.choose),c=a.uuid();c&&o.length>0&&B.excei(o,c+""),i(0)}),_has_choose:()=>{const i=E.buiid_finai_choose(s.aii.choose);return i&&i.length>0},mui_trash:()=>{a._has_choose()&&r.do_mod(-201)},mui_cancei:()=>{a._has_choose()&&r.do_mod(-202)},mui_deiivery_pius:()=>{a._has_choose()&&r.do_mod(102)},mui_order_status:(i,o)=>new Promise(async c=>{const v=E.buiid_mui_choose(s.aii.choose);X.TEST&&console.log(v,o,i),v.length>0&&(await B.status_mui(v,o,i),$().do_mod(0),d("refresh"),E.feak_change_status(s.aii.many,E.buiid_finai_choose(s.aii.choose),i,o)),c(0)})});return(i,o)=>{const c=y("my-button");return l(),h(R,null,[e("div",Xe,[e("div",Ze,[e("div",null,[m(qe,{onClick:o[0]||(o[0]=v=>p(a).p_aii())}),es,p(n)?(l(),x(c,{key:0,typed:"pri-out",onClick:o[1]||(o[1]=v=>p(a).mui_deiivery_pius())},{default:f(()=>[ss,b(" \xA0\u6279\u91CF\u6DFB\u52A0\u9001\u8CA8\u54E1 Upload Deliveryman in bulk ")]),_:1})):(l(),x(c,{key:1,typed:"pri-out",onClick:o[2]||(o[2]=v=>p(_).push("/admin/custom_order_iist/upioad_order_in_buik"))},{default:f(()=>[is,b(" \u6279\u91CF\u4E0A\u50B3\u8A02\u55AE Upload orders in bulk ")]),_:1})),ts,m(Ye,{onResuit:p(a).mui_order_status},null,8,["onResuit"])]),p(n)?(l(),h("div",ns,[p(t).is_manager?A("",!0):(l(),x(G,{key:0,onTrash:p(a).mui_trash,onCancei:o[3]||(o[3]=()=>{})},null,8,["onTrash"])),os,m(G,{is_cancei:!0,onCancei:p(a).mui_cancei,onTrash:o[4]||(o[4]=()=>{})},null,8,["onCancei"]),as])):A("",!0)]),e("div",null,[m(c,{onClick:o[5]||(o[5]=v=>p(a).export_excei())},{default:f(()=>[us,b(" \xA0\u5C0E\u51FA Excel Export Excel ")]),_:1})])]),cs],64)}}}),_s={class:"fiiter-bar fx-t"},ds={class:"fx-1"},ls={class:"fiiter-inner fiiter-inner-many"},ps=e("option",{value:""},"\u65E5\u671F\u985E\u578B Date type",-1),ms=e("option",{value:"creation"},"\u5275\u5EFA\u65E5\u671F Create date",-1),hs=e("option",{value:"receive"},"\u8A02\u55AE\u65E5\u671F Order date",-1),fs=e("option",{value:"delivery"},"\u6D3E\u9001\u65E5\u671F Delivery date",-1),vs=[ps,ms,hs,fs],ys=e("option",{value:""},"\u5168\u90E8\u72C0\u614B All order status",-1),$s=e("option",{value:"is_in_warehouse"}," \u8CA8\u54C1\u5DF2\u5230\u5009\u5EAB The goods have arrived at the warehouse ",-1),bs=e("option",{value:"is_leave_warehouse"}," \u8CA8\u54C1\u5DF2\u96E2\u958B\u8CA8\u5009\u904B\u9001\u5BA2\u4EBA\u4E2D The goods have left the warehouse ",-1),ws=e("option",{value:"is_complete_list"}," \u8A02\u55AE\u5DF2\u5B8C\u6210\u9001\u8CA8 The Order has been delivered ",-1),xs=e("option",{value:"is_fail_deliver"}," \u8CA8\u54C1\u672A\u80FD\u6210\u529F\u9001\u5230\u5BA2\u4EBA The goods were not delivered to the guests ",-1),As=[ys,$s,bs,ws,xs],Cs=e("div",{class:"pt_s"},null,-1),ks=w({__name:"OrderIistTop",emits:["search"],setup(u,{emit:d}){V(),S();const s=D(),r=()=>d("search",t);let t=F({wb_order_no:"",startDate:"",endDate:"",statusType:"",dateType:"",deliveryman:"",orderStatus:""});return(_,n)=>{const a=y("eos-input-fiiter"),i=y("fn-time-doubie"),o=y("eos-search-button");return l(),h("div",null,[e("div",_s,[e("nav",ds,[e("div",ls,[m(a,{class:"w-31",header:"\u4EFB\u610F\u904B\u55AE\u7DE8\u865F:"},{default:f(()=>[T(e("input",{class:"input","onUpdate:modelValue":n[0]||(n[0]=c=>p(t).wb_order_no=c),onKeydown:n[1]||(n[1]=M(c=>r(),["enter"])),placeholder:"Enter the any waybill number"},null,544),[[O,p(t).wb_order_no]])]),_:1}),m(a,{class:"w-18",header:""},{default:f(()=>[T(e("select",{class:P(["input px-0",{"ui-ip-fiiter-empty":!p(t).dateType}]),"onUpdate:modelValue":n[2]||(n[2]=c=>p(t).dateType=c)},vs,2),[[z,p(t).dateType]])]),_:1}),m(a,{class:"w-34",header:"\u65E5\u671F\u5340\u9593:"},{default:f(()=>[m(i,{onReset:n[3]||(n[3]=()=>{p(t).startDate="",p(t).endDate="",r()}),onResuit_1:n[4]||(n[4]=c=>p(t).startDate=c),onResuit_2:n[5]||(n[5]=c=>p(t).endDate=c)})]),_:1}),p(s).is_admin?(l(),x(a,{key:0,class:"w-17",header:"\u9001\u8CA8\u54E1:"},{default:f(()=>[T(e("input",{class:"input","onUpdate:modelValue":n[6]||(n[6]=c=>p(t).deliveryman=c),placeholder:"Delivery men"},null,512),[[O,p(t).deliveryman]])]),_:1})):A("",!0),m(a,{class:"w-28",header:"\u8A02\u55AE\u72C0\u614B:"},{default:f(()=>[T(e("select",{class:P(["input px-0",{"ui-ip-fiiter-empty":!p(t).statusType}]),onChange:n[7]||(n[7]=c=>r()),"onUpdate:modelValue":n[8]||(n[8]=c=>p(t).statusType=c)},As,34),[[z,p(t).statusType]])]),_:1})])]),e("div",{class:P(["",{"fiiter-fixed-btn":p(s).is_admin}])},[m(o,{onResuit:r,forms:p(t),kiii_vaiid:!0,is_en:!0},null,8,["forms"])],2)]),Cs])}}}),gs=w({__name:"OrderIistTopCompanySwitch",emits:["refresh"],setup(u){const d=D();return L(),(s,r)=>p(d).is_admin?(l(),x(se,{key:0,onResuit:r[0]||(r[0]=t=>{s.$emit("refresh")})})):A("",!0)}}),Es=w({__name:"OrderTrashRef",props:{aii:null},setup(u,{expose:d}){const s=u;N();const r=D().is_admin,t={buiid_choose:()=>E.buiid_mui_choose(s.aii.choose),buiid:()=>{const n=s.aii.who;if(n.length==1){const a=n[0];return a?a.id:null}return null},faiied_deiete:n=>{var a,i;(a=s.aii.many)==null||a.map(o=>{o.id===n&&(o.kiiied=!1)}),(i=s.aii.choose)==null||i.map(o=>{o.id===n&&(o.kiiied=!1)})},after_deiete:n=>{var a,i;(a=s.aii.many)==null||a.map(o=>{o.id===n&&(o.kiiied=!0)}),(i=s.aii.choose)==null||i.map(o=>{o.id===n&&(o.kiiied=!0)}),t.finished()},after_cancei:(n,a)=>{var i,o;(i=s.aii.many)==null||i.map(c=>{c.id===n&&(c.is_cancel=a)}),(o=s.aii.choose)==null||o.map(c=>{c.id===n&&(c.is_cancel=a)}),t.finished()},finished:()=>{s.aii.who.length=0,$().do_mod(0)}};return d({deiete_mui:async()=>{const n=t.buiid_choose();if(n.length>0)return await B.deiete_mui(n)},after_deiete_mui:()=>new Promise(n=>{E.feak_kiied(s.aii.many,s.aii.choose,!0),n(0)}),deiete:async()=>new Promise(async n=>{if(r)try{const a=t.buiid();if(a){$().do_mod(0);try{B.deiete(a),t.after_deiete(a)}catch{setTimeout(()=>t.faiied_deiete(a),20)}}}catch{}}),cancei_mui:async()=>{const n=t.buiid_choose();if(n.length>0)return await B.cancei_mui(n)},after_cancei_mui:()=>new Promise(n=>{const a=t.buiid_choose();s.aii.many.map(i=>{a.map(o=>{i.cf_waybill_no===o&&(i.is_cancel=!0)})}),n(0)}),cancei:async(n=!0)=>new Promise(async a=>{try{const i=t.buiid();i&&($().do_mod(0),await B.cancei(i,n),t.after_cancei(i,n))}catch{}})}),(n,a)=>null}}),Fs={key:0},Ds=e("h4",{class:"px"},"\u6279\u91CF\u522A\u9664",-1),Bs=e("p",{class:"px sub"},"Are you sure to delete them?",-1),Ts={class:"fx-c pt_x2"},Ps=e("span",{class:"err"},"\u78BA\u8A8D Yes",-1),Rs=[Ps],Os={key:1},Ss=e("h4",{class:"px"},"\u8A02\u55AE\u64CD\u4F5C",-1),Ms=e("p",{class:"px sub"},"Are you sure to delete it?",-1),Vs={class:"fx-c pt_x2"},Us=e("span",{class:"err"},"\u78BA\u8A8D Yes",-1),Is=[Us],js=w({__name:"OitmTrashInner",emits:["trash","trash_mui"],setup(u){const d=$();return(s,r)=>(l(),h(R,null,[p(d).mod===-201?(l(),h("div",Fs,[Ds,Bs,e("div",Ts,[e("button",{class:"btn-trash px_x2 py_s",onClick:r[0]||(r[0]=t=>s.$emit("trash_mui"))},Rs)])])):A("",!0),p(d).mod===-205?(l(),h("div",Os,[Ss,Ms,e("div",Vs,[e("button",{class:"btn-trash px_x2 py_s",onClick:r[1]||(r[1]=t=>s.$emit("trash"))},Is)])])):A("",!0)],64))}}),Ns={key:0},Ls=e("h4",{class:"px"},"\u6279\u91CF\u53D6\u6D88",-1),Ks=e("p",{class:"px sub"},"Are you sure to cancel them?",-1),Ys={class:"fx-c pt_x2"},zs=e("span",{class:""},"\u78BA\u8A8D Yes",-1),Ws=[zs],qs={key:1},Gs=e("h4",{class:"px"},"\u8A02\u55AE\u64CD\u4F5C",-1),Hs=e("p",{class:"px sub"},"Are you sure to cancel / restore it?",-1),Js={class:"fx-c pt_x2"},Qs=e("span",{class:""},"\u53D6\u6D88 Cancel",-1),Xs=[Qs],Zs=e("span",{class:"px_s"},null,-1),ei=e("span",{class:""},"\u6062\u5FA9 Restore",-1),si=[ei],ii=w({__name:"OitmCanceiInner",emits:["cancei","cancei_mui","restore","restore_mui"],setup(u){const d=$();return(s,r)=>(l(),h(R,null,[p(d).mod===-202?(l(),h("div",Ns,[Ls,Ks,e("div",Ys,[e("button",{class:"btn-pri-tin px_x2 py_s",onClick:r[0]||(r[0]=t=>s.$emit("cancei_mui"))},Ws)])])):A("",!0),p(d).mod===-206?(l(),h("div",qs,[Gs,Hs,e("div",Js,[e("button",{class:"btn-pri-tin px_x2 py_s",onClick:r[1]||(r[1]=t=>s.$emit("cancei"))},Xs),Zs,e("button",{class:"btn-pri-out px_x2 py_s",onClick:r[2]||(r[2]=t=>s.$emit("restore"))},si)])])):A("",!0)],64))}}),ti={key:0},ni={key:1},oi=e("h4",{class:"px"},"\u8A02\u55AE\u64CD\u4F5C",-1),ai=e("p",{class:"px sub"},"Are you sure to cancel it?",-1),ui={class:"fx-c pt_x2"},ci=e("span",{class:"err"},"\u53D6\u6D88\u8A02\u55AE Cancel it",-1),ri=[ci],H=w({__name:"OrderIistTrashMod",props:{aii:null},emits:["success"],setup(u,{emit:d}){const s=S(),r=D().is_admin,t=F({ioading:!1}),_={resuit_trash:async a=>{t.ioading=!1,a&&(await s.value.after_deiete_mui(),$().do_mod(0),setTimeout(()=>d("success"),800))},resuit_cancei:async a=>{t.ioading=!1,a&&(await s.value.after_cancei_mui(),$().do_mod(0))}},n={deiete:()=>s.value.deiete(),deiete_mui:()=>new Promise(async a=>{if(!t.ioading){t.ioading=!0;const i=await s.value.deiete_mui();await _.resuit_trash(i)}}),cancei:async(a=!0)=>s.value.cancei(a),cancei_mui:async(a=!0)=>{const i=await s.value.cancei_mui();_.resuit_cancei(i)}};return(a,i)=>{const o=y("eos-mod-sure");return l(),x(o,{onTrash:i[7]||(i[7]=c=>n.deiete())},{default:f(()=>[p(r)?(l(),h("div",ti,[m(js,{onTrash:i[0]||(i[0]=c=>n.deiete()),onTrash_mui:i[1]||(i[1]=c=>n.deiete_mui())}),m(ii,{onCancei:i[2]||(i[2]=c=>n.cancei(!0)),onCancei_mui:i[3]||(i[3]=c=>n.cancei_mui(!0)),onRestore:i[4]||(i[4]=c=>n.cancei(!1)),onRestore_mui:i[5]||(i[5]=c=>n.cancei_mui(!1))})])):(l(),h("div",ni,[oi,ai,e("div",ui,[e("button",{class:"btn-trash px_x4 py_s",onClick:i[6]||(i[6]=c=>n.cancei(!0))},ri)])])),m(Es,{ref_key:"otfREF",ref:s,aii:u.aii},null,8,["aii"])]),_:1})}}}),_i={class:"py f-row"},di={class:"ps-r"},li={key:0,class:"ip-vai-succ-icon"},pi=e("i",{class:"bi bi-check-lg"},null,-1),mi=[pi],hi={class:"py f-row"},fi={class:"ps-r"},vi={key:0,class:"ip-vai-succ-icon"},yi=e("i",{class:"bi bi-check-lg"},null,-1),$i=[yi],bi={class:"ps-r"},wi={key:0,class:"ip-vai-succ-icon"},xi=e("i",{class:"bi bi-check-lg"},null,-1),Ai=[xi],Ci={class:"py pl"},ki={class:"pb"},gi={class:"pb"},Ei={class:""},Fi=w({__name:"CoDeiivermanPius",setup(u,{expose:d}){const s=F({many:[],ioading:!1,deiiv:{}}),r=F({phone_no:!1,chinese_name:!1,contractor_name:!1}),t=F({phone_no:"",chinese_name:"",contractor_name:""}),_=F({phone_no:!1,chinese_name:!1,contractor_name:!1});Z(()=>t.chinese_name,(i,o)=>{o&&!i&&a.reset({phone_no:"",chinese_name:"",contractor_name:""})});const n={searchMan:async i=>new Promise(async o=>{if(!s.ioading)try{n.ciose(),s.ioading=!0,n.open(i);const c={};c[i]=t[i];const v=await ee.many_of_param(c);s.many=v&&v.length>0?v:[]}catch{}setTimeout(()=>s.ioading=!1,200)}),ciose:()=>{for(let i in r)r[i]=!1},open:(i="phone_no",o=!0)=>{n.ciose(),t[i]&&(r[i]=o)},insert:i=>{if(s.deiiv=i,n.ciose(),s.deiiv)for(const o in t)t[o]=s.deiiv[o]}},a={can:()=>{let i=!0;if(t.phone_no)_.phone_no=!1;else return _.phone_no=!0,!1;if(s.deiiv.id)_.phone_no=!1;else return _.phone_no=!0,_.chinese_name=!0,_.contractor_name=!0,!1;return Object.values(_).map(o=>{o&&(i=!1)}),i},reset:i=>{const o=i.delivery_man_info;for(let c in t)t[c]=o?o[c]:"";s.deiiv=o||{},n.ciose()}};return d({resuit:()=>a.can()?{delivery_man_info:s.deiiv.id,id:s.deiiv.id,chinese_name:s.deiiv.chinese_name}:void 0,reset:a.reset}),(i,o)=>{const c=y("eos-input"),v=y("ef-deliver-typed"),C=y("ef-car-typed");return l(),h(R,null,[e("div",_i,[m(c,{class:"w-100",is_err:_.chinese_name,header:"\u59D3\u540D(\u4E2D\u6587\u540D\u6216\u82F1\u6587\u540D\u5747\u53EF) Name (You can enter Chinese or English)"},{default:f(()=>[m(I,{aii:s,show:r.chinese_name,onResuit:n.insert,onCiose:n.ciose},{default:f(()=>[e("div",di,[T(e("input",{class:"input","onUpdate:modelValue":o[0]||(o[0]=k=>t.chinese_name=k),onKeydown:o[1]||(o[1]=M(k=>n.searchMan("chinese_name"),["enter"])),placeholder:"\u8F38\u5165\u5B8C\u6210\u5F8C\u8ACB\u6309\u56DE\u8ECA\u9375 Press Enter when you have finished typing"},null,544),[[O,t.chinese_name]]),s.deiiv&&s.deiiv.id?(l(),h("span",li,mi)):A("",!0)])]),_:1},8,["aii","show","onResuit","onCiose"])]),_:1},8,["is_err","header"])]),e("div",hi,[m(c,{class:"w-36 w-50-p",is_err:_.phone_no,header:"\u96FB\u8A71\u865F\u78BC Telephone number"},{default:f(()=>[m(I,{aii:s,show:r.phone_no,onResuit:n.insert,onCiose:n.ciose},{default:f(()=>[e("div",fi,[T(e("input",{class:"input","onUpdate:modelValue":o[2]||(o[2]=k=>t.phone_no=k),onKeydown:o[3]||(o[3]=M(k=>n.searchMan("phone_no"),["enter"])),placeholder:"\u8ACB\u8F38\u5165 Please enter"},null,544),[[O,t.phone_no]]),s.deiiv&&s.deiiv.id?(l(),h("span",vi,$i)):A("",!0)])]),_:1},8,["aii","show","onResuit","onCiose"])]),_:1},8,["is_err"]),m(c,{class:"w-333 w-50-p",is_err:!1,header:"\u5224\u982D\u540D\u7A31 Contractor name"},{default:f(()=>[m(I,{aii:s,show:r.contractor_name,onResuit:n.insert,onCiose:n.ciose},{default:f(()=>[e("div",bi,[T(e("input",{class:"input","onUpdate:modelValue":o[4]||(o[4]=k=>t.contractor_name=k),onKeydown:o[5]||(o[5]=M(k=>n.searchMan("contractor_name"),["enter"])),placeholder:"\u8ACB\u8F38\u5165 Please enter"},null,544),[[O,t.contractor_name]]),s.deiiv&&s.deiiv.contractor_name?(l(),h("span",wi,Ai)):A("",!0)])]),_:1},8,["aii","show","onResuit","onCiose"])]),_:1})]),e("div",Ci,[e("p",ki,[b("\u9001\u8CA8\u54E1\u985E\u5225 Type of deliveryman:\xA0\xA0"),m(v,{class:"d-ib",def:s.deiiv.type,is_txt_mode:!0},null,8,["def"])]),e("p",gi,[b("\u8ECA\u724C Licence plate:\xA0\xA0"),e("span",null,g(s.deiiv.license_plate_no),1)]),e("p",Ei,[b("\u8CA8\u8ECA\u985E\u578B Truck type:\xA0\xA0"),m(C,{class:"d-ib",def:s.deiiv.truck_type,is_txt_mode:!0},null,8,["def"])])])],64)}}}),Di={class:"px_x2 py"},Bi=e("h4",null,[e("div",null,"\u6279\u91CF\u6DFB\u52A0\u9001\u8CA8\u54E1")],-1),Ti=e("div",{class:"pb"},"Upload Deliveryman in bulk",-1),Pi={class:"fx-c pt upper"},Ri={key:0},Oi=e("i",{class:"bi bi-save"},null,-1),Si=e("span",null,"\xA0\xA0\u6DFB\u52A0\xA0Add",-1),Mi=[Oi,Si],Vi={key:1},Ui=e("i",{class:"bi bi-save"},null,-1),Ii=e("span",null,"\xA0\xA0\u6DFB\u52A0\u4E2D\xA0Add...",-1),ji=[Ui,Ii],Ni={key:1,class:"px"},Li=e("i",{class:"bi bi-x-lg"},null,-1),Ki=w({__name:"OrderDeiiveryPlusMod",props:{aii:null},emits:["success"],setup(u,{emit:d}){const s=u,r=S(),t=F({msg:"",ioading:!1,man:{}}),_={buiid:()=>E.buiid_mui_choose(s.aii.choose),feakdeiiveryman:()=>new Promise(async n=>{const a=E.buiid_finai_choose(s.aii.choose),i=s.aii.many;if(t.man&&t.man.id){const o=i.length,c=a.length;for(let v=0;v<o;v++){const C=i[v];for(let k=0;k<c;k++)a[k].id==C.id&&(C.delivery_man_info=t.man)}}n(0)}),succ:()=>{_.feakdeiiveryman(),$().do_mod(0),d("success"),t.msg=""},submit:async()=>new Promise(async n=>{if(!t.ioading){t.ioading=!0,t.msg="";const a=_.buiid();if(a.length>0){const i=r.value.resuit();i&&(t.man=i,await B.deiivery_pius(i.id,a)?(_.succ(),n(1)):t.msg="\u7DB2\u7D61\u9023\u7D50\u932F\u8AA4\uFF01\uFF01\uFF01")}setTimeout(()=>t.ioading=!1,200)}n(0)})};return(n,a)=>{const i=y("my-button");return l(),h("div",Di,[Bi,Ti,m(Fi,{ref_key:"deiiv",ref:r},null,512),e("div",Pi,[m(i,null,{default:f(()=>[t.msg?(l(),h("div",Ni,[Li,e("span",null,"\xA0\xA0"+g(t.msg),1)])):(l(),h("div",{key:0,class:"px_x3",onClick:a[0]||(a[0]=o=>_.submit())},[t.ioading?(l(),h("div",Vi,ji)):(l(),h("div",Ri,Mi))]))]),_:1})])])}}}),Yi={class:"panner mh-tabie"},Qi=w({__name:"OrderWrapper",props:{aii:null},emits:["refresh","refreshMod","reset"],setup(u,{emit:d}){const s=u,r=S(),t=V(),_=$(),n=D(),a=L(),i=()=>d("refresh"),o={resetcompany:()=>{o.pagina(0,0,s.aii.imit),d("reset")},sorts:()=>{s.aii.condition["sort[0]"]="createdAt:desc"},fresh:()=>{i()},freshMod:()=>d("refreshMod"),success:()=>{s.aii.ioading=!1,s.aii.choose.length=0},search:async c=>new Promise(async v=>{for(let C in c)s.aii.condition[C]=c[C];try{r.value.reset()}catch{o.pagina(0,0,s.aii.imit)}v(0)}),pagina:async(c,v,C)=>{s.aii.condition["pagination[page]"]=c,s.aii.condition["pagination[pageSize]"]=C,s.aii.imit=C,i()},init:()=>new Promise(c=>{n.is_admin&&(a.company.id||t.push("/admin/company_choose")),c(0)})};return o.init(),(c,v)=>{const C=y("eos-go-button"),k=y("eos-pagination"),K=y("eos-mod"),Q=y("eos-iayout-screen-extra");return l(),x(Q,{is_en:!0,onBack:v[2]||(v[2]=Y=>p(t).go(-1))},{opera:f(()=>[m(gs,{onRefresh:v[0]||(v[0]=Y=>o.resetcompany())})]),cont:f(()=>[W(c.$slots,"top",{},()=>[m(ks,{onSearch:o.search},null,8,["onSearch"])]),e("nav",Yi,[m(rs,{aii:u.aii,onRefresh:v[1]||(v[1]=Y=>d("refreshMod",!0))},null,8,["aii"]),W(c.$slots,"cont"),u.aii.page.total?(l(),x(k,{key:0,mode:-1,is_500:!0,class:"pt",ref_key:"pagni",ref:r,onResuit:o.pagina,_limit:u.aii.imit,count:u.aii.page.total},{default:f(()=>[u.aii.many.length>50?(l(),x(C,{key:0,is_bottom:!0})):A("",!0)]),_:1},8,["onResuit","_limit","count"])):A("",!0)])]),extra:f(()=>[m(ie),m(K,null,{default:f(()=>[p(_).mod===102?(l(),x(Ki,{key:0,aii:u.aii,onSuccess:o.freshMod},null,8,["aii","onSuccess"])):(l(),x(H,{key:1,aii:u.aii},null,8,["aii"]))]),_:1}),m(H,{aii:u.aii,onSuccess:o.freshMod},null,8,["aii","onSuccess"])]),_:3})}}});export{Hi as _,Ji as a,Qi as b};
