import{m as D,p as C,f as h,q as $,d as k,o as _,c as g,a as t,g as v,j as U,s as j,h as S,v as x,x as E,y as b,z as R,b as T,A as O,k as V,l as N,w as y,B as A,C as q,D as z,u as M,E as H,G as J,H as P,_ as G}from"./index.851be2e2.js";import{_ as K}from"./Iogo.vue_vue_type_script_setup_true_lang.58c3eab0.js";const I=async(n,r)=>{let i=await D.post(C.API+"/auth/local",{identifier:n,password:r});return i&&i.status<399?i.data:!1},F={admin:async()=>{const n=await I(C.ADMIN.name,C.ADMIN.pass);h().iogin(n.jwt,n.user)},iogin:async(n,r)=>{const i=await I(n,r);return i.jwt?(h().iogin(i.jwt,i.user),!0):!1},roie:async()=>{const n=await $.get("user_roie",h().jwt,{});h().do_roie(n?n+"":"company")}},W="/assets/AUTH.bd976ee8.jpg",L={class:"auth-wrapper auth-fuii-iayout"},Q={class:"auth-cont fx-s fx-t"},X={class:"w-50 auth-panel"},Y={class:"br"},Z=k({__name:"AuthIayout",setup(n){return(r,i)=>(_(),g("div",L,[t("div",Q,[t("div",X,[v(K,{class:"auth-logo"}),t("nav",null,[t("div",Y,[U(r.$slots,"default")])])]),t("div",{class:"w-50 auth-bg",style:j({"background-image":"url("+S(W)+")"})},null,4)])]))}});/*! js-cookie v3.0.1 | MIT */function m(n){for(var r=1;r<arguments.length;r++){var i=arguments[r];for(var l in i)n[l]=i[l]}return n}var ee={read:function(n){return n[0]==='"'&&(n=n.slice(1,-1)),n.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(n){return encodeURIComponent(n).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}};function B(n,r){function i(e,a,s){if(!(typeof document>"u")){s=m({},r,s),typeof s.expires=="number"&&(s.expires=new Date(Date.now()+s.expires*864e5)),s.expires&&(s.expires=s.expires.toUTCString()),e=encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var o="";for(var c in s)!s[c]||(o+="; "+c,s[c]!==!0&&(o+="="+s[c].split(";")[0]));return document.cookie=e+"="+n.write(a,e)+o}}function l(e){if(!(typeof document>"u"||arguments.length&&!e)){for(var a=document.cookie?document.cookie.split("; "):[],s={},o=0;o<a.length;o++){var c=a[o].split("="),u=c.slice(1).join("=");try{var p=decodeURIComponent(c[0]);if(s[p]=n.read(u,p),e===p)break}catch{}}return e?s[e]:s}}return Object.create({set:i,get:l,remove:function(e,a){i(e,"",m({},a,{expires:-1}))},withAttributes:function(e){return B(this.converter,m({},this.attributes,e))},withConverter:function(e){return B(m({},this.converter,e),this.attributes)}},{attributes:{value:Object.freeze(r)},converter:{value:Object.freeze(n)}})}var f=B(ee,{path:"/"});const ne={key:0,class:"fx-s fs_s"},se={class:"fx-l sub"},oe=t("label",{for:"checkbox_auto_iogin",class:"pl_s"},"\u8ACB\u8A18\u4F4F\u6211",-1),te=t("div",{class:"t-r pri_son"}," \u5FD8\u8A18\u5BC6\u78BC\xA0Forgot password? ",-1),ie={key:1,class:"fs_s pri_son"},ae=t("span",null,[t("span",{class:"ani_circie"},[t("i",{class:"bi bi-arrow-clockwise"})]),T(" \u81EA\u52A8\u767B\u5F55\u4E2D...")],-1),re=k({__name:"AuthOperaBar",props:{form:null},emits:["iogin","start_iogin","cancie"],setup(n,{expose:r,emit:i}){const l=n,e=x({auto_iogin:!0,key:"iogistic_autoiogin_",running:!1});E(()=>e.auto_iogin,s=>{f.set(e.key+"checkbox",s?1:0,{expires:35})});const a=x({auto_iogin_checkbox:()=>{const s=f.get(e.key+"checkbox"),o=Number.parseInt(s+"");e.auto_iogin=!!(o&&o>0)},submit_iogin:()=>{e.auto_iogin?l.form.pass&&f.set(e.key,JSON.stringify(l.form),{expires:7}):f.remove(e.key)},auto_iogin:()=>{let s={};if(e.auto_iogin){e.running=!0;try{const o=f.get(e.key);s=o?JSON.parse(o):{},i("start_iogin",s),setTimeout(()=>{e.running?i("iogin"):a.cancie()},3e3)}catch{a.cancie()}}else a.cancie()},cancie:()=>{e.running=!1,i("cancie")}});return r({...a}),a.auto_iogin_checkbox(),a.auto_iogin(),(s,o)=>e.running?(_(),g("div",ie,[ae,t("span",{class:"pl hand",onClick:o[1]||(o[1]=(...c)=>a.cancie&&a.cancie(...c))},"\u70B9\u6B64\u53D6\u6D88")])):(_(),g("div",ne,[t("div",se,[b(t("input",{id:"checkbox_auto_iogin","onUpdate:modelValue":o[0]||(o[0]=c=>e.auto_iogin=c),type:"checkbox"},null,512),[[R,e.auto_iogin]]),oe]),te]))}}),w=n=>(J("data-v-73d2522b"),n=n(),P(),n),ce=w(()=>t("h3",{class:"py_s"},"\u6B61\u8FCE\u4F7F\u7528\u7269\u6D41\u7CFB\u7D71",-1)),ue=w(()=>t("h3",null,"Welcome to the logistics system",-1)),le={class:"pt_x2 upper"},pe=w(()=>t("i",{class:"bi bi-person"},null,-1)),_e=w(()=>t("i",{class:"bi bi-lock"},null,-1)),de=["onKeydown"],fe={class:"pt"},ge={key:0},he={key:1},me=k({__name:"Iogin",setup(n){const r=z(),i=M(),l=O(),e=x({name:"",pass:"",ioginning:!1}),a=x({name:!1,pass:!1}),s=c=>{H(()=>{for(let u in c)e[u]=c[u]})},o=async function(){if(!e.name){a.name=!0;return}if(!e.pass){a.pass=!0;return}if(e.ioginning=!0,await F.iogin(e.name,e.pass)){await F.roie();const p=r.query.to;l.value.submit_iogin(),e.ioginning=!1,p?i.push(p):i.push("/")}};return(c,u)=>{const p=V("eos-input");return _(),N(Z,{class:"fx-s"},{default:y(()=>[ce,ue,t("div",le,[v(p,{header:"\u90F5\u7BB1",is_err:a.name,class:"pb input-auth"},{default:y(()=>[pe,b(t("input",{"onUpdate:modelValue":u[0]||(u[0]=d=>e.name=d),class:"input ip-w-100",placeholder:"\u8ACB\u8F38\u5165\u60A8\u7684\u90F5\u7BB1"},null,512),[[A,e.name]])]),_:1},8,["is_err"]),v(p,{header:"\u5BC6\u78BC",is_err:a.pass,class:"pb input-auth"},{default:y(()=>[_e,b(t("input",{type:"password","onUpdate:modelValue":u[1]||(u[1]=d=>e.pass=d),class:"input ip-w-100",onKeydown:q(o,["enter"]),placeholder:"\u8ACB\u8F38\u5165\u60A8\u7684\u5BC6\u78BC"},null,40,de),[[A,e.pass]])]),_:1},8,["is_err"]),t("div",fe,[v(re,{onCancie:u[2]||(u[2]=d=>e.ioginning=!1),onStart_iogin:s,onIogin:o,ref_key:"opera",ref:l,class:"pb",form:e},null,8,["form"]),t("button",{onClick:o,class:"btn-pri btn-auth upper_x2"},[e.ioginning?(_(),g("span",he,"\u767B\u9304\u4E2D...")):(_(),g("span",ge,"\u767B\u9304"))])])])]),_:1})}}});const we=G(me,[["__scopeId","data-v-73d2522b"]]);export{we as default};
